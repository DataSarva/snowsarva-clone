{"extract_id":"extract_3f3ab6040f124a61a0d1ac5824f87de6","results":[{"url":"https://docs.snowflake.com/en/user-guide/cost-attributing","title":"Attributing cost | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Visibility Attributing cost\n\n# Attributing cost [¶]( \"Link to this heading\")\n\nAn organization can apportion the cost of using Snowflake to logical units within the organization (for example, to different\ndepartments, environments, or projects). This chargeback or showback model is useful for accounting purposes and pinpoints\nareas of the organization that could benefit from controls and optimizations that can reduce costs.\n\nTo attribute costs to different groups like departments or projects, use the following recommended approach:\n\n* Use [object tags](object-tagging/introduction) to associate resources and users with departments or projects.\n* Use [query tags](../sql-reference/parameters.html) to associate individual queries with departments or projects when the queries are\n  made by the same application on behalf of users belonging to multiple departments.\n\n## Types of cost attribution scenarios [¶]( \"Link to this heading\")\n\nThe following cost attribution scenarios are the most commonly encountered. In these scenarios, warehouses are used as an\nexample of a resource that incurs costs.\n\n* **Resources used exclusively by a single cost center or department:** An example of this is using object tags to associate\n  warehouses with a department. You can use these object tags to attribute the costs incurred by those warehouses to that\n  department entirely.\n  \n  [](../_images/cost-attribute-non-shared.png)\n* **Resources that are shared by users from multiple departments:** An example of this is a warehouse shared by users from\n  different departments. In this case, you use object tags to associate each user with a department. The costs of queries are\n  attributed to the users. Using the object tags assigned to users, you can break down the costs by department.\n  \n  [](../_images/cost-attribute-user-level-share.png)\n* **Applications or workflows shared by users from different departments:** An example of this is an application that issues\n  queries on behalf of its users. In this case, each query executed by the application is assigned a query tag that identifies\n  the team or cost center of the user on whose behalf the query is being made.\n  \n  [](../_images/cost-attribute-app-level-share.png)\n\nThe next sections explain how to set up object tags in your accounts and provide the details for each of these cost attribution\nscenarios.\n\n## Setting up object tags for cost attribution [¶]( \"Link to this heading\")\n\nWhen you set up tags to represent the groupings that you want to use for cost attribution, you should determine if the\ngroupings apply to a single account or multiple accounts. This determines how you set up your tags.\n\nFor example, suppose that you want to attribute costs based on department.\n\n* If the resources used by the department are located in a single account, you create the tags in a database in that account.\n* If the resources used by the department span multiple accounts, you [create the tags]() in a key account in your organization (for example, in your [organization account](organization-accounts) ),\n  and you make those tags available in other accounts through [replication]() .\n\nThe next sections explain how to create the tags, replicate the tags, and apply the tags to resources.\n\n* [Creating the tags]()\n* [Replicating the tag database]()\n* [Tagging the resources and users]()\n\nNote\n\nThe examples in these sections use the custom role `tag_admin` , which is assumed to have been granted the privileges to\ncreate and manage tags. Within your organization, you can use more granular [privileges for object tagging](object-tagging/work.html) to develop a secure tagging strategy.\n\n### Creating the tags [¶]( \"Link to this heading\")\n\nAs part of designing the strategy, decide on the database and schema where you plan to create the tags.\n\n* You can create a dedicated database and schema for the tags.\n* If you want to tag resources in different accounts across your organization, you can create the tags in a key account in your\n  organization (for example, in your [organization account](organization-accounts) ).\n\nThe following example creates a database named `cost_management` and a schema named `tags` for the tags that you plan to use:\n\n```\nUSE ROLE tag_admin ; \n\n CREATE DATABASE cost_management ; \n CREATE SCHEMA tags ;\n```\n\nCopy\n\nWith `cost_management` and `tags` selected as the current database and schema, create a tag named `cost_center` and set\nthe values allowed for the tag to the names of cost centers:\n\n```\nCREATE TAG cost_center \n  ALLOWED_VALUES 'finance' , 'marketing' , 'engineering' , 'product' ;\n```\n\nCopy\n\n### Replicating the tag database [¶]( \"Link to this heading\")\n\nIf you have an organization with multiple accounts and you want to make the tags available in these other accounts, [set up your accounts for replication](account-replication-config) , and [create a replication group](../sql-reference/sql/create-replication-group) in a main account (for example, in the [organization account](organization-accounts) ). Set up this replication group to replicate the database\ncontaining the tags.\n\n[](../_images/cost-attribute-replication.png)\n\nFor example, to replicate the tags to the accounts named `my_org.my_account` and `my_org.my_account_2` , execute this\nstatement in your organization account:\n\n```\nCREATE REPLICATION GROUP cost_management_repl_group \n  OBJECT_TYPES = DATABASES \n  ALLOWED_DATABASES = cost_management \n  ALLOWED_ACCOUNTS = my_org . my_account_1 , my_org . my_account_2 \n  REPLICATION_SCHEDULE = '10 MINUTE' ;\n```\n\nCopy\n\nThen, in each account in which you want to make the tags available, create a secondary replication group, and refresh this\ngroup from the primary group:\n\n```\nCREATE REPLICATION GROUP cost_management_repl_group \n  AS REPLICA OF my_org . my_org_account . cost_management_repl_group ; \n\n ALTER REPLICATION GROUP cost_management_repl_group REFRESH ;\n```\n\nCopy\n\n### Tagging the resources and users [¶]( \"Link to this heading\")\n\nAfter creating and replicating the tags, you can use these tags to identify the warehouses and users belonging to each\ndepartment. For example, because the sales department uses both `warehouse1` and `warehouse2` , you can set the `cost_center` tag to `'SALES'` for both warehouses.\n\nTip\n\nIdeally, you should have workflows that automate the process of applying these tags when you create resources and users.\n\n```\nUSE ROLE tag_admin ; \n\n ALTER WAREHOUSE warehouse1 SET TAG cost_management . tags . cost_center = 'SALES' ; \n ALTER WAREHOUSE warehouse2 SET TAG cost_management . tags . cost_center = 'SALES' ; \n ALTER WAREHOUSE warehouse3 SET TAG cost_management . tags . cost_center = 'FINANCE' ; \n\n ALTER USER finance_user SET TAG cost_management . tags . cost_center = 'FINANCE' ; \n ALTER USER sales_user SET TAG cost_management . tags . cost_center = 'SALES' ;\n```\n\nCopy\n\n## Viewing cost by tag in SQL [¶]( \"Link to this heading\")\n\nYou can attribute costs within an account or across accounts in an organization:\n\n* **Attributing costs within an account**\n  \n  You can attribute costs within an account by querying the following views in the [ACCOUNT\\_USAGE](../sql-reference/account-usage) schema:\n  \n    + [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) : Identifies objects (for example, warehouses and users) that have tags.\n    + [WAREHOUSE\\_METERING\\_HISTORY view](../sql-reference/account-usage/warehouse_metering_history) : Provides credit usage for warehouses.\n    + [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) : Provides the compute costs for queries. The cost per query is\n        the warehouse credit usage for executing the query.\n        \n        For more information on using this view, see [About the QUERY\\_ATTRIBUTION\\_HISTORY view]() .\n* **Attributing costs across accounts in an organization**\n  \n  Within an organization, you can also attribute costs for resources that are used **exclusively by a single department** by\n  querying views in the [ORGANIZATION\\_USAGE](../sql-reference/organization-usage) schema from the [organization account](organization-accounts) .\n  \n  Note\n  \n    + In the ORGANIZATION\\_USAGE schema, the TAG\\_REFERENCES view is only available in the organization account.\n    + The QUERY\\_ATTRIBUTION\\_HISTORY view is only available in the ACCOUNT\\_USAGE schema for an account. There is no\n        organization-wide equivalent of the view.\n\nThe next sections explain how to attribute costs for some of the [common cost-attribution scenarios]() :\n\n* [Resources not shared by departments]()\n* [Resources shared by users from different departments]()\n* [Resources used by applications that need to attribute costs to different departments]()\n\n### Resources not shared by departments [¶]( \"Link to this heading\")\n\nSuppose that you want to attribute costs by department and that each department uses a set of dedicated warehouses.\n\nIf you tag warehouses with a `cost_center` tag to identify the department that owns the warehouse, you can join the\nACCOUNT\\_USAGE [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) with the [WAREHOUSE\\_METERING\\_HISTORY view](../sql-reference/account-usage/warehouse_metering_history) on the `object_id` and `warehouse_id` columns to get usage\ninformation by warehouse, and you can use the `tag_value` column to identify the departments that own those warehouses.\n\nThe following SQL statement performs this join:\n\n```\nSELECT \n    TAG_REFERENCES . tag_name , \n    COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) AS tag_value , \n    SUM ( WAREHOUSE_METERING_HISTORY . credits_used_compute ) AS total_credits \n  FROM \n    SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      LEFT JOIN SNOWFLAKE . ACCOUNT_USAGE . TAG_REFERENCES \n        ON WAREHOUSE_METERING_HISTORY . warehouse_id = TAG_REFERENCES . object_id \n          AND TAG_REFERENCES . domain = 'WAREHOUSE' \n  WHERE \n    WAREHOUSE_METERING_HISTORY . start_time >= DATE_TRUNC ( 'MONTH' , DATEADD ( MONTH , - 1 , CURRENT_DATE )) \n      AND WAREHOUSE_METERING_HISTORY . start_time < DATE_TRUNC ( 'MONTH' ,  CURRENT_DATE ) \n  GROUP BY TAG_REFERENCES . tag_name , COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n```\n+-------------+-------------+-----------------+ \n | TAG_NAME    | TAG_VALUE   |   TOTAL_CREDITS | \n |-------------+-------------+-----------------| \n | NULL        | untagged    |    20.360277159 | \n | COST_CENTER | Sales       |    17.173333333 | \n | COST_CENTER | Finance     |      8.14444444 | \n +-------------+-------------+-----------------+\n```\n\nYou can run a similar query to perform the same attribution for all the accounts in your organization using views in the\nORGANIZATION\\_USAGE schema from the [organization account](organization-accounts) . The rest of the query\ndoes not change.\n\n```\nSELECT \n    TAG_REFERENCES . tag_name , \n    COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) AS tag_value , \n    SUM ( WAREHOUSE_METERING_HISTORY . credits_used_compute ) AS total_credits \n  FROM \n    SNOWFLAKE . ORGANIZATION_USAGE . WAREHOUSE_METERING_HISTORY \n      LEFT JOIN SNOWFLAKE . ORGANIZATION_USAGE . TAG_REFERENCES \n        ON WAREHOUSE_METERING_HISTORY . warehouse_id = TAG_REFERENCES . object_id \n          AND TAG_REFERENCES . domain = 'WAREHOUSE' \n          AND tag_database = 'COST_MANAGEMENT' AND tag_schema = 'TAGS' \n  WHERE \n    WAREHOUSE_METERING_HISTORY . start_time >= DATE_TRUNC ( 'MONTH' , DATEADD ( MONTH , - 1 , CURRENT_DATE )) \n      AND WAREHOUSE_METERING_HISTORY . start_time < DATE_TRUNC ( 'MONTH' ,  CURRENT_DATE ) \n  GROUP BY TAG_REFERENCES . tag_name , COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n### Resources shared by users from different departments [¶]( \"Link to this heading\")\n\nSuppose that users in different departments share the same warehouses and you want to break down the credits used by each\ndepartment. You can tag the users with a `cost_center` tag to identify the department that they belong to, and you can join\nthe [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) with the [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) .\n\nNote\n\nYou can only get this data for a single account at a time. You cannot execute a query that retrieves this data across\naccounts in an organization.\n\nThe next sections provide examples of SQL statements for attributing costs for shared resources.\n\n* [Calculating the cost of user queries for the last month]()\n* [Calculating the cost of user queries by department without idle time]()\n* [Calculating the cost of queries by users without idle time]()\n* [Calculating the cost of queries by users without tags]()\n\n#### Calculating the cost of user queries for the last month [¶]( \"Link to this heading\")\n\nThis following SQL statement calculates the costs for the last month.\n\nIn this example, idle time is distributed among the users in proportion to their usage.\n\n```\nWITH \n  wh_bill AS ( \n    SELECT SUM ( credits_used_compute ) AS compute_credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n        AND start_time < CURRENT_DATE \n  ), \n  user_credits AS ( \n    SELECT user_name , SUM ( credits_attributed_compute ) AS credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n        AND start_time < CURRENT_DATE \n      GROUP BY user_name \n  ), \n  total_credit AS ( \n    SELECT SUM ( credits ) AS sum_all_credits \n    FROM user_credits \n  ) \n SELECT \n    u . user_name , \n    u . credits / t . sum_all_credits * w . compute_credits AS attributed_credits \n  FROM user_credits u , total_credit t , wh_bill w \n  ORDER BY attributed_credits DESC ;\n```\n\nCopy\n\n```\n+-----------+--------------------+ \n | USER_NAME | ATTRIBUTED_CREDITS | \n |-----------+--------------------+ \n | FINUSER   | 6.603575468        | \n | SALESUSER | 4.321378049        | \n | ENGUSER   | 0.6217131392       | \n |-----------+--------------------+\n```\n\n#### Calculating the cost of user queries by department without idle time [¶]( \"Link to this heading\")\n\nThe following example attributes the compute cost to each department through the queries executed by users in that department.\nThis query depends on the user objects having a tag that identifies their department.\n\n```\nWITH joined_data AS ( \n  SELECT \n      tr . tag_name , \n      tr . tag_value , \n      qah . credits_attributed_compute , \n      qah . start_time \n    FROM SNOWFLAKE . ACCOUNT_USAGE . TAG_REFERENCES tr \n      JOIN SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY qah \n        ON tr . domain = 'USER' AND tr . object_name = qah . user_name \n ) \n SELECT \n    tag_name , \n    tag_value , \n    SUM ( credits_attributed_compute ) AS total_credits \n  FROM joined_data \n  WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY tag_name , tag_value \n  ORDER BY tag_name , tag_value ;\n```\n\nCopy\n\n```\n+-------------+-------------+-----------------+ \n | TAG_NAME    | TAG_VALUE   |   TOTAL_CREDITS | \n |-------------+-------------+-----------------| \n | COST_CENTER | engineering |   0.02493688426 | \n | COST_CENTER | finance     |    0.2281084988 | \n | COST_CENTER | marketing   |    0.3686840545 | \n |-------------+-------------+-----------------|\n```\n\n#### Calculating the cost of queries by users without idle time [¶]( \"Link to this heading\")\n\nThis following SQL statement calculates the costs per user for the past month (excluding idle time).\n\n```\nSELECT user_name , SUM ( credits_attributed_compute ) AS credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE \n    start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY user_name ;\n```\n\nCopy\n\n```\n+-----------+--------------------+ \n | USER_NAME | ATTRIBUTED_CREDITS | \n |-----------+--------------------| \n | JSMITH    |       17.173333333 | \n | MJONES    |         8.14444444 | \n | SYSTEM    |         5.33985393 | \n +-----------+--------------------+\n```\n\n#### Calculating the cost of queries by users without tags [¶]( \"Link to this heading\")\n\nThe following example calculates the cost of queries by users who are not tagged. You can use this to verify that tags are\nbeing applied consistently to users.\n\n```\nSELECT qah . user_name , SUM ( qah . credits_attributed_compute ) as total_credits \n  FROM \n    SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY qah \n    LEFT JOIN snowflake . account_usage . tag_references tr \n    ON qah . user_name = tr . object_name AND tr . DOMAIN = 'USER' \n  WHERE \n    start_time >= dateadd ( month , - 1 , current_date ) \n    AND qah . user_name IS NULL OR tr . object_name IS NULL \n  GROUP BY qah . user_name \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n```\n+------------+---------------+ \n | USER_NAME  | TOTAL_CREDITS | \n |------------+---------------| \n | RSMITH     |  0.1830555556 | \n +------------+---------------+\n```\n\n### Resources used by applications that need to attribute costs to different departments [¶]( \"Link to this heading\")\n\nThe examples in this section calculate the costs for one or more applications that are powered by Snowflake.\n\nThe examples assume that these applications set query tags that identify the application for all queries executed. To set the\nquery tag for queries in a session, execute the [ALTER SESSION](../sql-reference/sql/alter-session) command. For example:\n\n```\nALTER SESSION SET QUERY_TAG = 'COST_CENTER=finance' ;\n```\n\nCopy\n\nThis associates the `COST_CENTER=finance` tag with all subsequent queries executed during the session.\n\nYou can then use the query tag to trace back the cost incurred by these queries to the appropriate departments.\n\nThe next sections provide examples of using this approach.\n\n* [Calculating the cost of queries by department]()\n* [Calculating the cost of queries (excluding idle time) by query tag]()\n* [Calculating the cost of queries (including idle time) by query tag]()\n\n#### Calculating the cost of queries by department [¶]( \"Link to this heading\")\n\nThe following example calculates the compute credits and the credits used for the [query acceleration service](query-acceleration-service) for the finance department. This depends on the `COST_CENTER=finance` query tag being applied to the original queries that were executed.\n\nNote that the costs exclude idle time.\n\n```\nSELECT \n    query_tag , \n    SUM ( credits_attributed_compute ) AS compute_credits , \n    SUM ( credits_used_query_acceleration ) AS qas \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE query_tag = 'COST_CENTER=finance' \n  GROUP BY query_tag ;\n```\n\nCopy\n\n```\n+---------------------+-----------------+------+ \n | QUERY_TAG           | COMPUTE_CREDITS | QAS  | \n |---------------------+-----------------|------| \n | COST_CENTER=finance |      0.00576115 | null | \n +---------------------+-----------------+------+\n```\n\n#### Calculating the cost of queries (excluding idle time) by query tag [¶]( \"Link to this heading\")\n\nThe following example calculates the cost of queries by query tag and includes queries without tags (identified as “untagged”).\n\n```\nSELECT \n    COALESCE ( NULLIF ( query_tag , '' ), 'untagged' ) AS tag , \n    SUM ( credits_attributed_compute ) AS compute_credits , \n    SUM ( credits_used_query_acceleration ) AS qas \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n  GROUP BY tag \n  ORDER BY compute_credits DESC ;\n```\n\nCopy\n\n```\n+-------------------------+-----------------+------+ \n | TAG                     | COMPUTE_CREDITS | QAS  | \n |-------------------------+-----------------+------+ \n | untagged                | 3.623173449     | null | \n | COST_CENTER=engineering | 0.531431948     | null | \n |-------------------------+-----------------+------+\n```\n\n#### Calculating the cost of queries (including idle time) by query tag [¶]( \"Link to this heading\")\n\nThe following example distributes the idle time that is not captured in the per-query cost across departments in proportion\nto their usage of the warehouse.\n\n```\nWITH \n  wh_bill AS ( \n    SELECT SUM ( credits_used_compute ) AS compute_credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n      AND start_time < CURRENT_DATE \n  ), \n  tag_credits AS ( \n    SELECT \n        COALESCE ( NULLIF ( query_tag , '' ), 'untagged' ) AS tag , \n        SUM ( credits_attributed_compute ) AS credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n      WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n      GROUP BY tag \n  ), \n  total_credit AS ( \n    SELECT SUM ( credits ) AS sum_all_credits \n      FROM tag_credits \n  ) \n SELECT \n    tc . tag , \n    tc . credits / t . sum_all_credits * w . compute_credits AS attributed_credits \n  FROM tag_credits tc , total_credit t , wh_bill w \n  ORDER BY attributed_credits DESC ;\n```\n\nCopy\n\n```\n+-------------------------+--------------------+ \n | TAG                     | ATTRIBUTED_CREDITS | \n +-------------------------+--------------------| \n | untagged                |        9.020031304 | \n | COST_CENTER=finance     |        1.027742521 | \n | COST_CENTER=engineering |        1.018755812 | \n | COST_CENTER=marketing   |       0.4801370376 | \n +-------------------------+--------------------+\n```\n\n## Viewing cost by tag in Snowsight [¶]( \"Link to this heading\")\n\nYou can attribute costs by reporting on the use of resources that have the `cost_center` tag. You can access this data in [Snowsight](ui-snowsight-gs.html) .\n\n1. Switch to a role that has [access to the ACCOUNT\\_USAGE schema](../sql-reference/account-usage.html) .\n2. In the navigation menu, select Admin » Cost management .\n3. Select Consumption .\n4. From the Tags drop-down, select the `cost_center` tag.\n5. To focus on a specific cost center, select a value from the list of the tag’s values.\n6. Select Apply .\n\nFor more details about filtering in Snowsight, see [Filter by tag](cost-exploring-compute.html) .\n\n## About the QUERY\\_ ATTRIBUTION\\_ HISTORY view [¶]( \"Link to this heading\")\n\nYou can use the [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) to attribute cost based on queries. The cost per\nquery is the warehouse credit usage for executing the query. This cost does not include any other credit usage that is incurred\nas a result of query execution. For example, the following are not included in the query cost:\n\n* Data transfer costs\n* Storage costs\n* Cloud services costs\n* Costs for serverless features\n* Costs for tokens processed by AI services\n\nFor queries that are executed concurrently, the cost of the warehouse is attributed to individual queries based on the weighted\naverage of their resource consumption during a given time interval.\n\nThe cost per query does not include warehouse _idle time_ . Idle time is a period of time in which no queries are running in the\nwarehouse and can be measured at the warehouse level.\n\n## Additional examples of queries [¶]( \"Link to this heading\")\n\nThe next sections provide additional queries that you can use for cost attribution:\n\n* [Grouping similar queries]()\n* [Attributing costs of hierarchical queries]()\n\n### Grouping similar queries [¶]( \"Link to this heading\")\n\nFor recurrent or similar queries, use the `query_hash` or `query_parameterized_hash` to group costs\nby query.\n\nTo find the most expensive recurrent queries for the current month, execute the following statement:\n\n```\nSELECT query_parameterized_hash , \n       COUNT (*) AS query_count , \n       SUM ( credits_attributed_compute ) AS total_credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n  AND start_time < CURRENT_DATE \n  GROUP BY query_parameterized_hash \n  ORDER BY total_credits DESC \n  LIMIT 20 ;\n```\n\nCopy\n\nFor an additional query based on query ID, see [Examples](../sql-reference/account-usage/query_attribution_history.html) .\n\n### Attributing costs of hierarchical queries [¶]( \"Link to this heading\")\n\nFor stored procedures that issue multiple hierarchical queries, you can compute the attributed query costs for the\nprocedure by using the root query ID for the procedure.\n\n1. To find the root query ID for a stored procedure, use the [ACCESS\\_HISTORY view](../sql-reference/account-usage/access_history) . For example,\n   to find the root query ID for a stored procedure, set the `query_id` and execute the following statements:\n   \n   ```\n   SET query_id = '<query_id>' ; \n   \n    SELECT query_id , \n          parent_query_id , \n          root_query_id , \n          direct_objects_accessed \n     FROM SNOWFLAKE . ACCOUNT_USAGE . ACCESS_HISTORY \n     WHERE query_id = $ query_id ;\n   ```\n   \n   Copy\n   \n   For more information, see [Ancestor queries with stored procedures](access-history.html) .\n2. To sum the query cost for the entire procedure, replace `<root_query_id>` and execute the following statements:\n   \n   ```\n   SET query_id = '<root_query_id>' ; \n   \n    SELECT SUM ( credits_attributed_compute ) AS total_attributed_credits \n     FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n     WHERE ( root_query_id = $ query_id OR query_id = $ query_id );\n   ```\n   \n   Copy\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nLanguage: **English**\n\n* [English](/en/user-guide/cost-attributing)\n* [Français](/fr/user-guide/cost-attributing)\n* [Deutsch](/de/user-guide/cost-attributing)\n* [日本語](/ja/user-guide/cost-attributing)\n* [한국어](/ko/user-guide/cost-attributing)\n* [Português](/pt/user-guide/cost-attributing)\n"],"full_content":null},{"url":"https://docs.snowflake.com/en/sql-reference/account-usage","title":"Account Usage | Snowflake Documentation","publish_date":"2021-11-01","excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Reference](/en/reference) [General reference](/en/sql-reference) [SNOWFLAKE database](/en/sql-reference/snowflake-db) Account Usage\n\n# Account Usage [¶]( \"Link to this heading\")\n\nIn the SNOWFLAKE database, the ACCOUNT\\_USAGE and READER\\_ACCOUNT\\_USAGE schemas enable querying object metadata, as well as historical\nusage data, for your account and all reader accounts (if any) associated with the account.\n\n## Overview of Account Usage schemas [¶]( \"Link to this heading\")\n\nACCOUNT\\_USAGE :\n    Views that display object metadata and usage metrics for your account.\n\nIn general, these views mirror the corresponding views and table functions in the Snowflake [Snowflake Information Schema](info-schema) , but\nwith the following differences:\n\n* Records for dropped objects included in each view.\n* Longer retention time for historical usage data.\n* Data latency.\n\nFor more details, see [Differences Between Account Usage and Information Schema]() (in this topic). For more details about each\nview, see [ACCOUNT\\_USAGE Views]() (in this topic).\nREADER\\_ACCOUNT\\_USAGE :\n    Views that display object metadata and usage metrics for all the reader accounts that have been created for\nyour account (as a [Secure Data Sharing](../guides-overview-sharing) provider).\n\nThese views are a small subset of the ACCOUNT\\_USAGE views that apply to reader accounts. Also, each view in this schema contains an\nadditional `READER_ACCOUNT_NAME` column for filtering results by reader account.\n\nFor more details about each view, see [READER\\_ACCOUNT\\_USAGE Views]() (in this topic).\n\nNote that these views are empty if no reader accounts have been created for your account.\n\n## Differences between Account Usage and Information Schema [¶]( \"Link to this heading\")\n\nThe Account Usage views and the corresponding views (or table functions) in the [Snowflake Information Schema](info-schema) utilize identical\nstructures and naming conventions, but with some key differences, as described in this section:\n\n|Difference |Account Usage |Information Schema |\n| --- | --- | --- |\n|Includes dropped objects |Yes |No |\n|Latency of data |From 45 minutes to 3 hours (varies by view) |None |\n|Retention of historical data |1 Year |From 7 days to 6 months (varies by view/table function) |\n\n\nFor more details, see the following sections.\n\n### Dropped object records [¶]( \"Link to this heading\")\n\nAccount usage views include records for all objects that have been dropped. Many of the views for object types contain an\nadditional `DELETED` column that displays the timestamp when the object was dropped.\n\nIn addition, because objects can be dropped and recreated with the same name, to differentiate between objects records that have the\nsame name, the account usage views include ID columns, where appropriate, that display the internal IDs generated and assigned to\neach record by the system.\n\nIf a column for an object name (e.g. the `TABLE_NAME` column) is NULL, that object has been dropped. In this case, the\ncolumns for the names and IDs of the parent objects (e.g. the `DATABASE_NAME` and `SCHEMA_NAME` columns) are also\nNULL.\n\nNote that in some views, the column for the object name might still contain the name of the object, even if the object has been\ndropped.\n\n### Data latency [¶]( \"Link to this heading\")\n\nDue to the process of extracting the data from Snowflake’s internal metadata store, the account usage views have some natural latency:\n\n* For most of the views, the latency is 2 hours (120 minutes).\n* For the remaining views, the latency varies between 45 minutes and 3 hours.\n\nFor details, see the list of views for each schema (in this topic). Also, note that these are all maximum time lengths; the actual\nlatency for a given view when the view is queried may be less.\n\nIn contrast, views/table functions in the [Snowflake Information Schema](info-schema) do not have any latency.\n\n### Historical data retention [¶]( \"Link to this heading\")\n\nCertain account usage views provide historical usage metrics. The retention period for these views is 1 year (365 days).\n\nIn contrast, the corresponding views and table functions in the [Snowflake Information Schema](info-schema) have much shorter retention periods,\nranging from 7 days to 6 months, depending on the view.\n\n## ACCOUNT\\_USAGE views [¶]( \"Link to this heading\")\n\nThe ACCOUNT\\_USAGE schema contains the following views:\n\n|View |Type |Latency <sup>[1]</sup> |Edition <sup>[3]</sup> |Notes |\n| --- | --- | --- | --- | --- |\n|[ACCESS\\_HISTORY](account-usage/access_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[AGGREGATE\\_ACCESS\\_HISTORY](account-usage/aggregate_access_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[AGGREGATE\\_QUERY\\_HISTORY](account-usage/aggregate_query_history) |Historical |3 hours | | |\n|[AGGREGATION\\_POLICIES](account-usage/aggregation_policies) |Object |2 hours | | |\n|[ALERT\\_HISTORY](account-usage/alert_history) |Historical |3 hours | |Data retained for 1 year. |\n|[ANOMALIES\\_DAILY](account-usage/anomalies_daily) |Historical |3 hours | |Data retained for 1 year. |\n|[APPLICATION\\_DAILY\\_USAGE\\_HISTORY](account-usage/application_daily_usage_history) |Historical |24 hours | |Data retained for 1 year. |\n|[APPLICATION\\_SPECIFICATION\\_STATUS\\_HISTORY](account-usage/application_specification_status_history) |Historical |1 hour | |Data retained for 1 year. |\n|[APPLICATION\\_SPECIFICATIONS](account-usage/application_specifications) |Historical |1 hour | |Data for deleted app specifications is retained for 1 year. |\n|[ARCHIVE\\_STORAGE\\_DATA\\_RETRIEVAL\\_USAGE\\_HISTORY](account-usage/archive_storage_data_retrieval_usage_history) |Historical |1 hour | |Data retained for 1 year. |\n|[AUTOMATIC\\_CLUSTERING\\_HISTORY](account-usage/automatic_clustering_history) |Historical |3 hours | |Data retained for 1 year. |\n|[BACKUP\\_OPERATION\\_HISTORY](account-usage/backup_operation_history) |Historical |6 hours | |Data retained for 1 year. |\n|[BACKUP\\_POLICIES](account-usage/backup_policies) |Object |6 hours | | |\n|[BACKUP\\_SETS](account-usage/backup_sets) |Object |6 hours | | |\n|[BACKUP\\_STORAGE\\_USAGE](account-usage/backup_storage_usage) |Historical |6 hours | |Data retained for 1 year. |\n|[BACKUPS](account-usage/backups) |Object |6 hours | | |\n|[BLOCK\\_STORAGE\\_HISTORY](account-usage/block_storage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[BLOCK\\_STORAGE\\_SNAPSHOTS](account-usage/block_storage_snapshots) |Object |3 hours | | |\n|[CATALOG\\_LINKED\\_DATABASE\\_USAGE\\_HISTORY](account-usage/catalog_linked_database_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[CLASS\\_INSTANCES](account-usage/class_instances) |Object |3 hours | |Data retained for 1 year. |\n|[CLASSES](account-usage/classes) |Object |3 hours | |Data retained for 1 year. |\n|[COLUMN\\_QUERY\\_PRUNING\\_HISTORY](account-usage/column_query_pruning_history) |Historical |4 hours | |Data retained for 1 year. |\n|[COLUMNS](account-usage/columns) |Object |90 minutes | | |\n|[COMPLETE\\_TASK\\_GRAPHS](account-usage/complete_task_graphs) |Historical |45 minutes | |Data retained for 1 year. |\n|[COMPUTE\\_POOLS](account-usage/compute_pools) |Historical |3 hours | |Data retained for 1 year. |\n|[CONTACT\\_REFERENCES](account-usage/contact_references) |Object |3 hours | | |\n|[CONTACTS](account-usage/contacts) |Object |3 hours | | |\n|[COPY\\_FILES\\_HISTORY](account-usage/copy_files_history) |Historical | | |Data retained for 1 year. |\n|[COPY\\_HISTORY](account-usage/copy_history) |Historical |2 hours <sup>[2]</sup> | |Data retained for 1 year. |\n|[CORTEX\\_AISQL\\_USAGE\\_HISTORY](account-usage/cortex_aisql_usage_history) |Historical | | |Data retained for 1 year. |\n|[CORTEX\\_ANALYST\\_USAGE\\_HISTORY](account-usage/cortex_analyst_usage_history) |Historical |One hour | |Data retained for 1 year. |\n|[CORTEX\\_DOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY](account-usage/cortex_document_processing_usage_history) |Historical |1 hour | |Data retained for 1 year. |\n|[CORTEX\\_FINE\\_TUNING\\_USAGE\\_HISTORY](account-usage/cortex_fine_tuning_usage_history) |Historical |1 hour | |Data retained for 1 year. |\n|[CORTEX\\_FUNCTIONS\\_QUERY\\_USAGE\\_HISTORY](account-usage/cortex_functions_query_usage_history) |Historical | | |Data retained for 1 year. |\n|[CORTEX\\_FUNCTIONS\\_USAGE\\_HISTORY](account-usage/cortex_functions_usage_history) |Historical | | |Data retained for 1 year. |\n|[CORTEX\\_PROVISIONED\\_THROUGHPUT\\_USAGE\\_HISTORY](account-usage/cortex_provisioned_throughput_usage_history) |Historical | | |Data retained for 1 year. |\n|[CORTEX\\_REST\\_API\\_USAGE\\_HISTORY](account-usage/cortex_rest_api_usage_history) |Historical | | |Data retained for 1 year. |\n|[CORTEX\\_SEARCH\\_DAILY\\_USAGE\\_HISTORY](account-usage/cortex_search_daily_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[CORTEX\\_SEARCH\\_SERVING\\_USAGE\\_HISTORY](account-usage/cortex_search_serving_usage_history) |Historical |1 hour | |Data retained for 1 year. |\n|[CREDENTIALS](account-usage/credentials) |Object |2 hours | | |\n|[DATA\\_CLASSIFICATION\\_LATEST](account-usage/data_classification_latest) |Object |3 hours |Enterprise Edition (or higher) |Data retained for as long as the table exists. |\n|[DATA\\_METRIC\\_FUNCTION\\_EXPECTATIONS](account-usage/data_metric_function_expectations) |Object |30 minutes |Enterprise Edition (or higher) | |\n|[DATA\\_METRIC\\_FUNCTION\\_REFERENCES](account-usage/data_metric_function_references) |Object |3 hours |Enterprise Edition (or higher) | |\n|[DATA\\_QUALITY\\_MONITORING\\_USAGE\\_HISTORY](account-usage/data_quality_monitoring_usage_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[DATABASES](account-usage/databases) |Object |3 hours | | |\n|[DATABASE\\_REPLICATION\\_USAGE\\_HISTORY](account-usage/database_replication_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[DATABASE\\_STORAGE\\_USAGE\\_HISTORY](account-usage/database_storage_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[DATA\\_TRANSFER\\_HISTORY](account-usage/data_transfer_history) |Historical |2 hours | |Data retained for 1 year. |\n|[DOCUMENT\\_AI\\_USAGE\\_HISTORY](account-usage/document_ai_usage_history) |Historical | | |Data retained for 1 year. |\n|[DYNAMIC\\_TABLE\\_REFRESH\\_HISTORY](account-usage/dynamic_table_refresh_history) |Historical |3 hours | |Data retained for 1 year. |\n|[ELEMENT\\_TYPES](account-usage/element_types) |Object |90 minutes | | |\n|[EVENT\\_USAGE\\_HISTORY](account-usage/event_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[EXTERNAL\\_ACCESS\\_HISTORY](account-usage/external_access_history) |Historical |2 hours | |Data retained for 1 year. |\n|[FIELDS](account-usage/fields) |Object |90 minutes | | |\n|[FILE\\_FORMATS](account-usage/file_formats) |Object |2 hours | | |\n|[FUNCTIONS](account-usage/functions) |Object |2 hours | | |\n|[GRANTS\\_TO\\_ROLES](account-usage/grants_to_roles) |Object |2 hours | | |\n|[GRANTS\\_TO\\_SHARES](account-usage/grants_to_shares) |Object |3 hours | | |\n|[GRANTS\\_TO\\_USERS](account-usage/grants_to_users) |Object |2 hours | | |\n|[HYBRID\\_TABLES](account-usage/hybrid_tables) |Object |3 hours | | |\n|[HYBRID\\_TABLE\\_USAGE\\_HISTORY](account-usage/hybrid_table_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[ICEBERG\\_STORAGE\\_OPTIMIZATION\\_HISTORY](account-usage/iceberg_storage_optimization_history) |Historical |2 hours | |Data retained for 1 year. |\n|[INDEX\\_COLUMNS](account-usage/index_columns) |Object |3 hours | | |\n|[INDEXES](account-usage/indexes) |Object |3 hours | | |\n|[INGRESS\\_NETWORK\\_ACCESS\\_HISTORY](account-usage/ingress_network_access_history) |Historical |4 hours | |Data retained for 1 year. |\n|[INTERNAL\\_DATA\\_TRANSFER\\_HISTORY](account-usage/internal_data_transfer_history) |Historical |3 hours | | |\n|[INTERNAL\\_STAGE\\_NETWORK\\_ACCESS\\_HISTORY](account-usage/internal_stage_network_access_history) |Historical |6 hours | |Data retained for 1 year. |\n|[JOIN\\_POLICIES](account-usage/join_policies) |Object |2 hours | | |\n|[LISTINGS](account-usage/listings) |Object |3 hours | | |\n|[LOAD\\_HISTORY](account-usage/load_history) |Historical |90 minutes <sup>[2]</sup> | |Data retained for 1 year. |\n|[LOCK\\_WAIT\\_HISTORY](account-usage/lock_wait_history) |Historical |3 hours | |Data retained for 1 year. |\n|[LOGIN\\_HISTORY](account-usage/login_history) |Historical |2 hours | |Data retained for 1 year. |\n|[MASKING\\_POLICIES](account-usage/masking_policies) |Object |2 hours | | |\n|[MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY](account-usage/materialized_view_refresh_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[METERING\\_DAILY\\_HISTORY](account-usage/metering_daily_history) |Historical |3 hours | |Data retained for 1 year. |\n|[METERING\\_HISTORY](account-usage/metering_history) |Historical |3 hours | |Data retained for 1 year. |\n|[NETWORK\\_POLICIES](account-usage/network_policies) |Object |2 hours | | |\n|[NETWORK\\_RULE\\_REFERENCES](account-usage/network_rule_references) |Object |2 hours | | |\n|[NETWORK\\_RULES](account-usage/network_rules) |Object |2 hours | | |\n|[NOTEBOOKS\\_CONTAINER\\_RUNTIME\\_HISTORY](account-usage/notebooks_container_runtime_history) |Historical |3 hours | | |\n|[OBJECT\\_ACCESS\\_REQUEST\\_HISTORY](account-usage/object_access_request_history) |Historical |3 hours | | |\n|[OBJECT\\_DEPENDENCIES](account-usage/object_dependencies) |Historical |3 hours | | |\n|[ONLINE\\_FEATURE\\_TABLE\\_REFRESH\\_HISTORY](account-usage/online_feature_table_refresh_history) |Historical |3 hours | | |\n|[OPENFLOW\\_USAGE\\_HISTORY](account-usage/openflow_usage_history) |Historical |3 hours | | |\n|[OUTBOUND\\_PRIVATELINK\\_ENDPOINTS](account-usage/outbound_privatelink_endpoints) |Object |2 hours |Business Critical (or higher) |Data for deleted endpoints is retained for 1 year. |\n|[PASSWORD\\_POLICIES](account-usage/password_policies) |Object |2 hours | | |\n|[PIPES](account-usage/pipes) |Object |2 hours | | |\n|[PIPE\\_USAGE\\_HISTORY](account-usage/pipe_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[POLICY\\_REFERENCES](account-usage/policy_references) |Object |2 hours | | |\n|[POSTGRES\\_STORAGE\\_USAGE\\_HISTORY](account-usage/postgres_storage_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[PRIVACY\\_BUDGETS](account-usage/privacy_budgets) |Object |24 hours |Enterprise Edition (or higher) | |\n|[PRIVACY\\_POLICIES](account-usage/privacy_policies) |Object |2 hours |Enterprise Edition (or higher) | |\n|[PROCEDURES](account-usage/procedures) |Object |2 hours | | |\n|[PROJECTION\\_POLICIES](account-usage/projection_policies) |Object |2 hours | | |\n|[QUERY\\_ACCELERATION\\_ELIGIBLE](account-usage/query_acceleration_eligible) |Historical |3 hours | |Data retained for 1 year. |\n|[QUERY\\_ACCELERATION\\_HISTORY](account-usage/query_acceleration_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[QUERY\\_ATTRIBUTION\\_HISTORY](account-usage/query_attribution_history) |Historical |8 hours | |Data retained for 1 year. |\n|[QUERY\\_HISTORY](account-usage/query_history) |Historical |45 minutes | |Data retained for 1 year. |\n|[QUERY\\_INSIGHTS](account-usage/query_insights) |Historical | | |Data retained for 1 year. |\n|[REFERENTIAL\\_CONSTRAINTS](account-usage/referential_constraints) |Object |2 hours | | |\n|[REPLICATION\\_GROUP\\_REFRESH\\_HISTORY](account-usage/replication_group_refresh_history) |Historical |3 hours | |Data retained for 1 year. |\n|[REPLICATION\\_GROUP\\_USAGE\\_HISTORY](account-usage/replication_group_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[REPLICATION\\_GROUPS](account-usage/replication_groups) |Object |2 hours | | |\n|[REPLICATION\\_USAGE\\_HISTORY](account-usage/replication_usage_history) |Historical |3 hours | |Data retained for 1 year. |\n|[RESOURCE\\_MONITORS](account-usage/resource_monitors) |Object |2 hours | | |\n|[ROLES](account-usage/roles) |Object |2 hours | | |\n|[ROW\\_ACCESS\\_POLICIES](account-usage/row_access_policies) |Object |2 hours | | |\n|[SCHEMATA](account-usage/schemata) |Object |2 hours | | |\n|[SEARCH\\_OPTIMIZATION\\_BENEFITS](account-usage/search_optimization_benefits) |Historical |6 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[SEARCH\\_OPTIMIZATION\\_HISTORY](account-usage/search_optimization_history) |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|[SECRETS](account-usage/secrets) |Object |2 hours | | |\n|[SEMANTIC\\_DIMENSIONS](account-usage/semantic_dimensions) |Object |2 hours | | |\n|[SEMANTIC\\_FACTS](account-usage/semantic_facts) |Object |2 hours | | |\n|[SEMANTIC\\_METRICS](account-usage/semantic_metrics) |Object |2 hours | | |\n|[SEMANTIC\\_RELATIONSHIPS](account-usage/semantic_relationships) |Object |2 hours | | |\n|[SEMANTIC\\_TABLES](account-usage/semantic_tables) |Object |2 hours | | |\n|[SEMANTIC\\_VIEWS](account-usage/semantic_views) |Object |2 hours | | |\n|[SEQUENCES](account-usage/sequences) |Object |2 hours | | |\n|[SERVERLESS\\_ALERT\\_HISTORY](account-usage/serverless_alert_history) |Historical |3 hours | |Data retained for 1 year. |\n|[SERVERLESS\\_TASK\\_HISTORY](account-usage/serverless_task_history) |Historical |3 hours | |Data retained for 1 year. |\n|[SERVICES](account-usage/services) |Object |3 hours | | |\n|[SESSION\\_POLICIES](account-usage/session_policies) |Object |2 hours | | |\n|[SESSIONS](account-usage/sessions) |Historical |3 hours | |Data retained for 1 year. |\n|[SHARES](account-usage/shares) |Object |3 hours | | |\n|[SNAPSHOT\\_OPERATION\\_HISTORY](account-usage/snapshot_operation_history) |Historical |6 hours | |Data retained for 1 year. This view is deprecated. Use the [BACKUP\\_OPERATION\\_HISTORY](account-usage/backup_operation_history) view instead. |\n|[SNAPSHOT\\_POLICIES](account-usage/snapshot_policies) |Object |6 hours | |This view is deprecated. Use the [BACKUP\\_POLICIES](account-usage/backup_policies) view instead. |\n|[SNAPSHOT\\_SETS](account-usage/snapshot_sets) |Object |6 hours | |This view is deprecated. Use the [BACKUP\\_SETS](account-usage/backup_sets) view instead. |\n|[SNAPSHOT\\_STORAGE\\_USAGE](account-usage/snapshot_storage_usage) |Historical |6 hours | |Data retained for 1 year. This view is deprecated. Use the [BACKUP\\_STORAGE\\_USAGE](account-usage/backup_storage_usage) view instead. |\n|[SNAPSHOTS](account-usage/snapshots) |Object |6 hours | |This view is deprecated. Use the [BACKUPS](account-usage/backups) view instead. |\n|[SNOWPARK\\_CONTAINER\\_SERVICES\\_HISTORY](account-usage/snowpark_container_services_history) |Historical |3 hour | |Data retained for 1 year. |\n|[SNOWPIPE\\_STREAMING\\_CHANNEL\\_HISTORY](account-usage/snowpipe_streaming_channel_history) |Historical | | | |\n|[SNOWPIPE\\_STREAMING\\_CLIENT\\_HISTORY](account-usage/snowpipe_streaming_client_history) |Historical |2 hours | |Data retained for 1 year. |\n|[SNOWPIPE\\_STREAMING\\_FILE\\_MIGRATION\\_HISTORY](account-usage/snowpipe_streaming_file_migration_history) |Historical |12 hours | |Data retained for 1 year. |\n|[STAGES](account-usage/stages) |Object |2 hours | | |\n|[STAGE\\_STORAGE\\_USAGE\\_HISTORY](account-usage/stage_storage_usage_history) |Historical |2 hours | |Data retained for 1 year. |\n|[STORAGE\\_LIFECYCLE\\_POLICIES](account-usage/storage_lifecycle_policies) |Object |2 hours | | |\n|[STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY](account-usage/storage_lifecycle_policy_history) |Historical |2 hours | |Data retained for 1 year. |\n|[STORAGE\\_USAGE](account-usage/storage_usage) |Historical |2 hours | |Combined usage across all database tables and internal stages. Data retained for 1 year. |\n|[TABLES](account-usage/tables) |Object |90 minutes | | |\n|[TABLE\\_CONSTRAINTS](account-usage/table_constraints) |Object |2 hours | | |\n|[TABLE\\_DML\\_HISTORY](account-usage/table_dml_history) |Historical |6 hours | |Data retained for 1 year. |\n|[TABLE\\_PRUNING\\_HISTORY](account-usage/table_pruning_history) |Historical |6 hours | |Data retained for 1 year. |\n|[TABLE\\_QUERY\\_PRUNING\\_HISTORY](account-usage/table_query_pruning_history) |Historical |4 hours | |Data retained for 1 year. |\n|[TABLE\\_STORAGE\\_METRICS](account-usage/table_storage_metrics) |Object |90 minutes | | |\n|[TAG\\_REFERENCES](account-usage/tag_references) |Object |2 hours | | |\n|[TAGS](account-usage/tags) |Object |2 hours | | |\n|[TASK\\_HISTORY](account-usage/task_history) |Historical |45 minutes | | |\n|[TASK\\_VERSIONS](account-usage/task_versions) |Object |3 hours | | |\n|[TRUST\\_CENTER\\_FINDINGS](account-usage/trust_center_findings) |Historical |1 hour | | |\n|[USERS](account-usage/users) |Object |2 hours | | |\n|[VIEWS](account-usage/views) |Object |90 minutes | | |\n|[WAREHOUSE\\_EVENTS\\_HISTORY](account-usage/warehouse_events_history) |Historical |3 hours | |Data retained for 1 year. |\n|[WAREHOUSE\\_LOAD\\_HISTORY](account-usage/warehouse_load_history) |Historical |3 hours | |Data retained for 1 year. |\n|[WAREHOUSE\\_METERING\\_HISTORY](account-usage/warehouse_metering_history) |Historical |3 hours | |Data retained for 1 year. |\n\n\n<sub>[1] All latency times are approximate; in some instances, the actual latency may be lower.</sub>\n\n<sub>[2] The latency of the views for a given table may be up to 2 days if both of the following conditions are true: 1. Fewer than 32 DML statements have been added to the given table since it was last updated in LOAD\\_HISTORY or COPY\\_HISTORY. 2. Fewer than 100 rows have been added to the given table since it was last updated in LOAD\\_HISTORY or COPY\\_HISTORY.</sub>\n\n<sub>[3] Unless otherwise noted, the Account Usage view is available to all accounts.</sub>\n\n### Account Usage table functions [¶]( \"Link to this heading\")\n\nCurrently, Snowflake supports one ACCOUNT\\_USAGE table function:\n\n|Table Function |Data Retention |Notes |\n| --- | --- | --- |\n|[TAG\\_REFERENCES\\_WITH\\_LINEAGE](functions/tag_references_with_lineage) |N/A |Results are only returned for the role that has access to the specified object. |\n\n\nNote\n\nSimilar to the Account Usage views, please account for latency when calling this table function. The expected latency for this table\nfunction is similar to the latency for the [TAG\\_REFERENCES]() view.\n\n## READER\\_ACCOUNT\\_USAGE views [¶]( \"Link to this heading\")\n\nThe READER\\_ACCOUNT\\_USAGE schema contains the following views:\n\n|View |Type |Latency <sup>[1]</sup> |Notes |\n| --- | --- | --- | --- |\n|[LOGIN\\_HISTORY](account-usage/login_history) |Historical |2 hours |Data retained for 1 year. |\n|[QUERY\\_HISTORY](account-usage/query_history) |Historical |45 minutes |Data retained for 1 year. |\n|[RESOURCE\\_MONITORS](account-usage/resource_monitors) |Object |2 hours | |\n|[STORAGE\\_USAGE](account-usage/storage_usage) |Historical |24 hours |Combined usage across all database tables and internal stages. Data retained for 1 year. |\n|[WAREHOUSE\\_METERING\\_HISTORY](account-usage/warehouse_metering_history) |Historical |24 hours |Data retained for 1 year. |\n\n\n<sub>[1] All latency times are approximate; in some instances, the actual latency may be lower.</sub>\n\n## Enabling other roles to use schemas in the SNOWFLAKE database [¶]( \"Link to this heading\")\n\nBy default, the SNOWFLAKE database is visible to all users; however, access to schemas in this database can be granted by a user with the\nACCOUNTADMIN role using either of the following approaches:\n\n* Grant IMPORTED PRIVILEGES on the SNOWFLAKE database.\n* Grant a [SNOWFLAKE database role]() to an account role.\n\nImportant\n\nTo avoid unintentionally granting access to organization-level data, consider using [SNOWFLAKE database roles]() to grant access to views in the ACCOUNT\\_USAGE schema.\n\nFor more information, refer to [GRANT DATABASE ROLE](sql/grant-database-role) .\n\nFor example, to grant IMPORTED PRIVILEGES on the SNOWFLAKE database to two additional roles:\n\n> ```\n> USE ROLE ACCOUNTADMIN ; \n> \n>  GRANT IMPORTED PRIVILEGES ON DATABASE SNOWFLAKE TO ROLE SYSADMIN ; \n>  GRANT IMPORTED PRIVILEGES ON DATABASE SNOWFLAKE TO ROLE customrole1 ;\n> ```\n> \n> Copy\n> \n> \n\nA user with that is granted the `customrole1` role can query a view as follows:\n\n> ```\n> USE ROLE customrole1 ; \n> \n>  SELECT database_name , database_owner FROM SNOWFLAKE . ACCOUNT_USAGE . DATABASES ;\n> ```\n> \n> Copy\n> \n> \n\nFor additional examples, see [Querying the Account Usage views]() .\n\n### ACCOUNT\\_ USAGE schema SNOWFLAKE database roles [¶]( \"Link to this heading\")\n\nIn addition, you can grant finer control to accounts using SNOWFLAKE Database roles.\nFor more information on database roles, see [database roles](../user-guide/security-access-control-considerations.html) .\n\n[ACCOUNT\\_USAGE](#) schemas have four defined SNOWFLAKE database roles, each granted the SELECT privilege on specific views.\n\n|Role |Purpose and Description |\n| --- | --- |\n|OBJECT\\_VIEWER |The OBJECT\\_VIEWER role provides visibility into object metadata. |\n|USAGE\\_VIEWER |The USAGE\\_VIEWER role provides visibility into historical usage information. |\n|GOVERNANCE\\_VIEWER |The GOVERNANCE\\_VIEWER role provides visibility into data governance related information. |\n|SECURITY\\_VIEWER |The SECURITY\\_VIEWER role provides visibility into security based information. |\n\n### Database role required to access ACCOUNT\\_ USAGE views [¶]( \"Link to this heading\")\n\nThe OBJECT\\_VIEWER, USAGE\\_VIEWER, GOVERNANCE\\_VIEWER, and SECURITY\\_VIEWER roles have the SELECT privilege to query Account Usage\nviews in the shared SNOWFLAKE database. Use the following table to determine which database role has access to a view.\n\n|View |Database Role |\n| --- | --- |\n|[ACCESS\\_HISTORY view](account-usage/access_history) |GOVERNANCE\\_VIEWER |\n|[AGGREGATE\\_ACCESS\\_HISTORY view](account-usage/aggregate_access_history) |GOVERNANCE\\_VIEWER |\n|[AGGREGATE\\_QUERY\\_HISTORY view](account-usage/aggregate_query_history) |GOVERNANCE\\_VIEWER |\n|[AGGREGATION\\_POLICIES view](account-usage/aggregation_policies) |GOVERNANCE\\_VIEWER |\n|[ANOMALIES\\_DAILY view](account-usage/anomalies_daily) |USAGE\\_VIEWER |\n|[APPLICATION\\_DAILY\\_USAGE\\_HISTORY view](account-usage/application_daily_usage_history) |USAGE\\_VIEWER |\n|[APPLICATION\\_SPECIFICATION\\_STATUS\\_HISTORY view](account-usage/application_specification_status_history) |SECURITY\\_VIEWER |\n|[APPLICATION\\_SPECIFICATIONS view](account-usage/application_specifications) |SECURITY\\_VIEWER |\n|[ARCHIVE\\_STORAGE\\_DATA\\_RETRIEVAL\\_USAGE\\_HISTORY view](account-usage/archive_storage_data_retrieval_usage_history) |USAGE\\_VIEWER |\n|[AUTOMATIC\\_CLUSTERING\\_HISTORY view](account-usage/automatic_clustering_history) |USAGE\\_VIEWER |\n|[BLOCK\\_STORAGE\\_HISTORY view](account-usage/block_storage_history) |USAGE\\_VIEWER |\n|[BLOCK\\_STORAGE\\_SNAPSHOTS view](account-usage/block_storage_snapshots) |OBJECT\\_VIEWER |\n|[CATALOG\\_LINKED\\_DATABASE\\_USAGE\\_HISTORY view](account-usage/catalog_linked_database_usage_history) |USAGE\\_VIEWER |\n|[CLASS\\_INSTANCES view](account-usage/class_instances) |USAGE\\_VIEWER |\n|[CLASSES view](account-usage/classes) |USAGE\\_VIEWER |\n|[COLUMN\\_QUERY\\_PRUNING\\_HISTORY view](account-usage/column_query_pruning_history) |USAGE\\_VIEWER |\n|[COLUMNS view](account-usage/columns) |OBJECT\\_VIEWER |\n|[COMPLETE\\_TASK\\_GRAPHS view](account-usage/complete_task_graphs) |OBJECT\\_VIEWER |\n|[CONTACT\\_REFERENCES view](account-usage/contact_references) |GOVERNANCE\\_VIEWER |\n|[CONTACTS view](account-usage/contacts) |GOVERNANCE\\_VIEWER |\n|[COPY\\_FILES\\_HISTORY view](account-usage/copy_files_history) |USAGE\\_VIEWER |\n|[COPY\\_HISTORY view](account-usage/copy_history) |USAGE\\_VIEWER |\n|[CORTEX\\_AISQL\\_USAGE\\_HISTORY view](account-usage/cortex_aisql_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_ANALYST\\_USAGE\\_HISTORY view](account-usage/cortex_analyst_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_DOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY view](account-usage/cortex_document_processing_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_FINE\\_TUNING\\_USAGE\\_HISTORY view](account-usage/cortex_fine_tuning_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_FUNCTIONS\\_QUERY\\_USAGE\\_HISTORY view](account-usage/cortex_functions_query_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_FUNCTIONS\\_USAGE\\_HISTORY view](account-usage/cortex_functions_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_SEARCH\\_DAILY\\_USAGE\\_HISTORY view](account-usage/cortex_search_daily_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_PROVISIONED\\_THROUGHPUT\\_USAGE\\_HISTORY view](account-usage/cortex_provisioned_throughput_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_REST\\_API\\_USAGE\\_HISTORY view](account-usage/cortex_rest_api_usage_history) |USAGE\\_VIEWER |\n|[CORTEX\\_SEARCH\\_SERVING\\_USAGE\\_HISTORY view](account-usage/cortex_search_serving_usage_history) |USAGE\\_VIEWER |\n|[CREDENTIALS view](account-usage/credentials) |SECURITY\\_VIEWER |\n|[DATA\\_CLASSIFICATION\\_LATEST view](account-usage/data_classification_latest) |GOVERNANCE\\_VIEWER |\n|[DATA\\_METRIC\\_FUNCTION\\_EXPECTATIONS view](account-usage/data_metric_function_expectations) |USAGE\\_VIEWER or GOVERNANCE\\_VIEWER |\n|[DATA\\_METRIC\\_FUNCTION\\_REFERENCES view](account-usage/data_metric_function_references) |USAGE\\_VIEWER or GOVERNANCE\\_VIEWER |\n|[DATA\\_QUALITY\\_MONITORING\\_USAGE\\_HISTORY view](account-usage/data_quality_monitoring_usage_history) |USAGE\\_VIEWER |\n|[DATA\\_TRANSFER\\_HISTORY view](account-usage/data_transfer_history) |USAGE\\_VIEWER |\n|[DATABASE\\_STORAGE\\_USAGE\\_HISTORY view](account-usage/database_storage_usage_history) |USAGE\\_VIEWER |\n|[DATABASES view](account-usage/databases) |OBJECT\\_VIEWER |\n|[DOCUMENT\\_AI\\_USAGE\\_HISTORY view](account-usage/document_ai_usage_history) |USAGE\\_VIEWER |\n|[DYNAMIC\\_TABLE\\_REFRESH\\_HISTORY view](account-usage/dynamic_table_refresh_history) |USAGE\\_VIEWER |\n|[ELEMENT\\_TYPES view](account-usage/element_types) |OBJECT\\_VIEWER |\n|[EVENT\\_USAGE\\_HISTORY view](account-usage/event_usage_history) |USAGE\\_VIEWER |\n|[EXTERNAL\\_ACCESS\\_HISTORY view](account-usage/external_access_history) |USAGE\\_VIEWER |\n|[FIELDS view](account-usage/fields) |OBJECT\\_VIEWER |\n|[FILE\\_FORMATS view](account-usage/file_formats) |OBJECT\\_VIEWER |\n|[FUNCTIONS view](account-usage/functions) |OBJECT\\_VIEWER |\n|[GRANTS\\_TO\\_ROLES view](account-usage/grants_to_roles) |SECURITY\\_VIEWER |\n|[GRANTS\\_TO\\_SHARES view](account-usage/grants_to_shares) |SECURITY\\_VIEWER |\n|[GRANTS\\_TO\\_USERS view](account-usage/grants_to_users) |SECURITY\\_VIEWER |\n|[HYBRID\\_TABLE\\_USAGE\\_HISTORY view](account-usage/hybrid_table_usage_history) |USAGE\\_VIEWER |\n|[HYBRID\\_TABLES view](account-usage/hybrid_tables) |OBJECT\\_VIEWER |\n|[ICEBERG\\_STORAGE\\_OPTIMIZATION\\_HISTORY view](account-usage/iceberg_storage_optimization_history) |USAGE\\_VIEWER |\n|[INDEX\\_COLUMNS view](account-usage/index_columns) |OBJECT\\_VIEWER |\n|[INDEXES view](account-usage/indexes) |OBJECT\\_VIEWER |\n|[INGRESS\\_NETWORK\\_ACCESS\\_HISTORY view](account-usage/ingress_network_access_history) |SECURITY\\_VIEWER |\n|[INTERNAL\\_DATA\\_TRANSFER\\_HISTORY view](account-usage/internal_data_transfer_history) |USAGE\\_VIEWER |\n|[INTERNAL\\_STAGE\\_NETWORK\\_ACCESS\\_HISTORY view](account-usage/internal_stage_network_access_history) |SECURITY\\_VIEWER |\n|[JOIN\\_POLICIES view](account-usage/join_policies) |GOVERNANCE\\_VIEWER |\n|[LISTINGS view](account-usage/listings) |SECURITY\\_VIEWER |\n|[LOAD\\_HISTORY view](account-usage/load_history) |USAGE\\_VIEWER |\n|[LOGIN\\_HISTORY view](account-usage/login_history) |SECURITY\\_VIEWER |\n|[MASKING\\_POLICIES view](account-usage/masking_policies) |GOVERNANCE\\_VIEWER |\n|[MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY view](account-usage/materialized_view_refresh_history) |USAGE\\_VIEWER |\n|[METERING\\_DAILY\\_HISTORY view](account-usage/metering_daily_history) |USAGE\\_VIEWER |\n|[METERING\\_HISTORY view](account-usage/metering_history) |USAGE\\_VIEWER |\n|[NETWORK\\_POLICIES view](account-usage/network_policies) |SECURITY\\_VIEWER |\n|[NETWORK\\_RULE\\_REFERENCES view](account-usage/network_rule_references) |SECURITY\\_VIEWER |\n|[NETWORK\\_RULES view](account-usage/network_rules) |SECURITY\\_VIEWER |\n|[NOTEBOOKS\\_CONTAINER\\_RUNTIME\\_HISTORY view](account-usage/notebooks_container_runtime_history) |USAGE\\_VIEWER |\n|[OBJECT\\_ACCESS\\_REQUEST\\_HISTORY view](account-usage/object_access_request_history) |OBJECT\\_VIEWER |\n|[OBJECT\\_DEPENDENCIES view](account-usage/object_dependencies) |OBJECT\\_VIEWER |\n|[ACCOUNT\\_USAGE.ONLINE\\_FEATURE\\_TABLE\\_REFRESH\\_HISTORY](account-usage/online_feature_table_refresh_history) |USAGE\\_VIEWER |\n|[OPENFLOW\\_USAGE\\_HISTORY view](account-usage/openflow_usage_history) |USAGE\\_VIEWER |\n|[OUTBOUND\\_PRIVATELINK\\_ENDPOINTS view](account-usage/outbound_privatelink_endpoints) |SECURITY\\_VIEWER |\n|[PASSWORD\\_POLICIES view](account-usage/password_policies) |SECURITY\\_VIEWER |\n|[PIPE\\_USAGE\\_HISTORY view](account-usage/pipe_usage_history) |USAGE\\_VIEWER |\n|[PIPES view](account-usage/pipes) |OBJECT\\_VIEWER |\n|[POLICY\\_REFERENCES view](account-usage/policy_references) |GOVERNANCE\\_VIEWER, SECURITY\\_VIEWER |\n|[POSTGRES\\_STORAGE\\_USAGE\\_HISTORY view](account-usage/postgres_storage_usage_history) |USAGE\\_VIEWER |\n|[PRIVACY\\_BUDGETS view](account-usage/privacy_budgets) |GOVERNANCE\\_VIEWER |\n|[PRIVACY\\_POLICIES view](account-usage/privacy_policies) |GOVERNANCE\\_VIEWER |\n|[PROCEDURES view](account-usage/procedures) |OBJECT\\_VIEWER |\n|[PROJECTION\\_POLICIES view](account-usage/projection_policies) |GOVERNANCE\\_VIEWER |\n|[QUERY\\_ACCELERATION\\_ELIGIBLE view](account-usage/query_acceleration_eligible) |GOVERNANCE\\_VIEWER |\n|[QUERY\\_ATTRIBUTION\\_HISTORY view](account-usage/query_attribution_history) |USAGE\\_VIEWER, GOVERNANCE\\_VIEWER |\n|[QUERY\\_HISTORY view](account-usage/query_history) |GOVERNANCE\\_VIEWER |\n|[QUERY\\_INSIGHTS view](account-usage/query_insights) |GOVERNANCE\\_VIEWER |\n|[REFERENTIAL\\_CONSTRAINTS view](account-usage/referential_constraints) |OBJECT\\_VIEWER |\n|[REPLICATION\\_GROUP\\_REFRESH\\_HISTORY view](account-usage/replication_group_refresh_history) |USAGE\\_VIEWER |\n|[REPLICATION\\_GROUP\\_USAGE\\_HISTORY view](account-usage/replication_group_usage_history) |USAGE\\_VIEWER |\n|[REPLICATION\\_GROUPS view](account-usage/replication_groups) |OBJECT\\_VIEWER |\n|[REPLICATION\\_USAGE\\_HISTORY view](account-usage/replication_usage_history) |USAGE\\_VIEWER |\n|[RESOURCE\\_MONITORS view](account-usage/resource_monitors) |OBJECT\\_VIEWER |\n|[ROLES view](account-usage/roles) |SECURITY\\_VIEWER |\n|[ROW\\_ACCESS\\_POLICIES view](account-usage/row_access_policies) |GOVERNANCE\\_VIEWER |\n|[SCHEMATA view](account-usage/schemata) |OBJECT\\_VIEWER |\n|[SEARCH\\_OPTIMIZATION\\_BENEFITS view](account-usage/search_optimization_benefits) |USAGE\\_VIEWER |\n|[SEARCH\\_OPTIMIZATION\\_HISTORY view](account-usage/search_optimization_history) |USAGE\\_VIEWER |\n|[SECRETS view](account-usage/secrets) |SECURITY\\_VIEWER |\n|[SEMANTIC\\_DIMENSIONS view](account-usage/semantic_dimensions) |OBJECT\\_VIEWER |\n|[SEMANTIC\\_FACTS view](account-usage/semantic_facts) |OBJECT\\_VIEWER |\n|[SEMANTIC\\_METRICS view](account-usage/semantic_metrics) |OBJECT\\_VIEWER |\n|[SEMANTIC\\_RELATIONSHIPS view](account-usage/semantic_relationships) |OBJECT\\_VIEWER |\n|[SEMANTIC\\_TABLES view](account-usage/semantic_tables) |OBJECT\\_VIEWER |\n|[SEMANTIC\\_VIEWS view](account-usage/semantic_views) |OBJECT\\_VIEWER |\n|[SEQUENCES view](account-usage/sequences) |OBJECT\\_VIEWER |\n|[SERVERLESS\\_ALERT\\_HISTORY view](account-usage/serverless_alert_history) |USAGE\\_VIEWER |\n|[SERVERLESS\\_TASK\\_HISTORY view](account-usage/serverless_task_history) |USAGE\\_VIEWER |\n|[SERVICES view](account-usage/services) |OBJECT\\_VIEWER |\n|[SESSION\\_POLICIES view](account-usage/session_policies) |SECURITY\\_VIEWER |\n|[SESSIONS view](account-usage/sessions) |SECURITY\\_VIEWER |\n|[SHARES view](account-usage/shares) |SECURITY\\_VIEWER |\n|[SNAPSHOT\\_OPERATION\\_HISTORY view — Deprecated](account-usage/snapshot_operation_history) |OBJECT\\_VIEWER |\n|[SNAPSHOT\\_POLICIES view — Deprecated](account-usage/snapshot_policies) |OBJECT\\_VIEWER |\n|[SNAPSHOT\\_SETS view — Deprecated](account-usage/snapshot_sets) |OBJECT\\_VIEWER |\n|[SNAPSHOT\\_STORAGE\\_USAGE view — Deprecated](account-usage/snapshot_storage_usage) |OBJECT\\_VIEWER |\n|[SNAPSHOTS view — Deprecated](account-usage/snapshots) |OBJECT\\_VIEWER |\n|[SNOWPARK\\_CONTAINER\\_SERVICES\\_HISTORY view](account-usage/snowpark_container_services_history) |USAGE\\_VIEWER |\n|[SNOWPIPE\\_STREAMING\\_CHANNEL\\_HISTORY view](account-usage/snowpipe_streaming_channel_history) |USAGE\\_VIEWER |\n|[STAGE\\_STORAGE\\_USAGE\\_HISTORY view](account-usage/stage_storage_usage_history) |USAGE\\_VIEWER |\n|[STAGES view](account-usage/stages) |OBJECT\\_VIEWER |\n|[STORAGE\\_LIFECYCLE\\_POLICIES view](account-usage/storage_lifecycle_policies) |GOVERNANCE\\_VIEWER |\n|[STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY view](account-usage/storage_lifecycle_policy_history) |GOVERNANCE\\_VIEWER |\n|[STORAGE\\_USAGE view](account-usage/storage_usage) |USAGE\\_VIEWER |\n|[TABLE\\_CONSTRAINTS view](account-usage/table_constraints) |OBJECT\\_VIEWER |\n|[TABLE\\_DML\\_HISTORY view](account-usage/table_dml_history) |USAGE\\_VIEWER |\n|[TABLE\\_PRUNING\\_HISTORY view](account-usage/table_pruning_history) |USAGE\\_VIEWER |\n|[TABLE\\_QUERY\\_PRUNING\\_HISTORY view](account-usage/table_query_pruning_history) |USAGE\\_VIEWER |\n|[TABLE\\_STORAGE\\_METRICS view](account-usage/table_storage_metrics) |USAGE\\_VIEWER |\n|[TABLES view](account-usage/tables) |OBJECT\\_VIEWER |\n|[TAG\\_REFERENCES view](account-usage/tag_references) |GOVERNANCE\\_VIEWER |\n|[TAGS view](account-usage/tags) |OBJECT\\_VIEWER or GOVERNANCE\\_VIEWER |\n|[TASK\\_HISTORY view](account-usage/task_history) |USAGE\\_VIEWER |\n|[TRUST\\_CENTER\\_FINDINGS view](account-usage/trust_center_findings) |SECURITY\\_VIEWER |\n|[USERS view](account-usage/users) |SECURITY\\_VIEWER |\n|[VIEWS view](account-usage/views) |OBJECT\\_VIEWER |\n|[WAREHOUSE\\_EVENTS\\_HISTORY view](account-usage/warehouse_events_history) |USAGE\\_VIEWER |\n|[WAREHOUSE\\_LOAD\\_HISTORY view](account-usage/warehouse_load_history) |USAGE\\_VIEWER |\n|[WAREHOUSE\\_METERING\\_HISTORY view](account-usage/warehouse_metering_history) |USAGE\\_VIEWER |\n\n### READER\\_ ACCOUNT\\_ USAGE schema SNOWFLAKE database roles [¶]( \"Link to this heading\")\n\nThe READER\\_USAGE\\_VIEWER SNOWFLAKE database role is granted SELECT privilege on all READER\\_ACCOUNT\\_USAGE views.\nAs reader accounts are created by clients, the READER\\_USAGE\\_VIEWER role is expected to be granted to those roles used to monitor reader account use.\n\n|View |\n| --- |\n|[LOGIN\\_HISTORY view](account-usage/login_history) |\n|[QUERY\\_HISTORY view](account-usage/query_history) |\n|[RESOURCE\\_MONITORS view](account-usage/resource_monitors) |\n|[STORAGE\\_USAGE view](account-usage/storage_usage) |\n|[WAREHOUSE\\_METERING\\_HISTORY view](account-usage/warehouse_metering_history) |\n\n## Querying the Account Usage views [¶]( \"Link to this heading\")\n\nThis section includes considerations when querying the Account Usage views along with query examples.\n\n### Selecting columns [¶]( \"Link to this heading\")\n\nThe Snowflake-specific views are subject to change. Avoid selecting all columns from these views. Instead, select the columns that you want.\nFor example, if you want the `name` column, use `SELECT name` , rather than `SELECT *` .\n\n### Reconciling cost views [¶]( \"Link to this heading\")\n\nThere are several Account Usage views that contain data related to the cost of compute resources, storage, and data transfers. If you are trying to reconcile these views against a corresponding view in the [ORGANIZATION\\_USAGE schema](organization-usage) , you must first set the timezone of the session to UTC.\n\nFor example, if you are trying to reconcile ACCOUNT\\_USAGE.WAREHOUSE\\_METERING\\_HISTORY to the account’s data in ORGANIZATION\\_USAGE.WAREHOUSE\\_METERING\\_HISTORY, you must run the following command before querying the Account Usage view:\n\n```\nALTER SESSION SET TIMEZONE = UTC ;\n```\n\nCopy\n\n### Examples [¶]( \"Link to this heading\")\n\nThe following examples show some typical/useful queries using the views in the [ACCOUNT\\_USAGE]() schema.\n\nNote\n\n* These examples assume the SNOWFLAKE database and the ACCOUNT\\_USAGE schema are in use for the current session. The examples also\n  assume the ACCOUNTADMIN role (or a role granted IMPORTED PRIVILEGES on the database) is in use. If they are not in use, execute\n  the following commands before running the queries in the examples:\n  \n  ```\n  USE ROLE ACCOUNTADMIN ; \n  \n   USE SCHEMA snowflake . account_usage ;\n  ```\n  \n  Copy\n\n#### Examples: User login metrics [¶]( \"Link to this heading\")\n\nAverage number of seconds between failed login attempts by user (month-to-date):\n\n> ```\n> select user_name , \n>        count (*) as failed_logins , \n>        avg ( seconds_between_login_attempts ) as average_seconds_between_login_attempts \n>  from ( \n>       select user_name , \n>              timediff ( seconds , event_timestamp , lead ( event_timestamp ) \n>                  over ( partition by user_name order by event_timestamp )) as seconds_between_login_attempts \n>       from login_history \n>       where event_timestamp > date_trunc ( month , current_date ) \n>       and is_success = 'NO' \n>      ) \n>  group by 1 \n>  order by 3 ;\n> ```\n> \n> Copy\n> \n> \n\nFailed logins by user (month-to-date):\n\n> ```\n> select user_name , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) as failed_logins , \n>        count (*) as logins , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) / nullif ( count (*), 0 ) as login_failure_rate \n>  from login_history \n>  where event_timestamp > date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 4 desc ;\n> ```\n> \n> Copy\n> \n> \n\nFailed logins by user and connecting client (month-to-date):\n\n> ```\n> select reported_client_type , \n>        user_name , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) as failed_logins , \n>        count (*) as logins , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) / nullif ( count (*), 0 ) as login_failure_rate \n>  from login_history \n>  where event_timestamp > date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 5 desc ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Warehouse performance [¶]( \"Link to this heading\")\n\nThis query calculates virtual warehouse performance metrics such as throughput and latency for 15-minute time intervals over the course of\none day.\n\nIn the code sample below, you can replace `CURRENT_WAREHOUSE()` with the name of a warehouse to calculate metrics for that warehouse. In\naddition, change the `time_from` and `time_to` dates in the WITH clause to specify the time period.\n\n> ```\n> WITH \n>  params AS ( \n>  SELECT \n>     CURRENT_WAREHOUSE () AS warehouse_name , \n>     '2021-11-01' AS time_from , \n>     '2021-11-02' AS time_to \n>  ), \n> \n>  jobs AS ( \n>  SELECT \n>     query_id , \n>     time_slice ( start_time ::timestamp_ntz , 15 , 'minute' , 'start' ) as interval_start , \n>     qh . warehouse_name , \n>     database_name , \n>     query_type , \n>     total_elapsed_time , \n>     compilation_time AS compilation_and_scheduling_time , \n>     ( queued_provisioning_time + queued_repair_time + queued_overload_time ) AS queued_time , \n>     transaction_blocked_time , \n>     execution_time \n>  FROM snowflake . account_usage . query_history qh , params \n>  WHERE \n>     qh . warehouse_name = params . warehouse_name \n>  AND start_time >= params . time_from \n>  AND start_time <= params . time_to \n>  AND execution_status = 'SUCCESS' \n>  AND query_type IN ( 'SELECT' , 'UPDATE' , 'INSERT' , 'MERGE' , 'DELETE' ) \n>  ), \n> \n>  interval_stats AS ( \n>  SELECT \n>     query_type , \n>     interval_start , \n>     COUNT ( DISTINCT query_id ) AS numjobs , \n>     MEDIAN ( total_elapsed_time )/ 1000 AS p50_total_duration , \n>     ( percentile_cont ( 0 . 95 ) within group ( order by total_elapsed_time ))/ 1000 AS p95_total_duration , \n>     SUM ( total_elapsed_time )/ 1000 AS sum_total_duration , \n>     SUM ( compilation_and_scheduling_time )/ 1000 AS sum_compilation_and_scheduling_time , \n>     SUM ( queued_time )/ 1000 AS sum_queued_time , \n>     SUM ( transaction_blocked_time )/ 1000 AS sum_transaction_blocked_time , \n>     SUM ( execution_time )/ 1000 AS sum_execution_time , \n>     ROUND ( sum_compilation_and_scheduling_time / sum_total_duration , 2 ) AS compilation_and_scheduling_ratio , \n>     ROUND ( sum_queued_time / sum_total_duration , 2 ) AS queued_ratio , \n>     ROUND ( sum_transaction_blocked_time / sum_total_duration , 2 ) AS blocked_ratio , \n>     ROUND ( sum_execution_time / sum_total_duration , 2 ) AS execution_ratio , \n>     ROUND ( sum_total_duration / numjobs , 2 ) AS total_duration_perjob , \n>     ROUND ( sum_compilation_and_scheduling_time / numjobs , 2 ) AS compilation_and_scheduling_perjob , \n>     ROUND ( sum_queued_time / numjobs , 2 ) AS queued_perjob , \n>     ROUND ( sum_transaction_blocked_time / numjobs , 2 ) AS blocked_perjob , \n>     ROUND ( sum_execution_time / numjobs , 2 ) AS execution_perjob \n>  FROM jobs \n>  GROUP BY 1 , 2 \n>  ORDER BY 1 , 2 \n>  ) \n>  SELECT * FROM interval_stats ;\n> ```\n> \n> Copy\n> \n> Note\n> \n> Analyze different statement types separately (e.g., SELECT statements independent of INSERT or DELETE or other statements).\n> \n> \n\n* The NUMJOBS value represents the throughput for that time interval.\n* The P50\\_TOTAL\\_DURATION (median) and P95\\_TOTAL\\_DURATION (peak) values represent latency.\n* The SUM\\_TOTAL\\_DURATION is the sum of the SUM\\_<job\\_stage>\\_TIME values for the different job stages (COMPILATION\\_AND\\_SCHEDULING, QUEUED,\n  BLOCKED, EXECUTION).\n* Analyze the <job\\_stage>\\_RATIO values when the load (NUMJOBS) increases. Look for ratio changes or deviations from the average.\n* If the QUEUED\\_RATIO is high, there might not be sufficient capacity in the warehouse. Add more clusters or increase the warehouse size.\n\n#### Examples: Warehouse credit usage [¶]( \"Link to this heading\")\n\nCredits used by each warehouse in your account (month-to-date):\n\n> ```\n> select warehouse_name , \n>        sum ( credits_used ) as total_credits_used \n>  from warehouse_metering_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nCredits used over time by each warehouse in your account (month-to-date):\n\n> ```\n> select start_time ::date as usage_date , \n>        warehouse_name , \n>        sum ( credits_used ) as total_credits_used \n>  from warehouse_metering_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 2 , 1 ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Data storage usage [¶]( \"Link to this heading\")\n\nBillable terabytes stored in your account over time:\n\n> ```\n> select date_trunc ( month , usage_date ) as usage_month \n>   , avg ( storage_bytes + stage_bytes + failsafe_bytes ) / power ( 1024 , 4 ) as billable_tb \n>  from storage_usage \n>  group by 1 \n>  order by 1 ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: User query totals and execution times [¶]( \"Link to this heading\")\n\nTotal jobs executed in your account (month-to-date):\n\n> ```\n> select count (*) as number_of_jobs \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date );\n> ```\n> \n> Copy\n> \n> \n\nTotal jobs executed by each warehouse in your account (month-to-date):\n\n> ```\n> select warehouse_name , \n>        count (*) as number_of_jobs \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nAverage query execution time by user (month-to-date):\n\n> ```\n> select user_name , \n>        avg ( execution_time ) as average_execution_time \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nAverage query execution time by query type and warehouse size (month-to-date):\n\n> ```\n> select query_type , \n>        warehouse_size , \n>        avg ( execution_time ) as average_execution_time \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 3 desc ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Obtain a query count for every login event [¶]( \"Link to this heading\")\n\nJoin columns from LOGIN\\_HISTORY, QUERY\\_HISTORY, and SESSIONS to obtain a query count for each user login event.\n\n> Note\n> \n> The SESSIONS view records information starting on July 20-21, 2020, therefore the query result will only contain overlapping\n> information for each of the three views starting from this date.\n> \n> ```\n> select l . user_name , \n>        l . event_timestamp as login_time , \n>        l . client_ip , \n>        l . reported_client_type , \n>        l . first_authentication_factor , \n>        l . second_authentication_factor , \n>        count ( q . query_id ) \n>  from snowflake . account_usage . login_history l \n>  join snowflake . account_usage . sessions s on l . event_id = s . login_event_id \n>  join snowflake . account_usage . query_history q on q . session_id = s . session_id \n>  group by 1 , 2 , 3 , 4 , 5 , 6 \n>  order by l . user_name \n>  ;\n> ```\n> \n> Copy\n> \n>\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nLanguage: **English**\n\n* [English](/en/sql-reference/account-usage)\n* [Français](/fr/sql-reference/account-usage)\n* [Deutsch](/de/sql-reference/account-usage)\n* [日本語](/ja/sql-reference/account-usage)\n* [한국어](/ko/sql-reference/account-usage)\n* [Português](/pt/sql-reference/account-usage)\n"],"full_content":null},{"url":"https://docs.snowflake.com/en/user-guide/budgets","title":"Monitor credit usage with budgets | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) [Control](/en/user-guide/cost-controlling) Budgets\n\n# Monitor credit usage with budgets [¶]( \"Link to this heading\")\n\nA budget defines a monthly spending limit on the [compute costs](cost-understanding-compute) for\na Snowflake account or a custom group of Snowflake objects. When the spending limit is projected to be exceeded, a notification is\nsent. You can configure the budget to send this notification to a list of email addresses, a queue provided by a cloud service\n(Amazon SNS, Azure Event Grid, or Google Cloud PubSub), or a webhook for a third-party system (for example, Slack, Microsoft\nTeams, or PagerDuty).\n\n## Account budget and custom budgets [¶]( \"Link to this heading\")\n\nThe _account budget_ monitors spending for all credit usage in the account.\n\nYou can also create a _custom budget_ to monitor the spending limits for a specific group of [supported objects](budgets/custom-budget.html) .\n\nFor both types of budgets, you must set up the spending limit and specify how you want to receive notifications.\n\nTo start using budgets in Snowflake, [activate the account budget](budgets/account-budget.html) .\n\n## Spending limit and time interval [¶]( \"Link to this heading\")\n\nThe spending limit is expressed in Snowflake credits and is used for alerting and notifications purposes only. The spending limit\nis set for the time interval of one calendar month.\n\nThe time interval starts at 12:00AM UTC on the first day of the month and ends at 11:59PM UTC on the last day of the month. If a budget\nis created after the first day of the month, the first monitoring interval is the period until the last day of the current month, then\nis reset on the first of the following month.\n\nIf you activate your _account budget_ after the first day of the month, data starting from the beginning of the month is backfilled\nand used to determine if you are going to exceed your spending limit for the month.\n\nIf you create a _custom budget_ after the first day of the month, historical data for the month is only backfilled for resources that were\nadded to the budget using a tag. Data from resources added individually are not backfilled.\n\nNote\n\nIf you create a custom budget and individually add resources to the budget instead of using a tag, consider the following:\n\n* Forecasting for future spend by those resources is based on the credit usage only for the days after the budget is enabled.\n* You might exceed your budget for the first month. Because the data for the resources is not backfilled, the forecasting might be\n  incorrect. Subsequent months will correctly forecast credit usage based on spending history.\n\n## Adjusting the budget refresh interval [¶]( \"Link to this heading\")\n\nA budget cannot calculate whether consumption has reached a spending limit until the budget is refreshed with the most current consumption\ndata. The time period between consumption and the budget’s receipt of information about that consumption is called the\nbudget refresh interval.\n\nBy default, the budget refresh interval is up to 6.5 hours. You can reduce the budget refresh interval to one hour, which can be helpful\nwhen you need to watch spending more carefully. A budget with a one-hour refresh interval is known as a _low latency budget_ . You can\ntemporarily reduce the budget refresh interval to closely monitor consumption, and then set it back to the default to save on costs.\n\nSetting the refresh interval to one hour increases the compute cost of the budget by a factor of 12. For example, if a budget consumes one\ncredit per month when the refresh interval is 6.5 hours, then the budget consumes 12 credits per month when the refresh period is one hour.\nTo determine the current compute cost of your budgets, see [Exploring compute costs](budgets/cost.html) .\n\n* To adjust the budget refresh interval, call the [SET\\_REFRESH\\_TIER](../sql-reference/classes/budget/methods/set_refresh_tier) method.\n  You can also use Snowsight to adjust the interval for a custom budget by selecting or deselecting the Enable low latency budget field.\n* To retrieve the current refresh interval, call the [GET\\_REFRESH\\_TIER](../sql-reference/classes/budget/methods/get_refresh_tier) method.\n\n## Supported services [¶]( \"Link to this heading\")\n\nBudgets monitor credit usage for the following services. Use the table to determine whether custom budgets support the service and which\nobject is associated with the service.\n\nNote\n\nAccount budget support for serverless features depends on the availability of\nservice types in the Account Usage [METERING\\_HISTORY view](../sql-reference/account-usage/metering_history) view.\n\n|Service |Account budget |Custom budget |Object |\n| --- | --- | --- | --- |\n|AI\\_SERVICES |✔ | | |\n|AUTO\\_CLUSTERING |✔ |✔ |Table |\n|COPY\\_FILES |✔ |✔ |Database |\n|DATA\\_QUALITY\\_MONITORING |✔ |✔ |Table |\n|HYBRID\\_TABLE\\_REQUESTS |✔ | | |\n|MATERIALIZED\\_VIEW |✔ |✔ |Materialized view |\n|PIPE |✔ |✔ |Pipe |\n|QUERY\\_ACCELERATION |✔ |✔ |Warehouse |\n|REPLICATION |✔ |✔ |Database, Replication group |\n|SEARCH\\_OPTIMIZATION |✔ |✔ |Table |\n|SERVERLESS\\_ALERTS |✔ |✔ |Alert |\n|SERVERLESS\\_TASK |✔ |✔ |Task |\n|SNOWPARK\\_CONTAINER\\_SERVICES |✔ |✔ |Compute pool |\n|SNOWPIPE\\_STREAMING |✔ |✔ |Table |\n|WAREHOUSE\\_METERING |✔ |✔ |Warehouse |\n\n## Budgets notifications [¶]( \"Link to this heading\")\n\nA budget sends a daily alert notification when current spending is on track to exceed the spending limit based on time-series\nforecasting.\n\nTo receive automatic alert notifications, you must do the following as part of activating the account budget or creating a custom budget:\n\n* Set a spending limit for the budget.\n* Specify how you want to receive notifications about the budget.\n\nFor more information, see [Notifications for budgets](budgets/notifications) .\n\n## Budgets roles and privileges [¶]( \"Link to this heading\")\n\nTo enable a custom role in your account to work with budgets, you can grant the following roles and privileges.\n\nNote\n\nSnowflake provides application roles and database roles that control access to all cost-related features, including budgets. For\ninformation about granting these roles to a custom role rather than working with budget-specific roles and privileges, see [Access control for cost management](cost-access-control) .\n\n### Application roles to manage the account budget [¶]( \"Link to this heading\")\n\nYou can grant the following application roles to a custom role in your account to monitor or manage the account budget:\n\n|Application Role |Description |\n| --- | --- |\n|BUDGET\\_VIEWER |Enables a role to view budget usage data and list the resources in the budget. |\n|BUDGET\\_ADMIN |Enables a role to activate or deactivate the account budget and modify the properties of a budget including spending limit,\nthe notification integrations to use, the list of email addresses to receive notifications, and the mute notifications\nsetting. |\n\n\nIn addition to the application role, there are other required privileges that must be granted to enable a custom role to monitor or manage\nthe account budget. For more information, see [Required roles and privileges]() .\n\n### Instance roles to manage custom budgets [¶]( \"Link to this heading\")\n\nEach custom budget has instance roles that you can grant to other roles to view or modify the budget:\n\n|Instance Role |Description |\n| --- | --- |\n|VIEWER |Enables a role to view budget usage data. |\n|ADMIN |Enables a role to modify the properties of a budget including spending limit, the notification integrations to use, the\nlist of email addresses to receive notifications, the mute notifications setting, and the objects in the group. |\n\n\nIn addition to the instance role, there are other required privileges that must be granted to enable a custom role to create, monitor, or\nmodify a custom budget. For more information, see [Required roles and privileges]() .\n\n### Required roles and privileges [¶]( \"Link to this heading\")\n\nIn addition to the application or instance roles, the following privileges must be granted to a custom role to monitor or manage budgets:\n\n|Privilege or role |Budget type |Create |Manage |Monitor |Notes |\n| --- | --- | --- | --- | --- | --- |\n|USAGE\\_VIEWER |Both |✔ |✔ |✔ |Grant the [Snowflake database role](../sql-reference/snowflake-db-roles) USAGE\\_VIEWER to the custom role. |\n|USAGE |Custom |✔ |✔ |✔ |Grant the USAGE privilege on the database or schema that contains the custom budget. |\n|SNOWFLAKE.BUDGET\\_CREATOR |Custom |✔ | | |Grant this database role to the custom role to enable it to create custom budgets. |\n|CREATE SNOWFLAKE.CORE.BUDGET |Custom |✔ | | |Grant this privilege on the schema that will contain the custom budget. |\n|APPLYBUDGET |Custom | |✔ | |Must be granted on each object to be added or removed from a custom budget. |\n|USAGE |Custom | |✔ | |To add or remove schema objects from a custom budget, this privilege must be granted on the database and schema that contains\nthe object. |\n\n\nFor more information and examples, see the following sections:\n\n* [Create a custom role to manage the account budget](budgets/account-budget.html)\n* [Create a custom role to monitor the account budget](budgets/monitor.html)\n* [Create a custom role to monitor a custom budget](budgets/monitor.html)\n* [Create a custom role to manage a custom budget](budgets/custom-budget.html)\n* [Create a custom role to create budgets](budgets/custom-budget.html)\n\n## Limitations [¶]( \"Link to this heading\")\n\nThe following are limitations for Budgets:\n\n* Instances of the BUDGET class can’t be [replicated](account-replication-intro) to target accounts.\n* An account can contain a maximum of 100 custom budgets.\n* Currently, Budgets does not support monitoring costs for [Hybrid tables](tables-hybrid) .\n* The following account-level parameters must be unset or set to the default value:\n  \n    + [AUTOCOMMIT](../sql-reference/parameters.html) must be unset or set to TRUE.\n        \n        If this parameter is set to FALSE, activating a budget might fail, or usage might not be tracked correctly.\n    + [TIMESTAMP\\_INPUT\\_FORMAT](../sql-reference/parameters.html) and [DATE\\_INPUT\\_FORMAT](../sql-reference/parameters.html) must be unset or set to AUTO.\n        \n        If these parameters aren’t set to AUTO, usage might not be tracked correctly.\n  \n  Before you activate budgets, [check the values of these parameters](../sql-reference/parameters.html) by executing the [SHOW PARAMETERS](../sql-reference/sql/show-parameters) command:\n  \n  ```\n  SHOW PARAMETERS LIKE 'AUTOCOMMIT' IN ACCOUNT ;\n  ```\n  \n  Copy\n  \n  ```\n  SHOW PARAMETERS LIKE 'TIMESTAMP_INPUT_FORMAT' IN ACCOUNT ;\n  ```\n  \n  Copy\n  \n  ```\n  SHOW PARAMETERS LIKE 'DATE_INPUT_FORMAT' IN ACCOUNT ;\n  ```\n  \n  Copy\n  \n  Note\n  \n  You must set these parameters at the account level. Setting the parameters at a lower level (for example, at the session\n  level) doesn’t have an effect on activating budgets or tracking usage.\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nLanguage: **English**\n\n* [English](/en/user-guide/budgets)\n* [Français](/fr/user-guide/budgets)\n* [Deutsch](/de/user-guide/budgets)\n* [日本語](/ja/user-guide/budgets)\n* [한국어](/ko/user-guide/budgets)\n* [Português](/pt/user-guide/budgets)\n"],"full_content":null},{"url":"https://docs.snowflake.com/en/sql-reference/organization-usage","title":"Organization Usage | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Reference](/en/reference) [General reference](/en/sql-reference) [SNOWFLAKE database](/en/sql-reference/snowflake-db) Organization Usage\n\n# Organization Usage [¶]( \"Link to this heading\")\n\nSnowflake provides historical usage data for all accounts in your organization via the ORGANIZATION\\_USAGE schema in a shared database named\nSNOWFLAKE.\n\n## ORGANIZATION\\_USAGE views [¶]( \"Link to this heading\")\n\nThe ORGANIZATION\\_USAGE schema contains the following views:\n\n|View |Type |Latency <sup>[1]</sup> |Notes |\n| --- | --- | --- | --- |\n|[ACCESS\\_HISTORY](organization-usage/access_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[ACCOUNTS](organization-usage/accounts) |Object |24 hours |\n|[ALERT\\_HISTORY](organization-usage/alert_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[ANOMALIES\\_IN\\_CURRENCY\\_DAILY](organization-usage/anomalies_in_currency_daily) |Historical |24 hours |\n|[AUTOMATIC\\_CLUSTERING\\_HISTORY](organization-usage/automatic_clustering_history) |Historical |24 hours |Data retained for 1 year. |\n|[BACKUP\\_OPERATION\\_HISTORY](organization-usage/backup_operation_history) |Historical |6 hours |Data retained for 1 year. |\n|[BACKUP\\_POLICIES](organization-usage/backup_policies) |Object |6 hours |\n|[BACKUP\\_SETS](organization-usage/backup_sets) |Object |6 hours |\n|[BACKUPS](organization-usage/backups) |Object |6 hours |\n|[CLASSES](organization-usage/classes) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[CLASS\\_INSTANCES](organization-usage/class_instances) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[COLUMNS](organization-usage/columns) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[COMPLETE\\_TASK\\_GRAPHS](organization-usage/complete_task_graphs) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[CONTRACT\\_ITEMS](organization-usage/contract_items) <sup>[2]</sup> |Historical |24 hours |\n|[COPY\\_HISTORY](organization-usage/copy_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[DATA\\_TRANSFER\\_DAILY\\_HISTORY](organization-usage/data_transfer_daily_history) |Historical |2 hours |Data retained for 1 year. |\n|[DATA\\_TRANSFER\\_HISTORY](organization-usage/data_transfer_history) |Historical |24 hours |Data retained for 1 year. |\n|[DATABASE\\_STORAGE\\_USAGE\\_HISTORY](organization-usage/database_storage_usage_history) |Historical |24 hours |Data retained for 1 year. |\n|[DATABASES](organization-usage/databases) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[FEATURE\\_POLICIES](organization-usage/feature_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[FILE\\_FORMATS](organization-usage/file_formats) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[FUNCTIONS](organization-usage/functions) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[GRANTS\\_TO\\_ROLES](organization-usage/grants_to_roles) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[GRANTS\\_TO\\_USERS](organization-usage/grants_to_users) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[LISTING\\_AUTO\\_FULFILLMENT\\_USAGE\\_HISTORY](organization-usage/listing_auto_fulfillment_usage_history) |Historical |72 hours |Data retained for 1 year. |\n|[LOAD\\_HISTORY](organization-usage/load_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[LOCK\\_WAIT\\_HISTORY](organization-usage/lock_wait_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[LOGIN\\_HISTORY](organization-usage/login_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[MARKETPLACE\\_DISBURSEMENT\\_REPORT](../collaboration/views/marketplace-disbursement-report-org) |Historical |24 hours |Data retained for 1 year. |\n|[MARKETPLACE\\_PAID\\_USAGE\\_DAILY](../collaboration/views/marketplace-paid-usage-daily-org) |Historical |24 hours |Data retained for 1 year. |\n|[MASKING\\_POLICIES](organization-usage/masking_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY](organization-usage/materialized_view_refresh_history) |Historical |24 hours |Data retained for 1 year. |\n|[METERING\\_DAILY\\_HISTORY](organization-usage/metering_daily_history) |Historical |2 hours |Data retained for 1 year. |\n|[MONETIZED\\_USAGE\\_DAILY](../collaboration/views/monetized-usage-daily-org) |Historical |24 hours |Data retained for 1 year. |\n|[OBJECT\\_DEPENDENCIES](organization-usage/object_dependencies) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[PASSWORD\\_POLICIES](organization-usage/password_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[PIPE\\_USAGE\\_HISTORY](organization-usage/pipe_usage_history) |Historical |24 hours |Data retained for 1 year. |\n|[PIPES](organization-usage/pipes) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[POLICY\\_REFERENCES](organization-usage/policy_references) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[PROCEDURES](organization-usage/procedures) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[QUERY\\_ACCELERATION\\_ELIGIBLE](organization-usage/query_acceleration_eligible) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[QUERY\\_ACCELERATION\\_HISTORY](organization-usage/query_acceleration_history) |Historical |24 hours |Data retained for 1 year. |\n|[QUERY\\_HISTORY](organization-usage/query_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[RATE\\_SHEET\\_DAILY](organization-usage/rate_sheet_daily) <sup>[2]</sup> |Historical |24 hours |\n|[REFERENTIAL\\_CONSTRAINTS](organization-usage/referential_constraints) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[REMAINING\\_BALANCE\\_DAILY](organization-usage/remaining_balance_daily) <sup>[2]</sup> |Historical |72 hours |\n|[REPLICATION\\_GROUP\\_REFRESH\\_HISTORY](organization-usage/replication_group_refresh_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[REPLICATION\\_GROUP\\_USAGE\\_HISTORY](organization-usage/replication_group_usage_history) |Historical |24 hours |Data retained for 1 year. |\n|[REPLICATION\\_USAGE\\_HISTORY](organization-usage/replication_usage_history) |Historical |24 hours |Data retained for 1 year. |\n|[RESOURCE\\_MONITORS](organization-usage/resource_monitors) |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[ROLES](organization-usage/roles) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[ROW\\_ACCESS\\_POLICIES](organization-usage/row_access_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[SCHEMATA](organization-usage/schemata) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[SEARCH\\_OPTIMIZATION\\_HISTORY](organization-usage/search_optimization_history) |Historical |24 hours |Data retained for 1 year. |\n|[SEQUENCES](organization-usage/sequences) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[SESSION\\_POLICIES](organization-usage/session_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[SESSIONS](organization-usage/sessions) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[SNAPSHOT\\_OPERATION\\_HISTORY](organization-usage/snapshot_operation_history) |Historical |6 hours |Data retained for 1 year. This view is deprecated. Use the [BACKUP\\_OPERATION\\_HISTORY](account-usage/backup_operation_history) view instead. |\n|[SNAPSHOT\\_POLICIES](organization-usage/snapshot_policies) |Object |6 hours |This view is deprecated. Use the [BACKUP\\_POLICIES](account-usage/backup_policies) view instead. |\n|[SNAPSHOT\\_SETS](organization-usage/snapshot_sets) |Object |6 hours |This view is deprecated. Use the [BACKUP\\_SETS](account-usage/backup_sets) view instead. |\n|[SNAPSHOTS](organization-usage/snapshots) |Object |6 hours |This view is deprecated. Use the [BACKUPS](account-usage/backups) view instead. |\n|[STAGES](organization-usage/stages) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[STAGE\\_STORAGE\\_USAGE\\_HISTORY](organization-usage/stage_storage_usage_history) |Historical |24 hours |Data retained for 1 year. |\n|[STORAGE\\_DAILY\\_HISTORY](organization-usage/storage_daily_history) |Historical |2 hours |Data retained for 1 year. |\n|[STORAGE\\_LIFECYCLE\\_POLICIES](organization-usage/storage_lifecycle_policies) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY](organization-usage/storage_lifecycle_policy_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). Data retained for 1 year. |\n|[TABLE\\_CONSTRAINTS](organization-usage/table_constraints) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TABLE\\_STORAGE\\_METRICS](organization-usage/table_storage_metrics) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TABLES](organization-usage/tables) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TAG\\_REFERENCES](organization-usage/tag_references) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TAGS](organization-usage/tags) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TASK\\_HISTORY](organization-usage/task_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TASK\\_VERSIONS](organization-usage/task_versions) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[TRUST\\_CENTER\\_FINDINGS](organization-usage/trust_center_findings) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[USAGE\\_IN\\_CURRENCY\\_DAILY](organization-usage/usage_in_currency_daily) <sup>[2]</sup> |Historical |72 hours |\n|[USERS](organization-usage/users) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[VIEWS](organization-usage/views) |Object |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[WAREHOUSE\\_EVENTS\\_HISTORY](organization-usage/warehouse_events_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[WAREHOUSE\\_LOAD\\_HISTORY](organization-usage/warehouse_load_history) |Historical |24 hours |[Premium view](../user-guide/organization-accounts-premium-views) (only available in organization account). |\n|[WAREHOUSE\\_METERING\\_HISTORY](organization-usage/warehouse_metering_history) |Historical |24 hours |Data retained for 1 year. |\n\n\n<sub>[1] All latency times are approximate; in some instances, the actual latency may be lower.</sub>\n\n<sub>[2] The organization billing views do not display the actual, final amount because some adjustments are made at the end of the month. Customers who signed a contract through a Snowflake reseller cannot access data in these views.</sub>\n\n## Accessing the ORGANIZATION\\_ USAGE schema [¶]( \"Link to this heading\")\n\nThe ORGANIZATION\\_USAGE schema is available in the [organization account](../user-guide/organization-accounts) and a regular account that has the ORGADMIN role enabled. How you access the views in the schema differs depending on which type of account you are using. For details about accessing views, see the following:\n\n* [Access schema in the organization account]()\n* [Access schema in an ORGADMIN-enabled account]()\n\nNote\n\nThe views in the ORGANIZATION\\_USAGE schema are currently not available in [US SnowGov Regions](../user-guide/intro-regions.html) on AWS GovCloud and Microsoft Azure Government.\n\n### Access schema in the organization account [¶]( \"Link to this heading\")\n\nBy default, only users granted the GLOBALORGADMIN role can access ORGANIZATION\\_USAGE views in the [organization account](../user-guide/organization-accounts) .\n\nTo grant access to other users, the organization administrator can grant the appropriate _application role_ to an account role or user.\n\nUsers who have been granted the SNOWFLAKE.ORG\\_USAGE\\_ADMIN application role can access all views in the ORGANIZATION\\_USAGE schema of the\norganization account. The following example lets user `joe` access all views in the schema:\n\n```\nUSE ROLE GLOBALORGADMIN ; \n\n GRANT APPLICATION ROLE SNOWFLAKE . ORG_USAGE_ADMIN TO ROLE custom_role ; \n\n GRANT ROLE custom_role TO USER joe ;\n```\n\nCopy\n\nThe organization administrator can also grant access on a more granular level. For example, the ORGANIZATION\\_OBJECT\\_VIEWER application role\ngrants access to the DATABASES view but does not grant access to the TASK\\_HISTORY view.\n\nUse the following list to determine which application role grants access to a specific view. These application roles are in the SNOWFLAKE\napplication. Use the fully qualified name of the application role when granting it to another role (for example,\nSNOWFLAKE.ORGANIZATION\\_USAGE\\_VIEWER).\n\n|View |Required application role |\n| --- | --- |\n|[ACCESS\\_HISTORY view](organization-usage/access_history) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[ACCOUNTS view](organization-usage/accounts) |ORGANIZATION\\_ACCOUNTS\\_VIEWER |\n|[ALERT\\_HISTORY view](organization-usage/alert_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[AUTOMATIC\\_CLUSTERING\\_HISTORY view](organization-usage/automatic_clustering_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[CLASSES view](organization-usage/classes) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[CLASS\\_INSTANCES view](organization-usage/class_instances) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[COLUMNS view](organization-usage/columns) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[COMPLETE\\_TASK\\_GRAPHS view](organization-usage/complete_task_graphs) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[CONTRACT\\_ITEMS view](organization-usage/contract_items) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[COPY\\_HISTORY view](organization-usage/copy_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[DATABASE\\_STORAGE\\_USAGE\\_HISTORY view](organization-usage/database_storage_usage_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[DATABASES view](organization-usage/databases) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[DATA\\_TRANSFER\\_DAILY\\_HISTORY view](organization-usage/data_transfer_daily_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[DATA\\_TRANSFER\\_HISTORY view](organization-usage/data_transfer_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[FILE\\_FORMATS view](organization-usage/file_formats) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[FUNCTIONS view](organization-usage/functions) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[GRANTS\\_TO\\_ROLES view](organization-usage/grants_to_roles) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[GRANTS\\_TO\\_USERS view](organization-usage/grants_to_users) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[LISTING\\_AUTO\\_FULFILLMENT\\_USAGE\\_HISTORY view](organization-usage/listing_auto_fulfillment_usage_history) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[LOAD\\_HISTORY view](organization-usage/load_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[LOCK\\_WAIT\\_HISTORY view](organization-usage/lock_wait_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[LOGIN\\_HISTORY view](organization-usage/login_history) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[MARKETPLACE\\_DISBURSEMENT\\_REPORT View](../collaboration/views/marketplace-disbursement-report-org) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[MARKETPLACE\\_PAID\\_USAGE\\_DAILY View](../collaboration/views/marketplace-paid-usage-daily-org) |ORGANIZATION\\_USAGE\\_VIEWER |\n|MARKETPLACE\\_PURCHASE\\_EVENTS view |ORGANIZATION\\_BILLING\\_VIEWER |\n|[MASKING\\_POLICIES view](organization-usage/masking_policies) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY view](organization-usage/materialized_view_refresh_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[METERING\\_DAILY\\_HISTORY view](organization-usage/metering_daily_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[MONETIZED\\_USAGE\\_DAILY](../collaboration/views/monetized-usage-daily-org) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[OBJECT\\_DEPENDENCIES view](organization-usage/object_dependencies) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[PASSWORD\\_POLICIES view](organization-usage/password_policies) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[PIPE\\_USAGE\\_HISTORY view](organization-usage/pipe_usage_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[PIPES view](organization-usage/pipes) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[POLICY\\_REFERENCES view](organization-usage/policy_references) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[PROCEDURES view](organization-usage/procedures) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[QUERY\\_ACCELERATION\\_ELIGIBLE view](organization-usage/query_acceleration_eligible) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[QUERY\\_ACCELERATION\\_HISTORY view](organization-usage/query_acceleration_history) |* ORGANIZATION\\_GOVERNANCE\\_VIEWER\n* ORGANIZATION\\_USAGE\\_VIEWER |\n|[QUERY\\_HISTORY view](organization-usage/query_history) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[RATE\\_SHEET\\_DAILY view](organization-usage/rate_sheet_daily) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[REFERENTIAL\\_CONSTRAINTS view](organization-usage/referential_constraints) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[REMAINING\\_BALANCE\\_DAILY view](organization-usage/remaining_balance_daily) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[REPLICATION\\_GROUP\\_REFRESH\\_HISTORY view](organization-usage/replication_group_refresh_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[REPLICATION\\_GROUP\\_USAGE\\_HISTORY view](organization-usage/replication_group_usage_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[REPLICATION\\_USAGE\\_HISTORY view](organization-usage/replication_usage_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[RESOURCE\\_MONITORS view](organization-usage/resource_monitors) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[ROLES view](organization-usage/roles) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[ROW\\_ACCESS\\_POLICIES view](organization-usage/row_access_policies) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[SCHEMATA view](organization-usage/schemata) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[SEARCH\\_OPTIMIZATION\\_HISTORY view](organization-usage/search_optimization_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[SEQUENCES view](organization-usage/sequences) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[SESSION\\_POLICIES view](organization-usage/session_policies) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[SESSIONS view](organization-usage/sessions) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[STAGE\\_STORAGE\\_USAGE\\_HISTORY view](organization-usage/stage_storage_usage_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[STAGES view](organization-usage/stages) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[STORAGE\\_LIFECYCLE\\_POLICIES view](organization-usage/storage_lifecycle_policies) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY view](organization-usage/storage_lifecycle_policy_history) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[STORAGE\\_DAILY\\_HISTORY view](organization-usage/storage_daily_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[TABLE\\_CONSTRAINTS view](organization-usage/table_constraints) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[TABLE\\_STORAGE\\_METRICS view](organization-usage/table_storage_metrics) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[TABLES view](organization-usage/tables) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[TAG\\_REFERENCES view](organization-usage/tag_references) |ORGANIZATION\\_GOVERNANCE\\_VIEWER |\n|[TAGS view](organization-usage/tags) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[TASK\\_HISTORY view](organization-usage/task_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[TASK\\_VERSIONS view](organization-usage/task_versions) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[TRUST\\_CENTER\\_FINDINGS view](organization-usage/trust_center_findings) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[USAGE\\_IN\\_CURRENCY\\_DAILY view](organization-usage/usage_in_currency_daily) |ORGANIZATION\\_BILLING\\_VIEWER |\n|[USERS view](organization-usage/users) |ORGANIZATION\\_SECURITY\\_VIEWER |\n|[VIEWS view](organization-usage/views) |ORGANIZATION\\_OBJECT\\_VIEWER |\n|[WAREHOUSE\\_EVENTS\\_HISTORY view](organization-usage/warehouse_events_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[WAREHOUSE\\_LOAD\\_HISTORY view](organization-usage/warehouse_load_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n|[WAREHOUSE\\_METERING\\_HISTORY view](organization-usage/warehouse_metering_history) |ORGANIZATION\\_USAGE\\_VIEWER |\n\n### Access schema in an ORGADMIN-enabled account [¶]( \"Link to this heading\")\n\nAn ORGADMIN-enabled account is a regular account that has the ORGADMIN role enabled. Within a ORGADMIN-enabled account, anyone who has\naccess to the shared SNOWFLAKE database has access to the ORGANIZATION\\_USAGE schema. By default, only the ACCOUNTADMIN role has privileges\nto this database, which means the ORGADMIN role does not have the necessary privileges. To grant these privileges to the ORGADMIN role, see [Enabling other roles to use schemas in the SNOWFLAKE database](account-usage.html) .\n\nTo grant access to non-administrators, the organization administrator can grant the appropriate _database role_ to an account role or user.\n\nUsing the following list to determine which database role grants access to specific views.\n\nThe ORGANIZATION\\_USAGE\\_VIEWER, ORGANIZATION\\_BILLING\\_VIEWER, and ORGANIZATION\\_ACCOUNTS\\_VIEWER SNOWFLAKE database roles are granted the SELECT privilege on Organization Usage views in the shared SNOWFLAKE database.\n\nFor more information, refer to [GRANT DATABASE ROLE](sql/grant-database-role) .\n\n## General usage notes [¶]( \"Link to this heading\")\n\nThe Snowflake-specific views are subject to change. Avoid selecting all columns from these views. Instead, select the columns that you want.\nFor example, if you want the `name` column, use `SELECT name` , rather than `SELECT *` .\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nOn this page\n\n1. [ORGANIZATION\\_USAGE views]()\n2. [Accessing the ORGANIZATION\\_USAGE schema]()\n3. [Access schema in the organization account]()\n4. [Access schema in an ORGADMIN-enabled account]()\n5. [General usage notes]()\n\nRelated content\n\n1. [Introduction to organizations](/sql-reference/../user-guide/organizations)\n2. [Account Usage](/sql-reference/account-usage)\n\nLanguage: **English**\n\n* [English](/en/sql-reference/organization-usage)\n* [Français](/fr/sql-reference/organization-usage)\n* [Deutsch](/de/sql-reference/organization-usage)\n* [日本語](/ja/sql-reference/organization-usage)\n* [한국어](/ko/sql-reference/organization-usage)\n* [Português](/pt/sql-reference/organization-usage)\n\n## Snowflake's Use of Cookies\n\nWe use cookies to enhance your experience and to analyze site traffic as described in our Cookie Statement. By accepting, you consent to our use of cookies. [Cookie Statement.](https://www.snowflake.com/privacy-policy/cookie-statement/)\n\nCookies Settings Reject All Accept All Cookies\n\n## Privacy Preference Center\n\nYour Opt Out Preference Signal is Honored\n\n* ### Your Privacy\n* ### Strictly Necessary Cookies\n* ### Performance Cookies\n* ### Functional Cookies\n* ### Targeting Cookies\n\n#### Your Privacy\n\nWhen you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.  \n[More information](https://cookiepedia.co.uk/giving-consent-to-cookies)\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\n\nCookies Details‎\n\n#### Performance Cookies\n\nPerformance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site.    All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.\n\nCookies Details‎\n\n#### Functional Cookies\n\nFunctional Cookies\n\nThese cookies enable the website to provide enhanced functionality and personalisation. They may be set by us or by third party providers whose services we have added to our pages.    If you do not allow these cookies then some or all of these services may not function properly.\n\nCookies Details‎\n\n#### Targeting Cookies\n\nTargeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly identifiable personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.\n\nCookies Details‎\n\n### Cookie List\n\nConsent Leg.Interest\n\ncheckbox label label\n\ncheckbox label label\n\ncheckbox label label\n\nClear\n\ncheckbox label label\n\nApply Cancel\n\nConfirm My Choices\n\nAllow All\n\n[](https://www.onetrust.com/products/cookie-consent/)\n"],"full_content":null}],"errors":[],"warnings":[{"type":"warning","message":"Neither objective nor search_queries were provided, provide at least one to increase the relevance of excerpts.","detail":null}],"usage":[{"name":"sku_extract_excerpts","count":4}]}