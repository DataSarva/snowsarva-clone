{"search_id":"search_05fd71d787a343ce826a558483be90df","results":[{"url":"https://docs.snowflake.com/en/user-guide/cost-attributing","title":"Attributing cost | Snowflake Documentation","excerpts":["[Overview](/en/guides \"Overview\")\n[Snowflake Horizon Catalog](/en/user-guide/snowflake-horizon \"Snowflake Horizon Catalog\")\n[Applications and tools for connecting to Snowflake](/en/guides-overview-connecting \"Applications and tools for connecting to Snowflake\")\n[Virtual warehouses](/en/user-guide/warehouses \"Virtual warehouses\")\n[Databases, Tables, & Views](/en/guides-overview-db \"Databases, Tables, & Views\")\n[Data types](/en/data-types \"Data types\")\nData Integration\n[Snowflake Openflow](/en/user-guide/data-integration/openflow/about \"Snowflake Openflow\")\nApache Iceberg™\n[Apache Iceberg™ Tables](/en/user-guide/tables-iceberg \"Apache Iceberg™ Tables\")\n[Snowflake Open Catalog](/en/user-guide/opencatalog/overview \"Snowflake Open Catalog\")\nData engineering\n[Data loading](/en/guides-overview-loading-data \"Data loading\")\n[Dynamic Tables](/en/user-guide/dynamic-tables-about \"Dynamic Tables\")\n[Streams and Tasks](/en/user-guide/data-pipelines-intro \"Streams and Tasks\")\n[dbt Projects on\n ... \nAccounts\")\n[Business continuity & data recovery](/en/user-guide/replication-intro \"Business continuity & data recovery\")\n[Performance optimization](/en/guides-overview-performance \"Performance optimization\")\n[Cost & Billing](/en/guides-overview-cost \"Cost & Billing\")\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Visibility Attributing cost\nSection Title: Attributing cost [¶]( \"Link to this heading\")\nContent:\nAn organization can apportion the cost of using Snowflake to logical units within the organization (for example, to different\ndepartments, environments, or projects). This chargeback or showback model is useful for accounting purposes and pinpoints\nareas of the organization that could benefit from controls and optimizations that can reduce costs.\nTo attribute costs to different groups like departments or projects, use the following recommended approach:\nUse [object tags](object-tagging/introduction) to associate resources and users with departments or projects.\nUse [query tags](../sql-reference/parameters.html) to associate individual queries with departments or projects when the queries are\nmade by the same application on behalf of users belonging to multiple departments.\n ... \nSection Title: ... > Viewing cost by tag in SQL [¶]( \"Link to this heading\")\nContent:\n**Attributing costs within an account**You can attribute costs within an account by querying the following views in the [ACCOUNT_USAGE](../sql-reference/account-usage) schema:\n[TAG_REFERENCES view](../sql-reference/account-usage/tag_references) : Identifies objects (for example, warehouses and users) that have tags. [WAREHOUSE_METERING_HISTORY view](../sql-reference/account-usage/warehouse_metering_history) : Provides credit usage for warehouses. [QUERY_ATTRIBUTION_HISTORY view](../sql-reference/account-usage/query_attribution_history) : Provides the compute costs for queries. The cost per query is\nthe warehouse credit usage for executing the query.For more information on using this view, see [About the QUERY_ATTRIBUTION_HISTORY view]() .\nSection Title: ... > Viewing cost by tag in SQL [¶]( \"Link to this heading\")\nContent:\n**Attributing costs across accounts in an organization**Within an organization, you can also attribute costs for resources that are used **exclusively by a single department** by\nquerying views in the [ORGANIZATION_USAGE](../sql-reference/organization-usage) schema from the [organization account](organization-accounts) .Note\nIn the ORGANIZATION_USAGE schema, the TAG_REFERENCES view is only available in the organization account. The QUERY_ATTRIBUTION_HISTORY view is only available in the ACCOUNT_USAGE schema for an account. There is no\norganization-wide equivalent of the view.\n ... \nSection Title: ... > Resources shared by users from different departments [¶]( \"Link to this heading\")\nContent:\nSuppose that users in different departments share the same warehouses and you want to break down the credits used by each\ndepartment. You can tag the users with a `cost_center` tag to identify the department that they belong to, and you can join\nthe [TAG_REFERENCES view](../sql-reference/account-usage/tag_references) with the [QUERY_ATTRIBUTION_HISTORY view](../sql-reference/account-usage/query_attribution_history) .\nNote\nYou can only get this data for a single account at a time. You cannot execute a query that retrieves this data across\naccounts in an organization.\nThe next sections provide examples of SQL statements for attributing costs for shared resources."]},{"url":"https://docs.snowflake.com/en/user-guide/billing-usage-statement","title":"Access a billing usage statement - Snowflake Documentation","excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n/\n[Get started](/en/user-guide-getting-started)\n[Guides](/en/guides)\n[Developer](/en/developer)\n[Reference](/en/reference)\n[Release notes](/en/release-notes/overview)\n[Tutorials](/en/tutorials)\n[Status](https://status.snowflake.com)\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Accessing usage statements\nSection Title: Access a billing usage statement [¶]( \"Link to this heading\")\nContent:\nSnowflake generates a monthly usage statement for customers who have at least one active contract, also known as the Snowflake Order Form.\nThis statement itemizes usage for the month as expressed in credits consumed and currency spent. It also contains a summary of usage during\nthe life of the contract.\nSnowsight allows you to view and download monthly usage statements, starting with July 2023. To access these statements, either of\nthe following must be true:\nYou have been granted the GLOBALORGADMIN, and you are in the [organization account](organization-accounts) .\nYou have been granted the ACCOUNTADMIN and ORGADMIN roles, and you are in an account that has the ORGADMIN role enabled.\nKeep the following in mind when accessing usage statements:\nSection Title: Access a billing usage statement [¶]( \"Link to this heading\")\nContent:\nIf your organization has multiple contracts, Snowflake generates a separate usage statement for each contract.\nIf you renew a contract in the middle of the month, Snowflake generates two separate usage statements for the contract.\nCustomers who signed a contract through a Snowflake reseller cannot view or download usage statements.\nYou cannot access usage statements from an account in [US SnowGov Regions](intro-regions.html) on AWS\nGovCloud and Microsoft Azure Government.\nTo access a usage statement:\nSign in to [Snowsight](ui-snowsight-gs.html) .\nIn the navigation menu, select Admin » Billing .\nIf prompted, select a warehouse in the Snowflake usage statements section.\nView or download the usage statement.\nWas this page helpful?\nYes No\n[Visit Snowflake](https://www.snowflake.com)\n[Join the conversation](https://community.snowflake.com/s/)\n[Develop with Snowflake](https://developers.snowflake.com)\nSection Title: Access a billing usage statement [¶]( \"Link to this heading\")\nContent:\n[Share your feedback](/feedback)\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n[Get your own certification](https://learn.snowflake.com)\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\nRelated content\n[Reconcile a billing usage statement](/user-guide/billing-reconcile)\nLanguage: **English**\n[English](/en/user-guide/billing-usage-statement)\n[Français](/fr/user-guide/billing-usage-statement)\n[Deutsch](/de/user-guide/billing-usage-statement)\n[日本語](/ja/user-guide/billing-usage-statement)\n[한국어](/ko/user-guide/billing-usage-statement)\n[Português](/pt/user-guide/billing-usage-statement)\nSection Title: Access a billing usage statement [¶]( \"Link to this heading\") > Snowflake's Use of Cookies\nContent:\nWe use cookies to enhance your experience and to analyze site traffic as described in our Cookie Statement. By accepting, you consent to our use of cookies. [Cookie Statement.](https://www.snowflake.com/privacy-policy/cookie-statement/)\nCookies Settings Reject All Accept All Cookies\nSection Title: Access a billing usage statement [¶]( \"Link to this heading\") > Privacy Preference Center\nContent:\nYour Opt Out Preference Signal is Honored\nYour Privacy\nStrictly Necessary Cookies\nPerformance Cookies\nFunctional Cookies\nTargeting Cookies\n ... \nSection Title: Access a billing usage statement [¶]( \"Link to this heading\") > ... > Strictly Necessary Cookies\nContent:\nAlways Active\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\nCookies Details‎"]},{"url":"https://docs.snowflake.com/en/developer-guide/native-apps/adding-custom-event-billing","title":"Add billable events to an application package | Snowflake Documentation","excerpts":["Section Title: Add billable events to an application package [¶]( \"Link to this heading\")\nContent:\n[](../../_images/logo-snowflake-black.png) Feature — Generally Available\nThe Snowflake Native App Framework is generally available on supported cloud platforms. For additional information, see [Support for private connectivity, VPS, and government regions](limitations.html) .\nWhen you use Custom Event Billing for a Snowflake Native App, you can charge for specific types of application usage in addition to the existing\nusage-based pricing plans. To set it up, you must perform two high-level steps:\nSet up your application package to emit billable events by following the steps in this topic.\n[Select a usage-based pricing plan with billable events](../../collaboration/provider-listings-pricing-model) for the listing you use to publish your Snowflake Native App to consumers.\n ... \nSection Title: ... > Overview of billable events in an application package [¶]( \"Link to this heading\")\nContent:\nYou can set up your application package to emit billable events in response to specific usage events so that you can charge consumers based on\nhow much they use your Snowflake Native App.\nFor example, you can add a billable event to charge a consumer a specific amount for each call to a stored procedure in your Snowflake Native App.\nTo add billable events to an application package, do the following:\nSection Title: ... > Overview of billable events in an application package [¶]( \"Link to this heading\")\nContent:\nCreate stored procedures to define which usage events trigger calls to the [SYSTEM$CREATE_BILLING_EVENT](../../sql-reference/functions/system_create_billing_event) and [SYSTEM$CREATE_BILLING_EVENTS](../../sql-reference/functions/system_create_billing_events) system functions.NoteYou cannot test the output of the system function at this stage. This system function can only be called from a Snowflake Native App\ninstalled in a consumer account.\nAdd those stored procedures to the setup script of the application package.\nImportant\nSnowflake supports billable events that are emitted by calling the system function within a stored procedure in the application,\nas outlined by the examples in this topic.\n ... \nSection Title: ... > Call the SYSTEM$CREATE_BILLING_EVENT system function [¶]( \"Link to this heading\")\nContent:\nCopy\nThe examples in this topic call this helper function.\nSection Title: ... > Batch multiple billing events with the SYSTEM$CREATE_BILLING_EVENTS system function [¶]( \"L...\nContent:\nThe following example stored procedure shows how to batch multiple Snowflake Native App billing events with the SYSTEM$CREATE_BILLING_EVENTS system function. By using batches, you save time, reduce the likelihood of exceeding call limits, and ensure your billing events are set up correctly.\nFor more details about the parameters and the required types, see [SYSTEM$CREATE_BILLING_EVENTS](../../sql-reference/functions/system_create_billing_events) .\n ... \nSection Title: ... > Example: Billing based on monthly active rows [¶]( \"Link to this heading\")\nContent:\nMonthly active rows are the number of rows inserted or updated for the first time within a calendar month. Some\nproviders use this metric to only charge consumers for unique rows updated in a month. You can modify this example to instead\ncount unique users, or identify a unique data load location to determine a base charge.\nThe following example shows how to create a stored procedure to emit a billable event based on the number of\nmonthly active rows. Add this example code to your setup script in the same stored procedure that defines the helper function:\n ... \nSection Title: ... > Test custom event billing [¶]( \"Link to this heading\")\nContent:\nTo make sure that you set up Custom Event Billing properly and that billable events are emitted for usage events as you expect,\ndo the following:\n ... \nSection Title: ... > Test custom event billing [¶]( \"Link to this heading\")\nContent:\nWhen you test Custom Event Billing, you must [set up a payment method](../../collaboration/consumer-listings-paying) but you will not be charged for usage within your organization.\n ... \nSection Title: ... > Validate the custom event billing pricing plan [¶]( \"Link to this heading\")\nContent:\nTo validate the consumer experience of a Snowflake Native App and confirm that the listing and application package are set up properly, you can query\nthe [MARKETPLACE_PAID_USAGE_DAILY View](../../collaboration/views/marketplace-paid-usage-daily-ds) in the DATA_SHARING_USAGE schema of the shared SNOWFLAKE database.\nNote\nDue to latency in the view, run these queries at least two days after first using the Snowflake Native App.\nTo confirm that billable events are successfully generated by a Snowflake Native App and listing,\nrun the following SQL statement in the consumer account that you shared the listing with:\nNote\nReplace the PROVIDER_ACCOUNT_NAME and PROVIDER_ORGANIZATION_NAME values with those of the provider account."]},{"url":"https://docs.snowflake.com/en/guides-overview-cost","title":"Cost & billing - Snowflake Documentation","excerpts":["[Overview](/en/guides \"Overview\")\n[Snowflake Horizon Catalog](/en/user-guide/snowflake-horizon \"Snowflake Horizon Catalog\")\n[Applications and tools for connecting to Snowflake](/en/guides-overview-connecting \"Applications and tools for connecting to Snowflake\")\n[Virtual warehouses](/en/user-guide/warehouses \"Virtual warehouses\")\n[Databases, Tables, & Views](/en/guides-overview-db \"Databases, Tables, & Views\")\n[Data types](/en/data-types \"Data types\")\nData Integration\n[Snowflake Openflow](/en/user-guide/data-integration/openflow/about \"Snowflake Openflow\")\nApache Iceberg™\n[Apache Iceberg™ Tables](/en/user-guide/tables-iceberg \"Apache Iceberg™ Tables\")\n[Snowflake Open Catalog](/en/user-guide/opencatalog/overview \"Snowflake Open Catalog\")\nData engineering\n[Data loading](/en/guides-overview-loading-data \"Data loading\")\n[Dynamic Tables](/en/user-guide/dynamic-tables-about \"Dynamic Tables\")\n[Streams and Tasks](/en/user-guide/data-pipelines-intro \"Streams and Tasks\")\n[dbt Projects on\n ... \nAccounts\")\n[Business continuity & data recovery](/en/user-guide/replication-intro \"Business continuity & data recovery\")\n[Performance optimization](/en/guides-overview-performance \"Performance optimization\")\n[Cost & Billing](/en/guides-overview-cost \"Cost & Billing\")\n[Guides](/en/guides) Cost & Billing\nSection Title: Cost & billing [¶]( \"Link to this heading\")\nContent:\nSnowflake provides a robust framework to manage costs. You can also obtain monthly usage statements and reconcile those statements with\nusage data in views.\nSection Title: Cost & billing [¶]( \"Link to this heading\") > Cost management [¶]( \"Link to this heading\")\nContent:\n[Understanding overall cost](user-guide/cost-understanding-overall)\nThe total cost of using Snowflake is the aggregate of the cost of using data transfer, storage, and compute resources.\nLearn about how overall cost is calculated.\n[Exploring overall cost](user-guide/cost-exploring-overall)\nSnowsight allows you to quickly and easily obtain information about cost from a visual dashboard.\nQueries against the usage views allow you to drill down into cost data and can help generate custom reports and dashboards.\nSection Title: Cost & billing [¶]( \"Link to this heading\") > Cost management [¶]( \"Link to this heading\")\nContent:\nLearn about exploring your spend using various queries to return cost information.\n[Optimizing cost](user-guide/cost-optimize)\nLearn how to optimize Snowflake in order to reduce costs and maximize your spend.\n[Attributing cost](user-guide/cost-attributing)\nGain insight into Snowflake cost by attributing those costs to logical units within the organization such as departments, environments or\nother entities.\nLearn how to attribute cost to differing entities within your organization.\n[Controlling cost](user-guide/cost-controlling)\nCost controls allow you to limit how much is spent on various services such as virtual warehouses.\nSection Title: Cost & billing [¶]( \"Link to this heading\") > Cost management [¶]( \"Link to this heading\")\nContent:\n[Budgets](user-guide/budgets) allow you to monitor the credit usage of supported objects and serverless features in your account. [Resource monitors](user-guide/resource-monitors) allow you to monitor credit usage by user-managed virtual warehouses and the\ncloud services layer of the Snowflake architecture.\nSection Title: Cost & billing [¶]( \"Link to this heading\") > Billing [¶]( \"Link to this heading\")\nContent:\n[Access a billing usage statement](user-guide/billing-usage-statement)\nLearn how to use Snowsight to view and download monthly usage statements.\n[Reconcile a billing usage statement](user-guide/billing-reconcile)\nLearn how to execute queries to reconcile usage data shown on a usage statement with data in the billing views of the Organization Usage\nschema.\n[Update billing contact information](user-guide/billing-contacts)\nLearn how to use Snowsight to update billing contact information.\nWas this page helpful?\nYes No\n[Visit Snowflake](https://www.snowflake.com)\n[Join the conversation](https://community.snowflake.com/s/)\n[Develop with Snowflake](https://developers.snowflake.com)\n[Share your feedback](/feedback)\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n[Get your own certification](https://learn.snowflake.com)\nSection Title: Cost & billing [¶]( \"Link to this heading\") > Billing [¶]( \"Link to this heading\")\nContent:\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\nOn this page\n[Cost management]()\n[Billing]()\nLanguage: **English**\n[English](/en/guides-overview-cost)\n[Français](/fr/guides-overview-cost)\n[Deutsch](/de/guides-overview-cost)\n[日本語](/ja/guides-overview-cost)\n[한국어](/ko/guides-overview-cost)\n[Português](/pt/guides-overview-cost)"]},{"url":"https://www.snowflake.com/en/developers/guides/resource-optimization-billing-metrics/","title":"Resource Optimization: Billing Metrics - Snowflake","excerpts":["[Skip to content]()\nData for Breakfast Around the World\nDrive impact across your organization with data and agentic intelligence.\n[register now](https://www.snowflake.com/en/data-for-breakfast/)\n[Snowflake for Developers](https://www.snowflake.com/content/snowflake-site/global/en/developers) [Guides](https://www.snowflake.com/content/snowflake-site/global/en/developers/guides) Resource Optimization: Billing Metrics\n ... \nSection Title: Resource Optimization: Billing Metrics > Overview > Billing Metrics\nContent:\nBilling queries are responsible for identifying total costs associated with the high level functions of the Snowflake Cloud Data Platform, which includes warehouse compute, snowpipe compute, and storage costs. If costs are noticeably higher in one category versus the others, you may want to evaluate what might be causing that.\nThese metrics also seek to identify those queries that are consuming the most amount of credits. From there, each of these queries can be analyze for their importance (do they need to be run as frequently, if at all) and explore if additional controls need to be in place to prevent excessive consumption (i.e. resource monitors, statement timeouts, etc.).\n ... \nSection Title: Resource Optimization: Billing Metrics > Overview > What You’ll Need\nContent:\nA [Snowflake](/) Account\nAccess to view [Account Usage Data Share](https://docs.snowflake.com/en/sql-reference/account-usage.html)\n ... \nSection Title: Resource Optimization: Billing Metrics > Billing Metrics (T1) > Tier 1 > Description:\nContent:\nIdentify key metrics as it pertains to total compute costs from warehouses,\nserverless features, and total storage costs.\nSection Title: Resource Optimization: Billing Metrics > Billing Metrics (T1) > Tier 1 > How to Interpret Results:\nContent:\nWhere are we seeing most of our costs coming from (compute, serverless, storage)? Are seeing excessive costs in any of those categories that are above expectations?\n ... \nSection Title: Resource Optimization: Billing Metrics > Billing Metrics (T1) > Tier 1 > SQL\nContent:\n/* These queries can be used to measure where costs have been incurred by\nthe different cost vectors within a Snowflake account including:\nWarehouse Costs\nServerless Costs\nStorage Costs\nTo accurately report the dollar amounts, make changes to the variables\ndefined on lines 17 to 20 to properly reflect your credit price, the initial\ncapacity purchased, when your contract started and the term (default 12 months)\nIf unsure, ask your Sales Engineer or Account Executive\n*/\nUSE DATABASE SNOWFLAKE;\nUSE SCHEMA ACCOUNT_USAGE;\nSET CREDIT_PRICE = 4.00; --edit this number to reflect credit price\nSET TERM_LENGTH = 12; --integer value in months\nSET TERM_START_DATE = '2019-01-01';\nSET TERM_AMOUNT = 100000.00; --number(10,2) value in dollars\nWITH CONTRACT_VALUES AS (\n ... \nSection Title: Resource Optimization: Billing Metrics > Billing Metrics (T1) > Tier 1 > SQL\nContent:\n--COMPUTE FROM CLUSTERING\nSELECT\n'Auto Clustering' AS WAREHOUSE_GROUP_NAME\n,DATABASE_NAME || '.' || SCHEMA_NAME || '.' || TABLE_NAME AS WAREHOUSE_NAME\n,NULL AS GROUP_CONTACT\n,NULL AS GROUP_COST_CENTER\n,NULL AS GROUP_COMMENT\n,ACH.START_TIME\n,ACH.END_TIME\n,ACH.CREDITS_USED\n,$CREDIT_PRICE\n,($CREDIT_PRICE*ACH.CREDITS_USED) AS DOLLARS_USED\n,'ACTUAL COMPUTE' AS MEASURE_TYPE\nfrom    SNOWFLAKE.ACCOUNT_USAGE.AUTOMATIC_CLUSTERING_HISTORY ACH\nUNION ALL\n--COMPUTE FROM MATERIALIZED VIEWS\nSELECT\n'Materialized Views' AS WAREHOUSE_GROUP_NAME\n,DATABASE_NAME || '.' || SCHEMA_NAME || '.' || TABLE_NAME AS WAREHOUSE_NAME\n,NULL AS GROUP_CONTACT\n,NULL AS GROUP_COST_CENTER\n,NULL AS GROUP_COMMENT\n,MVH.START_TIME\n,MVH.END_TIME\n,MVH.CREDITS_USED\n,$CREDIT_PRICE\n,($CREDIT_PRICE*MVH.CREDITS_USED) AS DOLLARS_USED\n,'ACTUAL COMPUTE' AS MEASURE_TYPE\nfrom    SNOWFLAKE.ACCOUNT_USAGE.MATERIALIZED_VIEW_REFRESH_HISTORY MVH\nUNION ALL\n ... \nSection Title: Resource Optimization: Billing Metrics > Average Cost per Query by Warehouse (T2) > Tier 2 > SQL\nContent:\nset credit_price = 4;  --edit this value to reflect your credit price\nSELECT\nCOALESCE(WC.WAREHOUSE_NAME,QC.WAREHOUSE_NAME) AS WAREHOUSE_NAME\n,QC.QUERY_COUNT_LAST_MONTH\n,WC.CREDITS_USED_LAST_MONTH\n,WC.CREDIT_COST_LAST_MONTH\n,CAST((WC.CREDIT_COST_LAST_MONTH / QC.QUERY_COUNT_LAST_MONTH) AS decimal(10,2) ) AS COST_PER_QUERY\nFROM (\nSELECT\nWAREHOUSE_NAME\n,COUNT(QUERY_ID) as QUERY_COUNT_LAST_MONTH\nFROM SNOWFLAKE.ACCOUNT_USAGE.QUERY_HISTORY\nWHERE TO_DATE(START_TIME) >= TO_DATE(DATEADD(month,-1,CURRENT_TIMESTAMP()))\nGROUP BY WAREHOUSE_NAME\n) QC\nJOIN (\n```\nSELECT\n    WAREHOUSE_NAME\n    ,SUM(CREDITS_USED) as CREDITS_USED_LAST_MONTH\n    ,SUM(CREDITS_USED)*($CREDIT_PRICE) as CREDIT_COST_LAST_MONTH\nFROM SNOWFLAKE.ACCOUNT_USAGE.WAREHOUSE_METERING_HISTORY\nWHERE TO_DATE(START_TIME) >= TO_DATE(DATEADD(month,-1,CURRENT_TIMESTAMP()))\nGROUP BY WAREHOUSE_NAME\n```\n) WC\nON WC.WAREHOUSE_NAME = QC.WAREHOUSE_NAME\nSection Title: Resource Optimization: Billing Metrics > Average Cost per Query by Warehouse (T2) > Tier 2 > SQL\nContent:\nORDER BY COST_PER_QUERY DESC\n;\n```\n\nCopy\n```"]},{"url":"https://docs.snowflake.com/en/sql-reference/account-usage/query_attribution_history","title":"QUERY_ATTRIBUTION_HISTORY view | Snowflake Documentation","excerpts":["Section Title: ... > Usage notes [¶]( \"Link to this heading\")\nContent:\nFor example, the following are not included in the query cost:\nData transfer costs\nStorage costs\nCloud services costs\nCosts for serverless features\nCosts for tokens processed by AI services\nFor queries that are executed concurrently, the cost of the warehouse is attributed to individual queries based on the\nweighted average of their resource consumption during a given time interval. Short-running queries (<= ~100ms) are currently too short for per query cost attribution and are not included in the view. Data for all columns is available starting from mid-August, 2024. Some data prior to this date might be available in the view, but\nmight be incomplete.\n ... \nSection Title: ... > Query costs for the current user [¶]( \"Link to this heading\")\nContent:\nTo determine the costs of queries executed by the current user for the current month, execute the following statement:\n```\nSELECT user_name , SUM ( credits_attributed_compute ) AS credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE user_name = CURRENT_USER () \n    AND start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY user_name ;\n```\nCopy\nFor an example of attributing warehouse costs to users, see [Resources shared by users from different departments](../../user-guide/cost-attributing.html) ."]},{"url":"https://docs.snowflake.cn/en/user-guide/cost-exploring-overall","title":"Exploring overall cost | Snowflake Documentation","excerpts":["Section Title: Exploring overall cost [¶]( \"Link to this heading\")\nContent:\nYou can explore historical cost using Snowsight, or by writing queries against views in the [ACCOUNT_USAGE](../sql-reference/account-usage) and [ORGANIZATION_USAGE](../sql-reference/organization-usage) schemas.\nSnowsight allows you to quickly and easily obtain information about cost from a visual dashboard. Queries against the usage\nviews allow you to drill down into cost data and can help generate custom reports and dashboards.\nIf you need an introduction to how costs are incurred in Snowflake, refer to [Understanding overall cost](cost-understanding-overall) .\nTo obtain a billing statement that contains information about historical usage, see [Access a billing usage statement](billing-usage-statement) .\n ... \nSection Title: ... > Querying data for overall cost [¶]( \"Link to this heading\")\nContent:\nSnowflake provides two schemas, [ORGANIZATION_USAGE](../sql-reference/organization-usage) and [ACCOUNT_USAGE](../sql-reference/account-usage) , that contain data related to usage and cost. The ORGANIZATION_USAGE schema provides\ncost information for all of the accounts in the organization while the ACCOUNT_USAGE schema provides similar information for a single\naccount. Views in these schemas provide granular, analytics-ready usage data to build custom reports or dashboards.\nThe following query combines data from the USAGE_IN_CURRENCY view in the ORGANIZATION_USAGE schema in order to gain insight into the\noverall cost of using Snowflake."]},{"url":"https://blog.greybeam.ai/snowflake-cost-per-query/","title":"Deep Dive: Snowflake's Query Cost and Idle Time Attribution","publish_date":"2024-10-22","excerpts":["Section Title: A Deep Dive into Snowflake's Query Cost Attribution: Finding Cost per Query\nContent:\nSnowflake's new QUERY_ATTRIBUTION_HISTORY view\nSnowflake recently released a new feature for granular cost attribution down to individual queries through the `QUERY_ATTRIBUTION_HISTORY` view in `ACCOUNT_USAGE` . As a company focused on SQL optimization, we at Greybeam were eager to dive in and see how this new capability compares to our own custom cost attribution logic. What we found was surprising - and it led us down a rabbit hole of query cost analysis.\n ... \nSection Title: ... > Our Approach to Query Cost Attribution\nContent:\nWe use `WAREHOUSE_METERING_HISTORY` as our source of truth for warehouse compute credits. The credits billed here will reconcile with Snowflake’s cost management dashboards.\nCredits here are represented on an hourly grain. We like to refer to this as *credits metered* , analogous to how most homes in North America are metered for their electricity. In our solution, we’ll need to allocate queries and idle times into their metered hours.\nWe use a weighted time-based approach to attribute costs within the metered hour. In reality, Snowflake’s credit attribution is likely much more complex, especially in situations with more clusters or warehouse scaling.\nHow we need to break down our queries and idle times.\nThe full SQL query will be available at the end of this blog."]},{"url":"https://docs.snowflake.com/en/user-guide/billing-reconcile","title":"Reconcile a billing usage statement - Snowflake Documentation","excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n/\n[Get started](/en/user-guide-getting-started)\n[Guides](/en/guides)\n[Developer](/en/developer)\n[Reference](/en/reference)\n[Release notes](/en/release-notes/overview)\n[Tutorials](/en/tutorials)\n[Status](https://status.snowflake.com)\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Reconciling usage statements\n ... \nSection Title: ... > Reconcile each type of usage [¶]( \"Link to this heading\")\nContent:\nSnowflake usage can be attributed to different features and [architectural components](intro-key-concepts) . The Monthly\nUsage section of a statement itemizes usage based on the source of the usage, grouped by the account where the usage occurred. For example,\nusage attributed to automatic clustering in account `account_1` appears on a different line than automatic clustering usage in account `account_2` . Each line shows how many credits were consumed and the amount spent in currency.\nUse the following query to reconcile individual categories of usage shown in the statement’s Monthly Usage section with data in the [USAGE_IN_CURRENCY_DAILY view](../sql-reference/organization-usage/usage_in_currency_daily) . Like the statement, each type of usage is grouped by account in the\nquery results. Replace the date with the last day of the month shown on the usage statement."]},{"url":"https://www.snowflake.com/en/product/features/native-apps/","title":"Snowflake Native Apps","excerpts":["Section Title: Snowflake Native Apps > Build Faster, Deploy More Easily, Operate Effortlessly\nContent:\nAvoid the complex costs that come from multiple services and the manual expertise required to optimize. Switch to a fully managed service to efficiently support users and workload while reducing time and effort.* With Snowflake Native App Framework’s support for Snowpark Container Services,** you can bring sophisticated logic, AI/ML models and compute to your app, and boost your development time to value.\n**Snowflake Native App Framework in general availability on AWS, Azure and GCP* ***In general availability on AWS, public preview on Azure*\n[##### Goldman Sachs Makes Governed Data Collaboration a Reality Via Its Legend Snowflake Native App Read More](/en/blog/goldman-sachs-makes-governed-data-collaboration-reality/)"]}],"usage":[{"name":"sku_search","count":1}]}
