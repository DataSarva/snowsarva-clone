{"search_id":"search_a1fa496cdf054417875975b0781c643a","results":[{"url":"https://docs.snowflake.com/en/user-guide/cost-controlling-controls","title":"Cost controls for warehouses | Snowflake Documentation","excerpts":["Guides Cost & Billing Control Cost controls for warehouses\nSection Title: Cost controls for warehouses ¶\nContent:\nThis topic discusses *controls* that you can use to limit how much is spent on virtual warehouse usage. These controls help ensure that the actual cost of using virtual warehouses does not exceed expected cost.\nThese controls do not apply to cloud services and serverless features .\nSection Title: Cost controls for warehouses ¶ > Control access to warehouses ¶\nContent:\nCarefully defining who can work with warehouses and what they can do with those warehouses helps control cost by limiting compute resource\nusage to known warehouses that have cost-effective configurations. Snowflake’s granular access control allows you to grant the following privileges for warehouses:\n ... \nSection Title: Cost controls for warehouses ¶ > Limit statement queue times ¶\nContent:\n```\nSHOW PARAMETERS LIKE 'STATEMENT_QUEUED_TIMEOUT_IN_SECONDS' IN ACCOUNT ; \n SHOW PARAMETERS LIKE 'STATEMENT_QUEUED_TIMEOUT_IN_SECONDS' IN USER < username >; \n SHOW PARAMETERS LIKE 'STATEMENT_QUEUED_TIMEOUT_IN_SECONDS' IN SESSION ; \n SHOW PARAMETERS LIKE 'STATEMENT_QUEUED_TIMEOUT_IN_SECONDS' IN WAREHOUSE < warehouse_name >;\n```\nCopy\nIf you need to adjust the time limits, use one of the following commands:\n```\nALTER ACCOUNT SET STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = < number_of_seconds >; \n ALTER USER < username > SET STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = < number_of_seconds >; \n ALTER SESSION SET STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = < number_of_seconds >; \n ALTER WAREHOUSE < warehouse_name > SET STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = < number_of_seconds >;\n```\nCopy\nSection Title: Cost controls for warehouses ¶ > Use auto-suspension ¶\nContent:\nBy default, all warehouses have the auto-suspend setting enabled, which means a warehouse automatically shuts down when it is inactive\nfor a defined period of time. A suspended warehouse does not consume credits, so the warehouse only incurs cost when it is processing a\nworkload.\nRestricting users from disabling the auto-suspend setting helps to prevent an unused warehouse from wasting credits. You can use access control to allow someone to use a warehouse but also prevent them from modifying its Auto\nSuspend setting.\n**Query: Find warehouses without auto-suspend**\nUse the following query to periodically check whether the auto-suspend setting was disabled for any warehouses.\n```\nSHOW WAREHOUSES \n  ->> SELECT \"name\" AS WAREHOUSE_NAME , \n             \"size\" AS WAREHOUSE_SIZE \n        FROM $ 1 \n        WHERE IFNULL ( \"auto_suspend\" , 0 ) = 0 ;\n```\nCopy\nSection Title: Cost controls for warehouses ¶ > Use auto-suspension ¶\nContent:\nTo enable auto-suspend for the warehouses that have it turned off, sign in to Snowsight . In the navigation menu, select Compute » Warehouses . You can also use the `AUTO_SUSPEND` parameter of the ALTER WAREHOUSE command.\nSection Title: Cost controls for warehouses ¶ > Use auto-suspension ¶ > Using auto-resume with auto-suspend ¶\nContent:\nIn general, every warehouse that has auto-suspend enabled should also have auto-resume enabled. The combination of these two settings\nstops and starts a warehouse automatically as the warehouse’s workload fluctuates.\n**Query: Find warehouses without Auto Resume**\nThe following query lists the warehouses that do not have auto-resume enabled, letting you know which ones need to be modified.\n```\nSHOW WAREHOUSES \n  ->> SELECT \"name\" AS WAREHOUSE_NAME , \n             \"size\" AS WAREHOUSE_SIZE \n        FROM $ 1 \n        WHERE \"auto_resume\" = 'false' ;\n```\nCopy\nTo enable auto-resume for the warehouses that have it turned off, sign in to Snowsight . In the navigation menu, select Compute » Warehouses . You can also use the `AUTO_RESUME` parameter of the ALTER WAREHOUSE command.\n ... \nSection Title: Cost controls for warehouses ¶ > Enforce spending limits ¶\nContent:\n```\nSHOW WAREHOUSES \n  ->> SELECT \"name\" AS WAREHOUSE_NAME , \n             \"size\" AS WAREHOUSE_SIZE \n        FROM $ 1 \n        WHERE \"resource_monitor\" = 'null' ;\n```\nCopy\nNote\nThe cloud services layer of the Snowflake architecture can still incur a small cost if queries are run against a warehouse that was\nsuspended by a resource monitor.\nWas this page helpful?\nYes No\n[Visit Snowflake](https://www.snowflake.com)\n[Join the conversation](https://community.snowflake.com/s/)\n[Develop with Snowflake](https://developers.snowflake.com)\nShare your feedback\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n[Get your own certification](https://learn.snowflake.com)\nOn this page\nControl access to warehouses\nLimit query times\nLimit statement queue times\nUse auto-suspension\nEnforce spending limits\nRelated content\nManaging cost in Snowflake"]},{"url":"https://docs.snowflake.com/en/user-guide/alerts","title":"Setting up alerts based on data in Snowflake | Snowflake Documentation","excerpts":["Guides Alerts & Notifications Snowflake Alerts\nSection Title: Setting up alerts based on data in Snowflake ¶\nContent:\nThis topic explains how to set up an alert that periodically performs an action under specific conditions, based on data within\nSnowflake.\nSection Title: Setting up alerts based on data in Snowflake ¶ > Introduction ¶\nContent:\nIn some cases, you might want to be notified or take action when data in Snowflake meets certain conditions. For example, you\nmight want to receive a notification when:\nThe warehouse credit usage increases by a specified percentage of your current quota.\nThe resource consumption for your pipelines, tasks, materialized views, etc. increases beyond a specified amount.\nYour data fails to comply with a particular business rule that you have set up.\nTo do this, you can set up a Snowflake alert. A Snowflake alert is a schema-level object that specifies:\nA condition that triggers the alert (e.g. the presence of queries that take longer than a second to complete).\nThe action to perform when the condition is met (e.g. send an email notification, capture some data in a table, etc.).\nWhen and how often the condition should be evaluated (e.g. every 24 hours, every Sunday at midnight, etc.).\nSection Title: Setting up alerts based on data in Snowflake ¶ > Introduction ¶\nContent:\nFor example, suppose that you want to send an email notification when the credit consumption exceeds a certain limit for a\nwarehouse. Suppose that you want to check for this every 30 minutes. You can create an alert with the following properties:\nCondition: The credit consumption for a warehouse (the sum of the `credits_used` column in the WAREHOUSE_METERING_HISTORY view in the ACCOUNT_USAGE ) schema exceeds a specified limit.\nAction: Email the administrator.\nFrequency / schedule: Check for this condition every 30 minutes.\n ... \nSection Title: Setting up alerts based on data in Snowflake ¶ > Choosing the warehouse for the alerts ¶\nContent:\nAn alert requires a warehouse for execution. You can either use the serverless compute model or a virtual warehouse that you specify .\nSection Title: ... > Using the serverless compute model (serverless alerts) ¶\nContent:\nAlerts that use the serverless compute model called *serverless alerts* . If you use the serverless compute model, Snowflake\nautomatically resizes and scales the compute resources required for the alert. Snowflake determines the ideal size of the compute\nresources for a given run based on a dynamic analysis of statistics for the most recent previous runs of the same alert. The\nmaximum size for a serverless alert run is equivalent to an XXLARGE warehouse. Multiple workloads in your account share a common\nset of compute resources.\nBilling is similar to other serverless features (such as serverless tasks). See Understanding the costs of alerts .\nNote\nIf you are creating an alert on new data that is added infrequently, consider\nconfiguring this as a serverless alert. If you configure the alert to use a warehouse instead, even a simple action that sends\nan email notification incurs at least one minute of warehouse cost.\nSection Title: Setting up alerts based on data in Snowflake ¶ > ... > Using a virtual warehouse that you specify ¶\nContent:\nIf you want to specify a virtual warehouse, you must choose a warehouse that is sized appropriately for the SQL actions that\nare executed by the alert. For guidelines on choosing a warehouse, see Warehouse considerations .\n ... \nSection Title: Setting up alerts based on data in Snowflake ¶ > Understanding the costs of alerts ¶\nContent:\nFor serverless alerts, Snowflake bills your account based on compute resource usage. Charges are calculated based on your\ntotal usage of the resources, including cloud service usage, measured in *compute-hours* credit usage. The compute-hours cost\nchanges based on warehouse size and query runtime. For more information, see Serverless credit usage .To learn how many credits are consumed by alerts, refer to the “Serverless Feature Credit Table” in\nthe [Snowflake Service Consumption Table](https://www.snowflake.com/legal-files/CreditConsumptionTable.pdf) .To view the usage history of serverless alerts, you can:\nCall the SERVERLESS_ALERT_HISTORY function. Query the SERVERLESS_ALERT_HISTORY view . For alerts that use a virtual warehouse that you specify, Snowflake bills your account for credit usage based on the warehouse usage when an alert is running.\nSection Title: Setting up alerts based on data in Snowflake ¶ > Understanding the costs of alerts ¶\nContent:\nThis is\nsimilar to the warehouse usage for executing the same SQL statements in a client or Snowsight. Per-second credit\nbilling and warehouse auto-suspend give you the flexibility to start with larger warehouse sizes and then adjust the size to\nmatch your alert workloads."]},{"url":"https://keebo.ai/2025/02/01/proactive-suspension/","title":"Suspension Algorithm Maximizes Snowflake Savings | Keebo","publish_date":"2025-07-21","excerpts":["Section Title: See How Keebo’s Autonomous Warehouse Suspension Algorithm Maximizes Snowflake Savings\nContent:\nConfiguring auto-suspend is straightforward: use Snowflake’s SQL command to implement your settings. For example, you might use an [ALTER WAREHOUSE command](https://docs.snowflake.com/en/sql-reference/sql/alter-warehouse) specify that a warehouse should suspend 45 seconds after the last query ends:\n```\nALTER WAREHOUSE <your_warehouse_name> \n```\n```\nSET AUTO_SUSPEND = 45;\n```\nHowever, the reality is more complicated. Although Snowflake will attempt to implement this policy, you’ll end up with the warehouse suspended after 60 seconds of inactivity, not 45. The reason, per Snowflake’s documentation is, “Setting a value less than 30, or a value that is not a multiple of 30, is allowed but might not result in the expected behavior due to the 30 second poll interval for warehouse suspension.”\nSection Title: See How Keebo’s Autonomous Warehouse Suspension Algorithm Maximizes Snowflake Savings\nContent:\nIn other words, Snowflake only checks to see if a warehouse is active every 30 seconds. If your auto-suspend is set to 45 seconds, the warehouse won’t be suspended until the next 30-second interval, which is 60 seconds. As a result, the warehouse runs 15 seconds longer than you intended.\nOf course, 15 seconds of activity here and there may not seem like a big deal. But if you compound that over a longer period of time and multiple warehouses of various sizes, it adds up. Consider the following examples:\nSection Title: See How Keebo’s Autonomous Warehouse Suspension Algorithm Maximizes Snowflake Savings\nContent:\n| **WH Size** | **# of WHs** | **Avg. extra activity for each auto-suspend (sec)** | **# of auto-suspends per month** | **Total credits wasted** | **Total spend wasted (Enterprise Edition, $3.00 per credit)** |\n| XS | 20 | 15 | 450 (15 per day) | 37.5 | $112.50 |\n| M | 15 | 15 | 450 (15 per day) | 112.5 | $337.50 |\n| XL | 5 | 15 | 450 (15 per day) | 150 | $450.00 |\n ... \nSection Title: ... > How Keebo’s real-time, automated proactive warehouse suspension algorithm works\nContent:\nThe key difference between Keebo’s approach and Snowflake’s default behavior is that while Snowflake suspends warehouses in 30-second intervals, Keebo performs checks and implements suspensions within 2.5-5 seconds of your target deadline. This presents a 6-12X improvement in precision over Snowflake’s default controller.\nMost importantly, Keebo’s real-time, automated proactive warehouse suspension algorithm integrates natively with our other machine learning algorithms—warehouse optimization, performance guardrails, query routing, etc.—creating a workload-specific approach to reducing your Snowflake spend.\nHere’s an example to illustrate the benefits of real-time warehouse suspension control:\nLet’s break down the sequence of events in the example above:\n ... \nSection Title: ... > What about credits consumed by the real-time controller? Won’t that offset any of our savings?\nContent:\nIf Keebo’s real-time controller is constantly polling your warehouses to see whether they’re active or idle, doesn’t that consume Snowflake resources? The answer is yes, but with a major caveat: polling the warehouse consumes **cloud credits** , not **warehouse credits.**\nThe difference: if your [cloud credits](https://docs.snowflake.com/en/user-guide/cost-understanding-overall) don’t exceed 10% of your daily warehouse usage, then Snowflake doesn’t bill you for them. So even though the real-time controller is increasing your cloud activity, as long as it falls within that 10% threshold, you won’t run into any issues.\nAs such, we’ve structured Keebo’s real-time controller and determined that five seconds in between polls was the optimal period for reducing daily credit consumption:\nSection Title: ... > What about credits consumed by the real-time controller? Won’t that offset any of our savings?\nContent:\nIt’s impossible to predict whether we’ll exceed that 10% threshold without knowing what a user’s cloud services usage is already. However, suffice it to say that we’re able to strike a balance between optimal savings while avoiding unnecessary cloud compute, thus achieving a cost-effective solution.\nAdditionally, Keebo’s polling mechanism covers all warehouses in the account. This means the cost of running the controller doesn’t increase linearly with the number of warehouses. In other words, the cost of running the controller is practically fixed. So the more warehouses you have, the more you can save without increasing your cost.\n ... \nSection Title: ... > Related Posts\nContent:\n[](https://keebo.ai/2026/01/26/cut-snowflake-costs-with-smart-automation-tools/)"]},{"url":"https://stackoverflow.com/questions/71898098/credit-usage-of-repetitive-warehouse-suspension-resumption-in-snowflake","title":"Credit usage of repetitive warehouse suspension & resumption in Snowflake - Stack Overflow","publish_date":"2022-04-16","excerpts":["Loading…\n ... \nBring the best of human thought and AI automation together at your work. [Try for free](https://stackoverflowteams.com/teams/create/free/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams) [Learn more](https://stackoverflow.co/internal/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams)\nStack Internal\nBring the best of human thought and AI automation together at your work. [Learn more](https://stackoverflow.co/internal/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams-compact)\nSection Title: Collectives™ on Stack Overflow\nContent:\nFind centralized, trusted content and collaborate around the technologies you use most.\nLearn more about Collectives\n**Stack Internal**\nKnowledge at work\nBring the best of human thought and AI automation together at your work.\n[Explore Stack Internal](https://stackoverflow.co/internal/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams-compact-popover)\nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake\nContent:\nAsk Question\nAsked\nModified 3 years, 8 months ago\nViewed 684 times\n1\nI'm curious about the usage/credits/cost implications of resuming & suspending a warehouse multiple times within one minute (whether this happens manually or automatically).\nThe Snowflake documentation is slightly ambiguous regarding this edge case.\nFrom [Virtual Warehouse Credit Usage](https://docs.snowflake.com/en/user-guide/credits.html) :\nThe credit numbers shown here are for a full hour of usage; however, credits are billed per-second, with a 60-second (i.e. 1-minute) minimum:Each time a warehouse is started or resized to a larger size, the warehouse is billed for 1 minute’s worth of usage based on the hourly rate shown above.Stopping and restarting a warehouse within the first minute does not change the amount billed; the minimum billing charge is 1 minute.\n ... \nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > 2 Answers 2\nContent:\nDone twice, just incase as the first was sloppy. It seems to bill per minute as noted.\nShare\nImprove this answer\nFollow\nanswered Apr 16, 2022 at 23:31\nSimeon Pilgrim\n26.7k 3 3 gold badges 38 38 silver badges 53 53 bronze badges\nSign up to request clarification or add additional context in comments.\nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > Comments\nContent:\nAdd a comment\n1\nJust ran some tests, and the results are clear:\n**Each restart of a warehouse (no matter the context or when it was last suspended), will incur the 60 seconds minimum charge.**\nI tested with a Medium warehouse (4/60 credits per minute):\nResuming 6 times, minutes apart: 0.40 credits\nResuming 6 times within the same minute: 0.40 credits\nShare\nImprove this answer\nFollow\nanswered Apr 16, 2022 at 23:37\nMarco Roy\n5,513 8 8 gold badges 47 47 silver badges 71 71 bronze badges\nAdd a comment\nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > Your Answer\nContent:\nThanks for contributing an answer to Stack Overflow!\nPlease be sure to *answer the question* . Provide details and share your research!\nBut *avoid* …\nAsking for help, clarification, or responding to other answers.\nMaking statements based on opinion; back them up with references or personal experience.\nTo learn more, see our tips on writing great answers .\nDraft saved\nDraft discarded\nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > Your Answer > Sign up or\nContent:\nSign up using Google\nSign up using Email and Password\nSubmit\n ... \nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > ... > Post as a guest\nContent:\nThe Overflow Blog\n[Simulating lousy conversations: Q&A with Silvio Savarese, Chief Scientist &...](https://stackoverflow.blog/2025/12/11/simulating-lousy-conversations-q-and-a-with-silvio-savarese-chief-scientist-and-head-of-ai-research-at-salesforce/ \"Simulating lousy conversations: Q&A with Silvio Savarese, Chief Scientist & Head of AI Research at Salesforce\")\n[Interface is everything, and everything is an interface](https://stackoverflow.blog/2025/12/12/interface-is-everything-and-everything-is-an-interface/)\nFeatured on Meta\n[AI Assist is now available on Stack Overflow](https://meta.stackexchange.com/questions/415115/ai-assist-is-now-available-on-stack-overflow)\n[Native Ads coming soon to Stack Overflow and Stack Exchange](https://meta.stackexchange.com/questions/415259/native-ads-coming-soon-to-stack-overflow-and-stack-exchange)\n[Policy: Generative AI (e.g., ChatGPT) is\n ... \nSection Title: Credit usage of repetitive warehouse suspension & resumption in Snowflake > ... > Linked\nContent:\n2\") How to monitor & optimize warehouse usage for very short workloads in Snowflake"]},{"url":"https://www.reddit.com/r/snowflake/comments/1215ymo/optimize_warehouse_costs_with_this_simple_analysis/","title":"Optimize Warehouse Costs with this Simple Analysis : r/snowflake","excerpts":["[Svenska](https://www.reddit.com/r/snowflake/comments/1215ymo/optimize_warehouse_costs_with_this_simple_analysis/?tl=sv) [Español (Latinoamérica)](https://www.reddit.com/r/snowflake/comments/1215ymo/optimize_warehouse_costs_with_this_simple_analysis/?tl=es-419) [Polski](https://www.reddit.com/r/snowflake/comments/1215ymo/optimize_warehouse_costs_with_this_simple_analysis/?tl=pl)\nSection Title: Optimize Warehouse Costs with this Simple Analysis\nContent:\nI read this very informative article on \" [Essential Snowflake Cost Reduction Strategies](https://select.dev/posts/essential-snowflake-cost-reduction-strategies) \" posted by **Niall Woodward** . I was drawn to his mention of auto-suspend where he states \"Auto-suspend settings over 60 seconds result in virtual warehouses being **billable while processing no queries** .\" and he points out \" *By default, all virtual warehouses created via the user interface have* ***auto-suspend periods of 10 minutes*** *, so be careful when creating new warehouses, too*.\"\nSo I decided to look at this on a second by second basis for one business day to see how the auto-suspend impacts billable costs.\nI created a model to see how the AUTO_SUSPEND parameter would affect periods where the virtual warehouse could be \" ***billable while processing no queries*** \" and how to reduce the impact.\nSection Title: Optimize Warehouse Costs with this Simple Analysis\nContent:\nThe analysis is simple. The **QUERY_HISTORY** table contains all the queries that run on each warehouse and each cluster and includes a **START_TIME** and **END_TIME** . Generate a dataset that includes a timestamp for every second for a business day. This can be done in Python using the pandas timedelta function supplying a start time such as 8:00:00 AM and the number of seconds to reach 6:00:00 PM and a for loop. Do the same with the QUERY_HISTORY table creating a timestamp for each second between the start time and end time of each query. Compare each timestamp second from the generated dataset to each matching timestamp second for all queries in QUERY_HISTORY and count the number of queries active during that second.\n ... \nSection Title: Optimize Warehouse Costs with this Simple Analysis\nContent:\nReducing the AUTO_SUSPEND to 60 seconds reveals multiple opportunities where the warehouse sees **gaps of 1 to 3 minutes** and as much as 4 minutes for suspending the warehouse and reducing the credits associated with the **Inactive** seconds when processing no queries to **33.04 credits** , down from **50.37 credits** . The documentation on the topic of [Automating Warehouse Suspension](https://docs.snowflake.com/en/user-guide/warehouses-considerations) states however that “i *f you have regular gaps of 2 or 3 minutes between incoming queries, it doesn’t make sense to set auto-suspend to 1 or 2 minutes because your warehouse will be in a continual state of suspending and resuming* ”, so there will be a lot of work for the manager of every warehouse to keep on top of the variations that will occur throughout the day.\nSection Title: Optimize Warehouse Costs with this Simple Analysis\nContent:\n[](https://preview.redd.it/optimize-warehouse-costs-with-this-simple-analysis-v0-vz0cql73iqra1.png?width=1709&format=png&auto=webp&s=ba3cabe0c6a0b1f16aac050878d4ec076a6a5b80 \"Image from r/snowflake - 11am to 1pm AUTO_SUSPEND = 60\") 11am to 1pm AUTO_SUSPEND = 60 [](https://preview.redd.it/optimize-warehouse-costs-with-this-simple-analysis-v0-zj7hkjjy86ra1.gif?width=1312&auto=webp&s=069f22dedca95e0515c07d4eeee0f40114447caa \"Image from r/snowflake - A Closer Look at Auto-Suspend\") A Closer Look at Auto-Suspend\n ... \nSection Title: Analysis Details\nContent:\n```\nSELECT\n    WH_RUN_EXPANDED.RUN_INTERVAL_SECOND\n    ,WH_RUN_EXPANDED.WAREHOUSE_NAME\n    ,MAX(QUERY_HISTORY_EXPANDED.WAREHOUSE_SIZE) OVER(\n    ORDER BY\n        WH_RUN_EXPANDED.WAREHOUSE_NAME\n        ,RUN_INTERVAL_SECOND ROWS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING\n    ) AS CURRENT_WAREHOUSE_SIZE\n    ,MAX(QUERY_HISTORY_EXPANDED.CREDITS_PER_SECOND) OVER(\n    ORDER BY\n        WH_RUN_EXPANDED.WAREHOUSE_NAME\n        ,RUN_INTERVAL_SECOND ROWS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING\n    ) AS CURRENT_WAREHOUSE_CREDIT\n    ,WH_RUN_EXPANDED.START_TIME AS WAREHOUSE_START_TIME\n    ,WH_RUN_EXPANDED.END_TIME AS WAREHOUSE_END_TIME\n    --\n    -- The left table is the result set from each interval second between\n    -- when the warehouse completed a resume and when the warehouse completed\n    -- a suspension."]},{"url":"https://medium.com/snowflake/snowflake-native-alerts-24e3d8b3b31e","title":"Snowflake Native Alerts. Set alerts and get notified | by Prathamesh Nimkar | Snowflake Builders Blog: Data Engineers, App Developers, AI, & Data Science | Medium","publish_date":"2023-02-09","excerpts":["Section Title: **Snowflake Native Alerts** > Set alerts and get notified\nContent:\nOur team at Snowflake has decided that we need to enable MFA on all users with AccountAdmin role on all our demo accounts. It is important to note that [users cannot currently be automatically enrolled into MFA](https://docs.snowflake.com/en/user-guide/security-mfa.html:~:text=MFA%20is%20enabled%20on%20a%20per%2Duser%20basis%3B%20however%2C%20at%20this%20time%2C%20users%20are%20not%20automatically%20enrolled%20in%20MFA.%20To%20use%20MFA%2C%20users%20must%20enroll%20themselves.) , but need to enable it via a self-service process. Across hundreds of users within a demo account, this can be a very tedious thing to track. So, how do we track this enrolment?\nSection Title: **Snowflake Native Alerts** > Introducing Snowflake Native Alerts\nContent:\nSnowflake users can now set up alerts and get notified when specific conditions are met. Please note this feature is currently in Private Preview. (Update: as of Feb 8, 2023 — it is **Public** Preview).\nLet’s take a quick look at the syntax:\n```\nCREATE [ OR REPLACE ] ALERT [ IF NOT EXISTS ] <alert name>  \n  WAREHOUSE = <warehouse name>  \n  SCHEDULE = '{ <num> MINUTE | USING CRON <expr> <time zone> }'  \n-- Condition    \nIF( EXISTS(  \n    <condition statement>  \n))  \n-- Action  \n  THEN  \n    <action statement>  \n;\n```\nAn alert is a schema-level object that specifies:\nSection Title: **Snowflake Native Alerts** > Introducing Snowflake Native Alerts\nContent:\nA **condition** that triggers an alert, for instance, a query running over two hours or in this case, users that are not using MFA when signing into Snowflake.\nA **schedule** for how often a condition must be evaluated, for instance, every 24 hours or every minute, every Sunday at midnight, etc.\nAn **action** for what to do when the condition is satisfied, for instance, capture data in a table or send an email notification.\nComing back to our use-case — we want to create an alert for users with AccountAdmin role who are not using MFA when logging into Snowflake. This condition needs to be run every day (however, for the purposes of this exercise, I will choose the schedule to be every minute). And basis the results, we need to take some action, which will be to send an email to the admin — me.\n ... \nSection Title: **Snowflake Native Alerts** > Introducing Snowflake Native Alerts > The Alert\nContent:\n```\n-- If you wish to grant the privileges to another role  \n-- Perform the following steps using AccountAdmin role  \nCREATE ROLE <alert_role>;  \nGRANT ROLE <alert_role> TO USER <alert_user>;  \nGRANT EXECUTE ALERT ON ACCOUNT TO ROLE <alert_role>;  \n  \n-- You may also require USAGE privileges on the database and warehouse  \n-- Using schema owner role, grant the following permissions to alert_role  \nGRANT CREATE ALERT ON SCHEMA <schema_name> TO ROLE <alert_role>;  \n-- or  \nGRANT OWNERSHIP ON SCHEMA <schema_name> TO ROLE <alert_role>;  \n  \n-- if you have performed the above steps in this snippet  \nUSE ROLE <alert_role>;  \n-- I am using AccountAdmin role, hence I will be ignoring the above steps  \n  \n-- Let's create the alert now  \nCREATE OR REPLACE ALERT myalert  \n    WAREHOUSE = compute_wh  \n    SCHEDULE = '1 minute'  \n    IF  \n        (EXISTS(  \n                  SELECT  \n                      event_timestamp,\n ... \nSection Title: **Snowflake Native Alerts** > Monitoring & Managing your alerts\nContent:\n```\n+-------------------------------+---------+-------------------+-------------+--------------+---------+------------+----------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+  \n|          created_on           |  name   |   database_name   | schema_name |    owner     | comment | warehouse  | schedule |   state   |\n ... \nSection Title: **Snowflake Native Alerts** > Cost\nContent:\nTaking you back to the initial syntax we had:\n```\nCREATE [ OR REPLACE ] ALERT [ IF NOT EXISTS ] <alert name>  \n  WAREHOUSE = <warehouse name>  \n  SCHEDULE = '{ <num> MINUTE | USING CRON <expr> <time zone> }'  \n-- Condition    \nIF( EXISTS(  \n    <condition statement>  \n))  \n-- Action  \n  THEN  \n    <action statement>  \n;\n```\nYou are only charged based on the compute used through the virtual warehouse for the execution of your condition and action queries.\nYou are **not** charged for sending the email."]},{"url":"https://docs.snowflake.com/en/sql-reference/sql/alter-warehouse","title":"ALTER WAREHOUSE - Snowflake Documentation","excerpts":["Section Title: ALTER WAREHOUSE ¶ > Properties/parameters ¶\nContent:\n`_name_`\nSpecifies the identifier for the warehouse to alter. If the identifier contains spaces or special characters, the entire string must be enclosed\nin double quotes. Identifiers enclosed in double quotes are also case-sensitive.\nFor more details, see Identifier requirements .\nNote\nA warehouse identifier is required or optional depending on the following:\nSection Title: ALTER WAREHOUSE ¶ > Properties/parameters ¶\nContent:\nWhen resuming/suspending a warehouse or aborting queries for a warehouse, if a warehouse is currently in use for the session, the identifier\ncan be omitted. When renaming a warehouse or performing any other operations on a warehouse, the identifier must be specified. `{ SUSPEND | RESUME [ IF SUSPENDED ] }`\nSpecifies the action to perform on the warehouse:\n`SUSPEND` removes all compute nodes from a warehouse and puts the warehouse into a ‘Suspended’ state. `RESUME [ IF SUSPENDED ]` brings a suspended warehouse to a usable ‘Running’ state by provisioning compute resources.The optional `IF SUSPENDED` clause specifies whether the ALTER WAREHOUSE command completes successfully when resuming a warehouse that\nis already running:\nIf omitted, the command fails and returns an error if the warehouse is already running. If specified, the command completes successfully regardless of whether the warehouse is running.\nSection Title: ALTER WAREHOUSE ¶ > Properties/parameters ¶\nContent:\n`ABORT ALL QUERIES`\nAborts all the queries currently running or queued on the warehouse. `RENAME TO _new_name_`\nSpecifies a new identifier for the warehouse; must be unique for your account.\n ... \nSection Title: ALTER WAREHOUSE ¶ > Properties/parameters ¶\nContent:\nValid values :\n`1` to the value of MAX_CLUSTER_COUNT. The upper limit for MAX_CLUSTER_COUNT varies depending on the warehouse size.\nMIN_CLUSTER_COUNT must be equal to or less than MAX_CLUSTER_COUNT:\nIf both parameters are equal, the warehouse runs in Maximized mode.\nIf MIN_CLUSTER_COUNT is less than MAX_CLUSTER_COUNT, the warehouse runs in Auto-scale mode.\nFor more information, including the upper limit for each warehouse size, see Multi-cluster warehouses .\nDefault :\n`1`\n`SCALING_POLICY = { STANDARD | ECONOMY }`\nObject parameter that specifies the policy for automatically starting and shutting down clusters in a multi-cluster warehouse\nrunning in Auto-scale mode.\nFor a detailed description of this parameter, see Setting the scaling policy for a multi-cluster warehouse .\n`AUTO_SUSPEND = { _num_ | NULL }`\nSpecifies the number of seconds of inactivity after which a warehouse is automatically suspended.\nSection Title: ALTER WAREHOUSE ¶ > Properties/parameters ¶\nContent:\nValid values :\nAny integer `0` or greater, or `NULL` :\nThe background process that suspends a warehouse runs approximately every 30 seconds and therefore, the setting for\nthis property isn’t intended for enabling precise control over warehouse suspension.\nSetting a value less than 30, or a value that isn’t a multiple of 30, is allowed but might not result in the expected\nbehavior due to the 30 second poll interval for warehouse suspension.\nSetting a `0` or `NULL` value means the warehouse never suspends.\nDefault :\n`600` (the warehouse suspends automatically after 10 minutes of inactivity)\nImportant\nSetting `AUTO_SUSPEND` to `0` or `NULL` is not recommended, unless your query workloads require a continually running\nwarehouse. Note that this can result in significant consumption of credits (and corresponding charges), particularly for larger warehouses.\nFor more details, see Warehouse considerations .\n ... \nSection Title: ALTER WAREHOUSE ¶ > Billing and pricing ¶\nContent:\nFor information on Snowpark-optimized warehouse credit consumption, see `Table 1` in the [Snowflake Service Consumption Table](https://www.snowflake.com/legal-files/CreditConsumptionTable.pdf) .\nFor information about billing and pricing considerations for interactive warehouses, see Cost and billing considerations .\nTip\nFor information about cost implications of changing the RESOURCE_CONSTRAINT property, see considerations for changing RESOURCE_CONSTRAINT while a warehouse is running or suspended ."]},{"url":"https://docs.snowflake.com/en/developer-guide/native-apps/ui-consumer-about","title":"Use and manage Snowflake Native Apps as a consumer | Snowflake Documentation","excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n/\nGet started\nGuides\nDeveloper\nReference\nRelease notes\nTutorials\n[Status](https://status.snowflake.com)\nOverview\nSnowflake Horizon Catalog\nApplications and tools for connecting to Snowflake\nVirtual warehouses\nDatabases, Tables, & Views\nData types\nData Integration\nSnowflake Openflow\nApache Iceberg™\nApache Iceberg™ Tables\nSnowflake Open Catalog\nData engineering\nData loading\nDynamic Tables\nStreams and Tasks\ndbt Projects on Snowflake\nData Unloading\nStorage Lifecycle Policies\nMigrations\nQueries\nListings\nCollaboration\nSnowflake AI & ML\nSnowflake Postgres\nAlerts & Notifications\nSecurity\nData Governance\nPrivacy\nOrganizations & Accounts\nBusiness continuity & data recovery\nPerformance optimization\nCost & Billing\nGuides Listings Snowflake Marketplace listings Use applications as a consumer\nSection Title: Use and manage Snowflake Native Apps as a consumer ¶\nContent:\nFeature — Generally Available\nThe Snowflake Native App Framework is generally available on supported cloud platforms. For additional information, see Support for private connectivity, VPS, and government regions .\nConsumers can discover and install apps published to the Snowflake Marketplace or shared\nusing private listings.\nThe Native Apps Framework allows consumers to perform the following:\nUse the app by accessing data via Snowflake worksheets.\nView Streamlit apps created by the provider.\nGrant privileges on the app object to users in your organization.\nAssociate references that allow access to object required by the app.\nShare event and logging information with the provider.\nSection Title: ... > Consumer workflow for working with a Snowflake Native App ¶\nContent:\nThe following workflow is what consumers typically do when working with apps:\nBecome a consumer .\nInstall an app from a listing .\nReview the access requests from the app .This includes granting the privileges and creating references required by the app.\n(Optional) Set up an event table to enable logging and\nevent sharing for an app.\nSection Title: Use and manage Snowflake Native Apps as a consumer ¶ > Apps installed from trial listings ¶\nContent:\nWhen the trial period ends for an app installed from a trial listing, Snowflake\nautomatically suspends the app unless the consumer converts the app to a full listing.\nWhen the trial period is about to expire, Snowflake sends an email notification before the app is\nsuspended.\nSnowflake recommends that consumers convert the trial listing into a full listing before the\ntrial period expires. After the app is suspended it may not be possible to resume the app. For example,\nif the provider removes the current version of the app or there are unresolved state changes, the\napp cannot be resumed.\nWhen an app installed from a trial listing is suspended, all data written inside the app is retained\nas long as the consumer does not delete the app.\nSection Title: Use and manage Snowflake Native Apps as a consumer ¶ > Apps installed from trial listings ¶\nContent:\nIf the app installed from a trial listing creates objects in the consumer account outside\nthe application object, consumers can retain these objects after the app is uninstalled. However, they\nmust transfer ownership of the objects before uninstalling the app. See Uninstall a Snowflake Native App .\nWas this page helpful?\nYes No\n[Visit Snowflake](https://www.snowflake.com)\n[Join the conversation](https://community.snowflake.com/s/)\n[Develop with Snowflake](https://developers.snowflake.com)\nShare your feedback\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n[Get your own certification](https://learn.snowflake.com)\nOn this page\nConsumer workflow for working with a Snowflake Native App\nApps installed from trial listings\nRelated content\nInstall an app from a listing\nManage apps\nAllow access to a consumer account\nSet up event tracing for an app\nLanguage: **English**\nSection Title: Use and manage Snowflake Native Apps as a consumer ¶ > Apps installed from trial listings ¶\nContent:\nEnglish\nFrançais\nDeutsch\n日本語\n한국어\nPortuguês"]}],"usage":[{"name":"sku_search","count":1}]}
