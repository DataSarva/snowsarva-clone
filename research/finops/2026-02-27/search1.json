{
  "search_id": "search_563f2d14652a4967b829d89825de65e8",
  "results": [
    {
      "url": "https://docs.snowflake.com/en/sql-reference/functions/warehouse_metering_history",
      "title": "WAREHOUSE_METERING_HISTORY | Snowflake Documentation",
      "excerpts": [
        "Reference Function and stored procedure reference Table WAREHOUSE\\_METERING\\_HISTORY\n\nCategories:\n    Information Schema , Table functions\n\n# WAREHOUSE\\_METERING\\_HISTORY \u00b6\n\nThis table function can be used in queries to return the hourly credit usage for a single warehouse (or all the warehouses in your account) within a specified date range.\n\nNote\n\nThis function returns credit usage within the last 6 months. However, if you are querying multiple warehouses over a lengthy time period,\nit might not return a complete data set. To obtain a complete data set, use the ACCOUNT\\_USAGE view instead.\n\nSee also:\n    WAREHOUSE\\_LOAD\\_HISTORY\n\n## Syntax \u00b6\n\n```\nWAREHOUSE_METERING_HISTORY ( \n      DATE_RANGE_START => <constant_expr> \n      [ , DATE_RANGE_END => <constant_expr> ] \n      [ , WAREHOUSE_NAME => '<string>' ] )\n```\n\nCopy\n\n## Arguments \u00b6\n\n**Required:**\n\n`DATE_RANGE_START => _constant_expr_`\n    The starting date, within the last 6 months, for which warehouse usage is returned.\n\n**Optional:**\n\n`DATE_RANGE_END => _constant_expr_`\n    The ending date, within the last 6 months, for which warehouse usage is returned.\n\nDefault: CURRENT\\_DATE is used. `WAREHOUSE_NAME => ' _string_ '`\n    The name of the warehouse to retrieve credit usage for. Note that the warehouse name must be enclosed in single quotes. Also, if the warehouse name any spaces, mixed-case characters,\nor special characters, the name must be double-quoted within the single quotes (e.g. `'\"My Warehouse\"'` vs `'mywarehouse'` ).\n\nDefault: All warehouses that ran during the specified date range.\n\n## Usage notes \u00b6\n\n* Returns results only for the ACCOUNTADMIN role or any role that has been explicitly granted the MONITOR USAGE global privilege.\n* When calling an Information Schema table function, the session must have an INFORMATION\\_SCHEMA schema in use or the function name must be fully-qualified. For more details, see Snowflake Information Schema .\n* The order and structure of the arguments depends on whether the argument keywords (e.g. `DATE_RANGE_START` ) are included:\n  \n    + The keywords are not required if the arguments are specified in order.\n    + If the argument keywords are included, the arguments can be specified in any order.\n\n## Output \u00b6\n\nThe function returns the following columns, ordered by WAREHOUSE\\_NAME and START\\_TIME:\n\n|Column Name |Data Type |Description |\n| --- | --- | --- |\n|START\\_TIME |TIMESTAMP\\_LTZ |The beginning of the hour in which this warehouse usage took place. |\n|END\\_TIME |TIMESTAMP\\_LTZ |The end of the hour in which this warehouse usage took place. |\n|WAREHOUSE\\_NAME |VARCHAR |Name of the warehouse. |\n|CREDITS\\_USED |NUMBER |Number of credits billed for this warehouse in this hour. |\n|CREDITS\\_USED\\_COMPUTE |NUMBER |Number of credits used for the warehouse in the hour. |\n|CREDITS\\_USED\\_CLOUD\\_SERVICES |NUMBER |Number of credits used for cloud services in the hour. |\n\n## Examples \u00b6\n\nRetrieve hourly warehouse usage over the past 10 days for all warehouses that ran during this time period:\n\n> ```\n> select * \n>  from table ( information_schema . warehouse_metering_history ( dateadd ( 'days' ,- 10 , current_date ())));\n> ```\n> \n> Copy\n> \n> \n\nRetrieve hourly warehouse usage for the `testingwh` warehouse on a specified date:\n\n> ```\n> select * \n>  from table ( information_schema . warehouse_metering_history ( '2017-10-23' , '2017-10-23' , 'testingwh' ));\n> ```\n> \n> Copy\n> \n>\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\nShare your feedback\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\nOn this page\n\n1. Syntax\n2. Arguments\n3. Usage notes\n4. Output\n5. Examples"
      ]
    },
    {
      "url": "https://docs.snowflake.com/en/sql-reference/account-usage/warehouse_metering_history",
      "title": "WAREHOUSE_METERING_HISTORY view | Snowflake Documentation",
      "excerpts": [
        "Reference General reference SNOWFLAKE database Account Usage WAREHOUSE\\_METERING\\_HISTORY\n\nSchemas:\n    ACCOUNT\\_USAGE , READER\\_ACCOUNT\\_USAGE\n\n# WAREHOUSE\\_ METERING\\_ HISTORY view \u00b6\n\nThis Account Usage view can be used to return the hourly credit usage for a single warehouse (or all the warehouses in your account) within the last 365 days (1 year).\n\n## Columns \u00b6\n\n|Column Name |Data Type |Description |\n| --- | --- | --- |\n|READER\\_ACCOUNT\\_NAME |VARCHAR |Name of the reader account where the warehouse usage took place. Column only included in view in READER\\_ACCOUNT\\_USAGE schema. |\n|START\\_TIME |TIMESTAMP\\_LTZ |The date and beginning of the hour (in the local time zone) in which the warehouse usage took place. |\n|END\\_TIME |TIMESTAMP\\_LTZ |The date and end of the hour (in the local time zone) in which the warehouse usage took place. |\n|WAREHOUSE\\_ID |NUMBER |Internal/system-generated identifier for the warehouse. |\n|WAREHOUSE\\_NAME |VARCHAR |Name of the warehouse. |\n|CREDITS\\_USED |NUMBER |Total number of credits used for the warehouse in the hour. This is a sum of CREDITS\\_USED\\_COMPUTE and CREDITS\\_USED\\_CLOUD\\_SERVICES. This value does not take into account the adjustment for cloud services , and may therefore be greater than the credits that are billed. To determine how many credits were actually billed, run queries against the METERING\\_DAILY\\_HISTORY view . |\n|CREDITS\\_USED\\_COMPUTE |NUMBER |Number of credits used for the warehouse in the hour. |\n|CREDITS\\_USED\\_CLOUD\\_SERVICES |NUMBER |Number of credits used for cloud services in the hour. |\n|CREDITS\\_ATTRIBUTED\\_COMPUTE\\_QUERIES |NUMBER |Number of credits attributed to queries in the hour. . . Includes only the credit usage for query execution and doesn\u2019t include warehouse idle time usage. |\n\n## Usage notes \u00b6\n\n* In the ACCOUNT\\_USAGE schema, latency for the view is up to 180 minutes (3 hours), except for the CREDITS\\_USED\\_CLOUD\\_SERVICES column. Latency for\n  CREDITS\\_USED\\_CLOUD\\_SERVICES is up to 6 hours.\n* In the READER\\_ACCOUNT\\_USAGE schema, latency for the view is up to 24 hours.\n* Warehouse idle time is not included in the CREDITS\\_ATTRIBUTED\\_COMPUTE\\_QUERIES column.\n  \n  See Examples for a query that calculates the cost of idle time.\n\n* If you want to reconcile the data in this view with a corresponding view in the ORGANIZATION USAGE schema , you must first set the timezone of the session to UTC. Before querying the Account Usage view, execute:\n  \n  > ```\n  > ALTER SESSION SET TIMEZONE = UTC ;\n  > ```\n  > \n  > Copy\n  > \n  >\n\n## Examples \u00b6\n\nFor example, to determine the cost of idle time for each warehouse for the last 10 days, execute the following statement:\n\n```\nSELECT \n  ( SUM ( credits_used_compute ) - \n    SUM ( credits_attributed_compute_queries )) AS idle_cost , \n  warehouse_name \n FROM SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n WHERE start_time >= DATEADD ( 'days' , - 10 , CURRENT_DATE ()) \n  AND end_time < CURRENT_DATE () \n GROUP BY warehouse_name ;\n```\n\nCopy\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\nShare your feedback\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\nOn this page\n\n1. Columns\n2. Usage notes\n3. Examples\n\n## Snowflake's Use of Cookies\n\n## Privacy Preference Center\n\nYour Opt Out Preference Signal is Honored\n\n* ### Your Privacy\n* ### Strictly Necessary Cookies\n* ### Performance Cookies\n* ### Functional Cookies\n* ### Targeting Cookies\n\n#### Your Privacy\n\nWhen you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.  \n[More information](https://cookiepedia.co.uk/giving-consent-to-cookies)\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\n\nCookies Details\u200e\n\n#### Performance Cookies\n\nPerformance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site.    All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.\n\nCookies Details\u200e\n\n#### Functional Cookies\n\nFunctional Cookies\n\nThese cookies enable the website to provide enhanced functionality and personalisation. They may be set by us or by third party providers whose services we have added to our pages.    If you do not allow these cookies then some or all of these services may not function properly.\n\nCookies Details\u200e\n\n#### Targeting Cookies\n\nTargeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly identifiable personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.\n\nCookies Details\u200e\n\n### Cookie List\n\nConsent Leg.Interest\n\ncheckbox label label\n\ncheckbox label label\n\ncheckbox label label\n\nClear\n\ncheckbox label label\n\nApply Cancel\n\nConfirm My Choices\n\nAllow All\n\n[](https://www.onetrust.com/products/cookie-consent/)"
      ]
    },
    {
      "url": "https://docs.snowflake.com/en/sql-reference/account-usage",
      "title": "Account Usage | Snowflake Documentation",
      "excerpts": [
        "Reference General reference SNOWFLAKE database Account Usage\n\n# Account Usage \u00b6\n\nIn the SNOWFLAKE database, the ACCOUNT\\_USAGE and READER\\_ACCOUNT\\_USAGE schemas enable querying object metadata, as well as historical\nusage data, for your account and all reader accounts (if any) associated with the account.\n\n## Overview of Account Usage schemas \u00b6\n\nACCOUNT\\_USAGE :\n    Views that display object metadata and usage metrics for your account.\n\nIn general, these views mirror the corresponding views and table functions in the Snowflake Snowflake Information Schema , but\nwith the following differences:\n\n* Records for dropped objects included in each view.\n* Longer retention time for historical usage data.\n* Data latency.\n\nFor more details, see Differences Between Account Usage and Information Schema (in this topic). For more details about each\nview, see ACCOUNT\\_USAGE Views (in this topic).\nREADER\\_ACCOUNT\\_USAGE :\n    Views that display object metadata and usage metrics for all the reader accounts that have been created for\nyour account (as a Secure Data Sharing provider).\n\nThese views are a small subset of the ACCOUNT\\_USAGE views that apply to reader accounts. Also, each view in this schema contains an\nadditional `READER_ACCOUNT_NAME` column for filtering results by reader account.\n\nFor more details about each view, see READER\\_ACCOUNT\\_USAGE Views (in this topic).\n\nNote that these views are empty if no reader accounts have been created for your account.\n\n## Differences between Account Usage and Information Schema \u00b6\n\nThe Account Usage views and the corresponding views (or table functions) in the Snowflake Information Schema utilize identical\nstructures and naming conventions, but with some key differences, as described in this section:\n\n|Difference |Account Usage |Information Schema |\n| --- | --- | --- |\n|Includes dropped objects |Yes |No |\n|Latency of data |From 45 minutes to 3 hours (varies by view) |None |\n|Retention of historical data |1 Year |From 7 days to 6 months (varies by view/table function) |\n\nFor more details, see the following sections.\n\n### Dropped object records \u00b6\n\nAccount usage views include records for all objects that have been dropped. Many of the views for object types contain an\nadditional `DELETED` column that displays the timestamp when the object was dropped.\n\nIn addition, because objects can be dropped and recreated with the same name, to differentiate between objects records that have the\nsame name, the account usage views include ID columns, where appropriate, that display the internal IDs generated and assigned to\neach record by the system.\n\nIf a column for an object name (e.g. the `TABLE_NAME` column) is NULL, that object has been dropped. In this case, the\ncolumns for the names and IDs of the parent objects (e.g. the `DATABASE_NAME` and `SCHEMA_NAME` columns) are also\nNULL.\n\nNote that in some views, the column for the object name might still contain the name of the object, even if the object has been\ndropped.\n\n### Data latency \u00b6\n\nDue to the process of extracting the data from Snowflake\u2019s internal metadata store, the account usage views have some natural latency:\n\n* For most of the views, the latency is 2 hours (120 minutes).\n* For the remaining views, the latency varies between 45 minutes and 3 hours.\n\nFor details, see the list of views for each schema (in this topic). Also, note that these are all maximum time lengths; the actual\nlatency for a given view when the view is queried may be less.\n\nIn contrast, views/table functions in the Snowflake Information Schema do not have any latency.\n\n### Historical data retention \u00b6\n\nCertain account usage views provide historical usage metrics. The retention period for these views is 1 year (365 days).\n\nIn contrast, the corresponding views and table functions in the Snowflake Information Schema have much shorter retention periods,\nranging from 7 days to 6 months, depending on the view.\n\n## ACCOUNT\\_USAGE views \u00b6\n\nThe ACCOUNT\\_USAGE schema contains the following views:\n\n|View |Type |Latency <sup>[1]</sup> |Edition <sup>[3]</sup> |Notes |\n| --- | --- | --- | --- | --- |\n|ACCESS\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|AGGREGATE\\_ACCESS\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|AGGREGATE\\_QUERY\\_HISTORY |Historical |3 hours | | |\n|AGGREGATION\\_POLICIES |Object |2 hours | | |\n|ALERT\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|ANOMALIES\\_DAILY |Historical |3 hours | |Data retained for 1 year. |\n|APPLICATION\\_CONFIGURATIONS |Object |3 hours | |Data retained for 1 year. |\n|APPLICATION\\_CONFIGURATION\\_VALUE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|APPLICATION\\_DAILY\\_USAGE\\_HISTORY |Historical |24 hours | |Data retained for 1 year. |\n|APPLICATION\\_SPECIFICATION\\_STATUS\\_HISTORY |Historical |1 hour | |Data retained for 1 year. |\n|APPLICATION\\_SPECIFICATIONS |Historical |1 hour | |Data for deleted app specifications is retained for 1 year. |\n|ARCHIVE\\_STORAGE\\_DATA\\_RETRIEVAL\\_USAGE\\_HISTORY |Historical |1 hour | |Data retained for 1 year. |\n|AUTOMATIC\\_CLUSTERING\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|BACKUP\\_OPERATION\\_HISTORY |Historical |6 hours | |Data retained for 1 year. |\n|BACKUP\\_POLICIES |Object |6 hours | | |\n|BACKUP\\_SETS |Object |6 hours | | |\n|BACKUP\\_STORAGE\\_USAGE |Historical |6 hours | |Data retained for 1 year. |\n|BACKUPS |Object |6 hours | | |\n|BLOCK\\_STORAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|BLOCK\\_STORAGE\\_SNAPSHOTS |Object |3 hours | | |\n|CATALOG\\_LINKED\\_DATABASE\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|CLASS\\_INSTANCES |Object |3 hours | |Data retained for 1 year. |\n|CLASSES |Object |3 hours | |Data retained for 1 year. |\n|COLUMN\\_QUERY\\_PRUNING\\_HISTORY |Historical |4 hours | |Data retained for 1 year. |\n|COLUMNS |Object |90 minutes | | |\n|COMPLETE\\_TASK\\_GRAPHS |Historical |45 minutes | |Data retained for 1 year. |\n|COMPUTE\\_POOLS |Historical |3 hours | |Data retained for 1 year. |\n|CONTACT\\_REFERENCES |Object |3 hours | | |\n|CONTACTS |Object |3 hours | | |\n|COPY\\_FILES\\_HISTORY |Historical | | |Data retained for 1 year. |\n|COPY\\_HISTORY |Historical |2 hours <sup>[2]</sup> | |Data retained for 1 year. |\n|CORTEX\\_AGENT\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_AISQL\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_ANALYST\\_USAGE\\_HISTORY |Historical |One hour | |Data retained for 1 year. |\n|CORTEX\\_DOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY |Historical |1 hour | |Data retained for 1 year. |\n|CORTEX\\_FINE\\_TUNING\\_USAGE\\_HISTORY |Historical |1 hour | |Data retained for 1 year. |\n|CORTEX\\_FUNCTIONS\\_QUERY\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_FUNCTIONS\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_PROVISIONED\\_THROUGHPUT\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_REST\\_API\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|CORTEX\\_SEARCH\\_DAILY\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|CORTEX\\_SEARCH\\_SERVING\\_USAGE\\_HISTORY |Historical |1 hour | |Data retained for 1 year. |\n|CREDENTIALS |Object |2 hours | | |\n|DATA\\_CLASSIFICATION\\_LATEST |Object |3 hours |Enterprise Edition (or higher) |Data retained for as long as the table exists. |\n|DATA\\_METRIC\\_FUNCTION\\_EXPECTATIONS |Object |30 minutes |Enterprise Edition (or higher) | |\n|DATA\\_METRIC\\_FUNCTION\\_REFERENCES |Object |3 hours |Enterprise Edition (or higher) | |\n|DATA\\_QUALITY\\_MONITORING\\_USAGE\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|DATABASES |Object |3 hours | | |\n|DATABASE\\_REPLICATION\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|DATABASE\\_STORAGE\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|DATA\\_TRANSFER\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|DOCUMENT\\_AI\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|DYNAMIC\\_TABLE\\_REFRESH\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|ELEMENT\\_TYPES |Object |90 minutes | | |\n|EVENT\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|EXTERNAL\\_ACCESS\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|FIELDS |Object |90 minutes | | |\n|FILE\\_FORMATS |Object |2 hours | | |\n|FUNCTIONS |Object |2 hours | | |\n|GRANTS\\_TO\\_ROLES |Object |2 hours | | |\n|GRANTS\\_TO\\_SHARES |Object |3 hours | | |\n|GRANTS\\_TO\\_USERS |Object |2 hours | | |\n|HYBRID\\_TABLES |Object |3 hours | | |\n|HYBRID\\_TABLE\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|ICEBERG\\_STORAGE\\_OPTIMIZATION\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|INDEX\\_COLUMNS |Object |3 hours | | |\n|INDEXES |Object |3 hours | | |\n|INGRESS\\_NETWORK\\_ACCESS\\_HISTORY |Historical |4 hours | |Data retained for 1 year. |\n|INTERNAL\\_DATA\\_TRANSFER\\_HISTORY |Historical |3 hours | | |\n|INTERNAL\\_STAGE\\_NETWORK\\_ACCESS\\_HISTORY |Historical |6 hours | |Data retained for 1 year. |\n|JOIN\\_POLICIES |Object |2 hours | | |\n|LISTINGS |Object |3 hours | | |\n|LOAD\\_HISTORY |Historical |90 minutes <sup>[2]</sup> | |Data retained for 1 year. |\n|LOCK\\_WAIT\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|LOGIN\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|MASKING\\_POLICIES |Object |2 hours | | |\n|MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|METERING\\_DAILY\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|METERING\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|NETWORK\\_POLICIES |Object |2 hours | | |\n|NETWORK\\_RULE\\_REFERENCES |Object |2 hours | | |\n|NETWORK\\_RULES |Object |2 hours | | |\n|NOTEBOOKS\\_CONTAINER\\_RUNTIME\\_HISTORY |Historical |3 hours | | |\n|OBJECT\\_ACCESS\\_REQUEST\\_HISTORY |Historical |3 hours | | |\n|OBJECT\\_DEPENDENCIES |Historical |3 hours | | |\n|ONLINE\\_FEATURE\\_TABLE\\_REFRESH\\_HISTORY |Historical |3 hours | | |\n|OPENFLOW\\_USAGE\\_HISTORY |Historical |3 hours | | |\n|OUTBOUND\\_PRIVATELINK\\_ENDPOINTS |Object |2 hours |Business Critical (or higher) |Data for deleted endpoints is retained for 1 year. |\n|PASSWORD\\_POLICIES |Object |2 hours | | |\n|PIPES |Object |2 hours | | |\n|PIPE\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|POLICY\\_REFERENCES |Object |2 hours | | |\n|POSTGRES\\_STORAGE\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|PRIVACY\\_BUDGETS |Object |24 hours |Enterprise Edition (or higher) | |\n|PRIVACY\\_POLICIES |Object |2 hours |Enterprise Edition (or higher) | |\n|PROCEDURES |Object |2 hours | | |\n|PROJECTION\\_POLICIES |Object |2 hours | | |\n|QUERY\\_ACCELERATION\\_ELIGIBLE |Historical |3 hours | |Data retained for 1 year. |\n|QUERY\\_ACCELERATION\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|QUERY\\_ATTRIBUTION\\_HISTORY |Historical |8 hours | |Data retained for 1 year. |\n|QUERY\\_HISTORY |Historical |45 minutes | |Data retained for 1 year. |\n|QUERY\\_INSIGHTS |Historical | | |Data retained for 1 year. |\n|REFERENTIAL\\_CONSTRAINTS |Object |2 hours | | |\n|REPLICATION\\_GROUP\\_REFRESH\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|REPLICATION\\_GROUP\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|REPLICATION\\_GROUPS |Object |2 hours | | |\n|REPLICATION\\_USAGE\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|RESOURCE\\_MONITORS |Object |2 hours | | |\n|ROLES |Object |2 hours | | |\n|ROW\\_ACCESS\\_POLICIES |Object |2 hours | | |\n|SCHEMATA |Object |2 hours | | |\n|SEARCH\\_OPTIMIZATION\\_BENEFITS |Historical |6 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|SEARCH\\_OPTIMIZATION\\_HISTORY |Historical |3 hours |Enterprise Edition (or higher) |Data retained for 1 year. |\n|SECRETS |Object |2 hours | | |\n|SEMANTIC\\_DIMENSIONS |Object |2 hours | | |\n|SEMANTIC\\_FACTS |Object |2 hours | | |\n|SEMANTIC\\_METRICS |Object |2 hours | | |\n|SEMANTIC\\_RELATIONSHIPS |Object |2 hours | | |\n|SEMANTIC\\_TABLES |Object |2 hours | | |\n|SEMANTIC\\_VIEWS |Object |2 hours | | |\n|SEQUENCES |Object |2 hours | | |\n|SERVERLESS\\_ALERT\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|SERVERLESS\\_TASK\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|SERVICES |Object |3 hours | | |\n|SESSION\\_POLICIES |Object |2 hours | | |\n|SESSIONS |Historical |3 hours | |Data retained for 1 year. |\n|SHARES |Object |3 hours | | |\n|SNAPSHOT\\_OPERATION\\_HISTORY |Historical |6 hours | |Data retained for 1 year. This view is deprecated. Use the BACKUP\\_OPERATION\\_HISTORY view instead. |\n|SNAPSHOT\\_POLICIES |Object |6 hours | |This view is deprecated. Use the BACKUP\\_POLICIES view instead. |\n|SNAPSHOT\\_SETS |Object |6 hours | |This view is deprecated. Use the BACKUP\\_SETS view instead. |\n|SNAPSHOT\\_STORAGE\\_USAGE |Historical |6 hours | |Data retained for 1 year. This view is deprecated. Use the BACKUP\\_STORAGE\\_USAGE view instead. |\n|SNAPSHOTS |Object |6 hours | |This view is deprecated. Use the BACKUPS view instead. |\n|SNOWFLAKE\\_INTELLIGENCE\\_USAGE\\_HISTORY |Historical | | |Data retained for 1 year. |\n|SNOWPARK\\_CONTAINER\\_SERVICES\\_HISTORY |Historical |3 hour | |Data retained for 1 year. |\n|SNOWPIPE\\_STREAMING\\_CHANNEL\\_HISTORY |Historical | | | |\n|SNOWPIPE\\_STREAMING\\_CLIENT\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|SNOWPIPE\\_STREAMING\\_FILE\\_MIGRATION\\_HISTORY |Historical |12 hours | |Data retained for 1 year. |\n|STAGES |Object |2 hours | | |\n|STAGE\\_STORAGE\\_USAGE\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|STORAGE\\_LIFECYCLE\\_POLICIES |Object |2 hours | | |\n|STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY |Historical |2 hours | |Data retained for 1 year. |\n|STORAGE\\_USAGE |Historical |2 hours | |Combined usage across all database tables and internal stages. Data retained for 1 year. |\n|TABLES |Object |90 minutes | | |\n|TABLE\\_CONSTRAINTS |Object |2 hours | | |\n|TABLE\\_DML\\_HISTORY |Historical |6 hours | |Data retained for 1 year. |\n|TABLE\\_PRUNING\\_HISTORY |Historical |6 hours | |Data retained for 1 year. |\n|TABLE\\_QUERY\\_PRUNING\\_HISTORY |Historical |4 hours | |Data retained for 1 year. |\n|TABLE\\_STORAGE\\_METRICS |Object |90 minutes | | |\n|TAG\\_REFERENCES |Object |2 hours | | |\n|TAGS |Object |2 hours | | |\n|TASK\\_HISTORY |Historical |45 minutes | | |\n|TASK\\_VERSIONS |Object |3 hours | | |\n|TRUST\\_CENTER\\_FINDINGS |Historical |1 hour | | |\n|USERS |Object |2 hours | | |\n|VIEWS |Object |90 minutes | | |\n|WAREHOUSE\\_EVENTS\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|WAREHOUSE\\_LOAD\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n|WAREHOUSE\\_METERING\\_HISTORY |Historical |3 hours | |Data retained for 1 year. |\n\n<sub>[1] All latency times are approximate; in some instances, the actual latency may be lower.</sub>\n\n<sub>[2] The latency of the views for a given table may be up to 2 days if both of the following conditions are true: 1. Fewer than 32 DML statements have been added to the given table since it was last updated in LOAD\\_HISTORY or COPY\\_HISTORY. 2. Fewer than 100 rows have been added to the given table since it was last updated in LOAD\\_HISTORY or COPY\\_HISTORY.</sub>\n\n<sub>[3] Unless otherwise noted, the Account Usage view is available to all accounts.</sub>\n\n### Account Usage table functions \u00b6\n\nCurrently, Snowflake supports one ACCOUNT\\_USAGE table function:\n\n|Table Function |Data Retention |Notes |\n| --- | --- | --- |\n|TAG\\_REFERENCES\\_WITH\\_LINEAGE |N/A |Results are only returned for the role that has access to the specified object. |\n\nNote\n\nSimilar to the Account Usage views, please account for latency when calling this table function. The expected latency for this table\nfunction is similar to the latency for the TAG\\_REFERENCES view.\n\n## READER\\_ACCOUNT\\_USAGE views \u00b6\n\nThe READER\\_ACCOUNT\\_USAGE schema contains the following views:\n\n|View |Type |Latency <sup>[1]</sup> |Notes |\n| --- | --- | --- | --- |\n|LOGIN\\_HISTORY |Historical |2 hours |Data retained for 1 year. |\n|QUERY\\_HISTORY |Historical |45 minutes |Data retained for 1 year. |\n|RESOURCE\\_MONITORS |Object |2 hours | |\n|STORAGE\\_USAGE |Historical |24 hours |Combined usage across all database tables and internal stages. Data retained for 1 year. |\n|WAREHOUSE\\_METERING\\_HISTORY |Historical |24 hours |Data retained for 1 year. |\n\n<sub>[1] All latency times are approximate; in some instances, the actual latency may be lower.</sub>\n\n## Enabling other roles to use schemas in the SNOWFLAKE database \u00b6\n\nBy default, the SNOWFLAKE database is visible to all users; however, access to schemas in this database can be granted by a user with the\nACCOUNTADMIN role using either of the following approaches:\n\n* Grant IMPORTED PRIVILEGES on the SNOWFLAKE database.\n* Grant a SNOWFLAKE database role to an account role.\n\nImportant\n\nTo avoid unintentionally granting access to organization-level data, consider using SNOWFLAKE database roles to grant access to views in the ACCOUNT\\_USAGE schema.\n\nFor more information, refer to GRANT DATABASE ROLE .\n\nFor example, to grant IMPORTED PRIVILEGES on the SNOWFLAKE database to two additional roles:\n\n> ```\n> USE ROLE ACCOUNTADMIN ; \n> \n>  GRANT IMPORTED PRIVILEGES ON DATABASE SNOWFLAKE TO ROLE SYSADMIN ; \n>  GRANT IMPORTED PRIVILEGES ON DATABASE SNOWFLAKE TO ROLE customrole1 ;\n> ```\n> \n> Copy\n> \n> \n\nA user with that is granted the `customrole1` role can query a view as follows:\n\n> ```\n> USE ROLE customrole1 ; \n> \n>  SELECT database_name , database_owner FROM SNOWFLAKE . ACCOUNT_USAGE . DATABASES ;\n> ```\n> \n> Copy\n> \n> \n\nFor additional examples, see Querying the Account Usage views .\n\n### ACCOUNT\\_ USAGE schema SNOWFLAKE database roles \u00b6\n\nIn addition, you can grant finer control to accounts using SNOWFLAKE Database roles.\nFor more information on database roles, see database roles .\n\nACCOUNT\\_USAGE schemas have four defined SNOWFLAKE database roles, each granted the SELECT privilege on specific views.\n\n|Role |Purpose and Description |\n| --- | --- |\n|OBJECT\\_VIEWER |The OBJECT\\_VIEWER role provides visibility into object metadata. |\n|USAGE\\_VIEWER |The USAGE\\_VIEWER role provides visibility into historical usage information. |\n|GOVERNANCE\\_VIEWER |The GOVERNANCE\\_VIEWER role provides visibility into data governance related information. |\n|SECURITY\\_VIEWER |The SECURITY\\_VIEWER role provides visibility into security based information. |\n\n### Database role required to access ACCOUNT\\_ USAGE views \u00b6\n\nThe OBJECT\\_VIEWER, USAGE\\_VIEWER, GOVERNANCE\\_VIEWER, and SECURITY\\_VIEWER roles have the SELECT privilege to query Account Usage\nviews in the shared SNOWFLAKE database. Use the following table to determine which database role has access to a view.\n\n|View |Database Role |\n| --- | --- |\n|ACCESS\\_HISTORY view |GOVERNANCE\\_VIEWER |\n|APPLICATION\\_CONFIGURATIONS view |SECURITY\\_VIEWER |\n|AGGREGATE\\_ACCESS\\_HISTORY view |GOVERNANCE\\_VIEWER |\n|AGGREGATE\\_QUERY\\_HISTORY view |GOVERNANCE\\_VIEWER |\n|AGGREGATION\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|ANOMALIES\\_DAILY view |USAGE\\_VIEWER |\n|APPLICATION\\_CONFIGURATION\\_VALUE\\_HISTORY view |SECURITY\\_VIEWER |\n|APPLICATION\\_DAILY\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|APPLICATION\\_SPECIFICATION\\_STATUS\\_HISTORY view |SECURITY\\_VIEWER |\n|APPLICATION\\_SPECIFICATIONS view |SECURITY\\_VIEWER |\n|ARCHIVE\\_STORAGE\\_DATA\\_RETRIEVAL\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|AUTOMATIC\\_CLUSTERING\\_HISTORY view |USAGE\\_VIEWER |\n|BLOCK\\_STORAGE\\_HISTORY view |USAGE\\_VIEWER |\n|BLOCK\\_STORAGE\\_SNAPSHOTS view |OBJECT\\_VIEWER |\n|CATALOG\\_LINKED\\_DATABASE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CLASS\\_INSTANCES view |USAGE\\_VIEWER |\n|CLASSES view |USAGE\\_VIEWER |\n|COLUMN\\_QUERY\\_PRUNING\\_HISTORY view |USAGE\\_VIEWER |\n|COLUMNS view |OBJECT\\_VIEWER |\n|COMPLETE\\_TASK\\_GRAPHS view |OBJECT\\_VIEWER |\n|CONTACT\\_REFERENCES view |GOVERNANCE\\_VIEWER |\n|CONTACTS view |GOVERNANCE\\_VIEWER |\n|COPY\\_FILES\\_HISTORY view |USAGE\\_VIEWER |\n|COPY\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_AGENT\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_AISQL\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_ANALYST\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_DOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_FINE\\_TUNING\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_FUNCTIONS\\_QUERY\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_FUNCTIONS\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_SEARCH\\_DAILY\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_PROVISIONED\\_THROUGHPUT\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_REST\\_API\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CORTEX\\_SEARCH\\_SERVING\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|CREDENTIALS view |SECURITY\\_VIEWER |\n|DATA\\_CLASSIFICATION\\_LATEST view |GOVERNANCE\\_VIEWER |\n|DATA\\_METRIC\\_FUNCTION\\_EXPECTATIONS view |USAGE\\_VIEWER or GOVERNANCE\\_VIEWER |\n|DATA\\_METRIC\\_FUNCTION\\_REFERENCES view |USAGE\\_VIEWER or GOVERNANCE\\_VIEWER |\n|DATA\\_QUALITY\\_MONITORING\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|DATA\\_TRANSFER\\_HISTORY view |USAGE\\_VIEWER |\n|DATABASE\\_STORAGE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|DATABASES view |OBJECT\\_VIEWER |\n|DOCUMENT\\_AI\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|DYNAMIC\\_TABLE\\_REFRESH\\_HISTORY view |USAGE\\_VIEWER |\n|ELEMENT\\_TYPES view |OBJECT\\_VIEWER |\n|EVENT\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|EXTERNAL\\_ACCESS\\_HISTORY view |USAGE\\_VIEWER |\n|FIELDS view |OBJECT\\_VIEWER |\n|FILE\\_FORMATS view |OBJECT\\_VIEWER |\n|FUNCTIONS view |OBJECT\\_VIEWER |\n|GRANTS\\_TO\\_ROLES view |SECURITY\\_VIEWER |\n|GRANTS\\_TO\\_SHARES view |SECURITY\\_VIEWER |\n|GRANTS\\_TO\\_USERS view |SECURITY\\_VIEWER |\n|HYBRID\\_TABLE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|HYBRID\\_TABLES view |OBJECT\\_VIEWER |\n|ICEBERG\\_STORAGE\\_OPTIMIZATION\\_HISTORY view |USAGE\\_VIEWER |\n|INDEX\\_COLUMNS view |OBJECT\\_VIEWER |\n|INDEXES view |OBJECT\\_VIEWER |\n|INGRESS\\_NETWORK\\_ACCESS\\_HISTORY view |SECURITY\\_VIEWER |\n|INTERNAL\\_DATA\\_TRANSFER\\_HISTORY view |USAGE\\_VIEWER |\n|INTERNAL\\_STAGE\\_NETWORK\\_ACCESS\\_HISTORY view |SECURITY\\_VIEWER |\n|JOIN\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|LISTINGS view |SECURITY\\_VIEWER |\n|LOAD\\_HISTORY view |USAGE\\_VIEWER |\n|LOGIN\\_HISTORY view |SECURITY\\_VIEWER |\n|MASKING\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|MATERIALIZED\\_VIEW\\_REFRESH\\_HISTORY view |USAGE\\_VIEWER |\n|METERING\\_DAILY\\_HISTORY view |USAGE\\_VIEWER |\n|METERING\\_HISTORY view |USAGE\\_VIEWER |\n|NETWORK\\_POLICIES view |SECURITY\\_VIEWER |\n|NETWORK\\_RULE\\_REFERENCES view |SECURITY\\_VIEWER |\n|NETWORK\\_RULES view |SECURITY\\_VIEWER |\n|NOTEBOOKS\\_CONTAINER\\_RUNTIME\\_HISTORY view |USAGE\\_VIEWER |\n|OBJECT\\_ACCESS\\_REQUEST\\_HISTORY view |OBJECT\\_VIEWER |\n|OBJECT\\_DEPENDENCIES view |OBJECT\\_VIEWER |\n|ACCOUNT\\_USAGE.ONLINE\\_FEATURE\\_TABLE\\_REFRESH\\_HISTORY |USAGE\\_VIEWER |\n|OPENFLOW\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|OUTBOUND\\_PRIVATELINK\\_ENDPOINTS view |SECURITY\\_VIEWER |\n|PASSWORD\\_POLICIES view |SECURITY\\_VIEWER |\n|PIPE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|PIPES view |OBJECT\\_VIEWER |\n|POLICY\\_REFERENCES view |GOVERNANCE\\_VIEWER, SECURITY\\_VIEWER |\n|POSTGRES\\_STORAGE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|PRIVACY\\_BUDGETS view |GOVERNANCE\\_VIEWER |\n|PRIVACY\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|PROCEDURES view |OBJECT\\_VIEWER |\n|PROJECTION\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|QUERY\\_ACCELERATION\\_ELIGIBLE view |GOVERNANCE\\_VIEWER |\n|QUERY\\_ATTRIBUTION\\_HISTORY view |USAGE\\_VIEWER, GOVERNANCE\\_VIEWER |\n|QUERY\\_HISTORY view |GOVERNANCE\\_VIEWER |\n|QUERY\\_INSIGHTS view |GOVERNANCE\\_VIEWER |\n|REFERENTIAL\\_CONSTRAINTS view |OBJECT\\_VIEWER |\n|REPLICATION\\_GROUP\\_REFRESH\\_HISTORY view |USAGE\\_VIEWER |\n|REPLICATION\\_GROUP\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|REPLICATION\\_GROUPS view |OBJECT\\_VIEWER |\n|REPLICATION\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|RESOURCE\\_MONITORS view |OBJECT\\_VIEWER |\n|ROLES view |SECURITY\\_VIEWER |\n|ROW\\_ACCESS\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|SCHEMATA view |OBJECT\\_VIEWER |\n|SEARCH\\_OPTIMIZATION\\_BENEFITS view |USAGE\\_VIEWER |\n|SEARCH\\_OPTIMIZATION\\_HISTORY view |USAGE\\_VIEWER |\n|SECRETS view |SECURITY\\_VIEWER |\n|SEMANTIC\\_DIMENSIONS view |OBJECT\\_VIEWER |\n|SEMANTIC\\_FACTS view |OBJECT\\_VIEWER |\n|SEMANTIC\\_METRICS view |OBJECT\\_VIEWER |\n|SEMANTIC\\_RELATIONSHIPS view |OBJECT\\_VIEWER |\n|SEMANTIC\\_TABLES view |OBJECT\\_VIEWER |\n|SEMANTIC\\_VIEWS view |OBJECT\\_VIEWER |\n|SEQUENCES view |OBJECT\\_VIEWER |\n|SERVERLESS\\_ALERT\\_HISTORY view |USAGE\\_VIEWER |\n|SERVERLESS\\_TASK\\_HISTORY view |USAGE\\_VIEWER |\n|SERVICES view |OBJECT\\_VIEWER |\n|SESSION\\_POLICIES view |SECURITY\\_VIEWER |\n|SESSIONS view |SECURITY\\_VIEWER |\n|SHARES view |SECURITY\\_VIEWER |\n|SNAPSHOT\\_OPERATION\\_HISTORY view \u2014 Deprecated |OBJECT\\_VIEWER |\n|SNAPSHOT\\_POLICIES view \u2014 Deprecated |OBJECT\\_VIEWER |\n|SNAPSHOT\\_SETS view \u2014 Deprecated |OBJECT\\_VIEWER |\n|SNAPSHOT\\_STORAGE\\_USAGE view \u2014 Deprecated |OBJECT\\_VIEWER |\n|SNAPSHOTS view \u2014 Deprecated |OBJECT\\_VIEWER |\n|SNOWFLAKE\\_INTELLIGENCE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|SNOWPARK\\_CONTAINER\\_SERVICES\\_HISTORY view |USAGE\\_VIEWER |\n|SNOWPIPE\\_STREAMING\\_CHANNEL\\_HISTORY view |USAGE\\_VIEWER |\n|STAGE\\_STORAGE\\_USAGE\\_HISTORY view |USAGE\\_VIEWER |\n|STAGES view |OBJECT\\_VIEWER |\n|STORAGE\\_LIFECYCLE\\_POLICIES view |GOVERNANCE\\_VIEWER |\n|STORAGE\\_LIFECYCLE\\_POLICY\\_HISTORY view |GOVERNANCE\\_VIEWER |\n|STORAGE\\_USAGE view |USAGE\\_VIEWER |\n|TABLE\\_CONSTRAINTS view |OBJECT\\_VIEWER |\n|TABLE\\_DML\\_HISTORY view |USAGE\\_VIEWER |\n|TABLE\\_PRUNING\\_HISTORY view |USAGE\\_VIEWER |\n|TABLE\\_QUERY\\_PRUNING\\_HISTORY view |USAGE\\_VIEWER |\n|TABLE\\_STORAGE\\_METRICS view |USAGE\\_VIEWER |\n|TABLES view |OBJECT\\_VIEWER |\n|TAG\\_REFERENCES view |GOVERNANCE\\_VIEWER |\n|TAGS view |OBJECT\\_VIEWER or GOVERNANCE\\_VIEWER |\n|TASK\\_HISTORY view |USAGE\\_VIEWER |\n|TRUST\\_CENTER\\_FINDINGS view |SECURITY\\_VIEWER |\n|USERS view |SECURITY\\_VIEWER |\n|VIEWS view |OBJECT\\_VIEWER |\n|WAREHOUSE\\_EVENTS\\_HISTORY view |USAGE\\_VIEWER |\n|WAREHOUSE\\_LOAD\\_HISTORY view |USAGE\\_VIEWER |\n|WAREHOUSE\\_METERING\\_HISTORY view |USAGE\\_VIEWER |\n\n### READER\\_ ACCOUNT\\_ USAGE schema SNOWFLAKE database roles \u00b6\n\nThe READER\\_USAGE\\_VIEWER SNOWFLAKE database role is granted SELECT privilege on all READER\\_ACCOUNT\\_USAGE views.\nAs reader accounts are created by clients, the READER\\_USAGE\\_VIEWER role is expected to be granted to those roles used to monitor reader account use.\n\n|View |\n| --- |\n|LOGIN\\_HISTORY view |\n|QUERY\\_HISTORY view |\n|RESOURCE\\_MONITORS view |\n|STORAGE\\_USAGE view |\n|WAREHOUSE\\_METERING\\_HISTORY view |\n\n## Querying the Account Usage views \u00b6\n\nThis section includes considerations when querying the Account Usage views along with query examples.\n\n### Selecting columns \u00b6\n\nThe Snowflake-specific views are subject to change. Avoid selecting all columns from these views. Instead, select the columns that you want.\nFor example, if you want the `name` column, use `SELECT name` , rather than `SELECT *` .\n\n### Reconciling cost views \u00b6\n\nThere are several Account Usage views that contain data related to the cost of compute resources, storage, and data transfers. If you are trying to reconcile these views against a corresponding view in the ORGANIZATION\\_USAGE schema , you must first set the timezone of the session to UTC.\n\nFor example, if you are trying to reconcile ACCOUNT\\_USAGE.WAREHOUSE\\_METERING\\_HISTORY to the account\u2019s data in ORGANIZATION\\_USAGE.WAREHOUSE\\_METERING\\_HISTORY, you must run the following command before querying the Account Usage view:\n\n```\nALTER SESSION SET TIMEZONE = UTC ;\n```\n\nCopy\n\n### Examples \u00b6\n\nThe following examples show some typical/useful queries using the views in the ACCOUNT\\_USAGE schema.\n\nNote\n\n* These examples assume the SNOWFLAKE database and the ACCOUNT\\_USAGE schema are in use for the current session. The examples also\n  assume the ACCOUNTADMIN role (or a role granted IMPORTED PRIVILEGES on the database) is in use. If they are not in use, execute\n  the following commands before running the queries in the examples:\n  \n  ```\n  USE ROLE ACCOUNTADMIN ; \n  \n   USE SCHEMA snowflake . account_usage ;\n  ```\n  \n  Copy\n\n#### Examples: User login metrics \u00b6\n\nAverage number of seconds between failed login attempts by user (month-to-date):\n\n> ```\n> select user_name , \n>        count (*) as failed_logins , \n>        avg ( seconds_between_login_attempts ) as average_seconds_between_login_attempts \n>  from ( \n>       select user_name , \n>              timediff ( seconds , event_timestamp , lead ( event_timestamp ) \n>                  over ( partition by user_name order by event_timestamp )) as seconds_between_login_attempts \n>       from login_history \n>       where event_timestamp > date_trunc ( month , current_date ) \n>       and is_success = 'NO' \n>      ) \n>  group by 1 \n>  order by 3 ;\n> ```\n> \n> Copy\n> \n> \n\nFailed logins by user (month-to-date):\n\n> ```\n> select user_name , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) as failed_logins , \n>        count (*) as logins , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) / nullif ( count (*), 0 ) as login_failure_rate \n>  from login_history \n>  where event_timestamp > date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 4 desc ;\n> ```\n> \n> Copy\n> \n> \n\nFailed logins by user and connecting client (month-to-date):\n\n> ```\n> select reported_client_type , \n>        user_name , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) as failed_logins , \n>        count (*) as logins , \n>        sum ( iff ( is_success = 'NO' , 1 , 0 )) / nullif ( count (*), 0 ) as login_failure_rate \n>  from login_history \n>  where event_timestamp > date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 5 desc ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Warehouse performance \u00b6\n\nThis query calculates virtual warehouse performance metrics such as throughput and latency for 15-minute time intervals over the course of\none day.\n\nIn the code sample below, you can replace `CURRENT_WAREHOUSE()` with the name of a warehouse to calculate metrics for that warehouse. In\naddition, change the `time_from` and `time_to` dates in the WITH clause to specify the time period.\n\n> ```\n> WITH \n>  params AS ( \n>  SELECT \n>     CURRENT_WAREHOUSE () AS warehouse_name , \n>     '2021-11-01' AS time_from , \n>     '2021-11-02' AS time_to \n>  ), \n> \n>  jobs AS ( \n>  SELECT \n>     query_id , \n>     time_slice ( start_time ::timestamp_ntz , 15 , 'minute' , 'start' ) as interval_start , \n>     qh . warehouse_name , \n>     database_name , \n>     query_type , \n>     total_elapsed_time , \n>     compilation_time AS compilation_and_scheduling_time , \n>     ( queued_provisioning_time + queued_repair_time + queued_overload_time ) AS queued_time , \n>     transaction_blocked_time , \n>     execution_time \n>  FROM snowflake . account_usage . query_history qh , params \n>  WHERE \n>     qh . warehouse_name = params . warehouse_name \n>  AND start_time >= params . time_from \n>  AND start_time <= params . time_to \n>  AND execution_status = 'SUCCESS' \n>  AND query_type IN ( 'SELECT' , 'UPDATE' , 'INSERT' , 'MERGE' , 'DELETE' ) \n>  ), \n> \n>  interval_stats AS ( \n>  SELECT \n>     query_type , \n>     interval_start , \n>     COUNT ( DISTINCT query_id ) AS numjobs , \n>     MEDIAN ( total_elapsed_time )/ 1000 AS p50_total_duration , \n>     ( percentile_cont ( 0 . 95 ) within group ( order by total_elapsed_time ))/ 1000 AS p95_total_duration , \n>     SUM ( total_elapsed_time )/ 1000 AS sum_total_duration , \n>     SUM ( compilation_and_scheduling_time )/ 1000 AS sum_compilation_and_scheduling_time , \n>     SUM ( queued_time )/ 1000 AS sum_queued_time , \n>     SUM ( transaction_blocked_time )/ 1000 AS sum_transaction_blocked_time , \n>     SUM ( execution_time )/ 1000 AS sum_execution_time , \n>     ROUND ( sum_compilation_and_scheduling_time / sum_total_duration , 2 ) AS compilation_and_scheduling_ratio , \n>     ROUND ( sum_queued_time / sum_total_duration , 2 ) AS queued_ratio , \n>     ROUND ( sum_transaction_blocked_time / sum_total_duration , 2 ) AS blocked_ratio , \n>     ROUND ( sum_execution_time / sum_total_duration , 2 ) AS execution_ratio , \n>     ROUND ( sum_total_duration / numjobs , 2 ) AS total_duration_perjob , \n>     ROUND ( sum_compilation_and_scheduling_time / numjobs , 2 ) AS compilation_and_scheduling_perjob , \n>     ROUND ( sum_queued_time / numjobs , 2 ) AS queued_perjob , \n>     ROUND ( sum_transaction_blocked_time / numjobs , 2 ) AS blocked_perjob , \n>     ROUND ( sum_execution_time / numjobs , 2 ) AS execution_perjob \n>  FROM jobs \n>  GROUP BY 1 , 2 \n>  ORDER BY 1 , 2 \n>  ) \n>  SELECT * FROM interval_stats ;\n> ```\n> \n> Copy\n> \n> Note\n> \n> Analyze different statement types separately (e.g., SELECT statements independent of INSERT or DELETE or other statements).\n> \n> \n\n* The NUMJOBS value represents the throughput for that time interval.\n* The P50\\_TOTAL\\_DURATION (median) and P95\\_TOTAL\\_DURATION (peak) values represent latency.\n* The SUM\\_TOTAL\\_DURATION is the sum of the SUM\\_<job\\_stage>\\_TIME values for the different job stages (COMPILATION\\_AND\\_SCHEDULING, QUEUED,\n  BLOCKED, EXECUTION).\n* Analyze the <job\\_stage>\\_RATIO values when the load (NUMJOBS) increases. Look for ratio changes or deviations from the average.\n* If the QUEUED\\_RATIO is high, there might not be sufficient capacity in the warehouse. Add more clusters or increase the warehouse size.\n\n#### Examples: Warehouse credit usage \u00b6\n\nCredits used by each warehouse in your account (month-to-date):\n\n> ```\n> select warehouse_name , \n>        sum ( credits_used ) as total_credits_used \n>  from warehouse_metering_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nCredits used over time by each warehouse in your account (month-to-date):\n\n> ```\n> select start_time ::date as usage_date , \n>        warehouse_name , \n>        sum ( credits_used ) as total_credits_used \n>  from warehouse_metering_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 2 , 1 ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Data storage usage \u00b6\n\nBillable terabytes stored in your account over time:\n\n> ```\n> select date_trunc ( month , usage_date ) as usage_month \n>   , avg ( storage_bytes + stage_bytes + failsafe_bytes ) / power ( 1024 , 4 ) as billable_tb \n>  from storage_usage \n>  group by 1 \n>  order by 1 ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: User query totals and execution times \u00b6\n\nTotal jobs executed in your account (month-to-date):\n\n> ```\n> select count (*) as number_of_jobs \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date );\n> ```\n> \n> Copy\n> \n> \n\nTotal jobs executed by each warehouse in your account (month-to-date):\n\n> ```\n> select warehouse_name , \n>        count (*) as number_of_jobs \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nAverage query execution time by user (month-to-date):\n\n> ```\n> select user_name , \n>        avg ( execution_time ) as average_execution_time \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 \n>  order by 2 desc ;\n> ```\n> \n> Copy\n> \n> \n\nAverage query execution time by query type and warehouse size (month-to-date):\n\n> ```\n> select query_type , \n>        warehouse_size , \n>        avg ( execution_time ) as average_execution_time \n>  from query_history \n>  where start_time >= date_trunc ( month , current_date ) \n>  group by 1 , 2 \n>  order by 3 desc ;\n> ```\n> \n> Copy\n> \n>\n\n#### Examples: Obtain a query count for every login event \u00b6\n\nJoin columns from LOGIN\\_HISTORY, QUERY\\_HISTORY, and SESSIONS to obtain a query count for each user login event.\n\n> Note\n> \n> The SESSIONS view records information starting on July 20-21, 2020, therefore the query result will only contain overlapping\n> information for each of the three views starting from this date.\n> \n> ```\n> select l . user_name , \n>        l . event_timestamp as login_time , \n>        l . client_ip , \n>        l . reported_client_type , \n>        l . first_authentication_factor , \n>        l . second_authentication_factor , \n>        count ( q . query_id ) \n>  from snowflake . account_usage . login_history l \n>  join snowflake . account_usage . sessions s on l . event_id = s . login_event_id \n>  join snowflake . account_usage . query_history q on q . session_id = s . session_id \n>  group by 1 , 2 , 3 , 4 , 5 , 6 \n>  order by l . user_name \n>  ;\n> ```\n> \n> Copy\n> \n>\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\nShare your feedback\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n## Snowflake's Use of Cookies\n\n## Privacy Preference Center\n\nYour Opt Out Preference Signal is Honored\n\n* ### Your Privacy\n* ### Strictly Necessary Cookies\n* ### Performance Cookies\n* ### Functional Cookies\n* ### Targeting Cookies\n\n#### Your Privacy\n\nWhen you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.  \n[More information](https://cookiepedia.co.uk/giving-consent-to-cookies)\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\n\nCookies Details\u200e\n\n#### Performance Cookies\n\nPerformance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site.    All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.\n\nCookies Details\u200e\n\n#### Functional Cookies\n\nFunctional Cookies\n\nThese cookies enable the website to provide enhanced functionality and personalisation. They may be set by us or by third party providers whose services we have added to our pages.    If you do not allow these cookies then some or all of these services may not function properly.\n\nCookies Details\u200e\n\n#### Targeting Cookies\n\nTargeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly identifiable personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.\n\nCookies Details\u200e\n\n### Cookie List\n\nConsent Leg.Interest\n\ncheckbox label label\n\ncheckbox label label\n\ncheckbox label label\n\nClear\n\ncheckbox label label\n\nApply Cancel\n\nConfirm My Choices\n\nAllow All\n\n[](https://www.onetrust.com/products/cookie-consent/)"
      ]
    },
    {
      "url": "https://docs.snowflake.com/en/sql-reference/account-usage/metering_history",
      "title": "METERING_HISTORY view - Snowflake Documentation",
      "excerpts": [
        "Reference General reference SNOWFLAKE database Account Usage METERING\\_HISTORY\n\nSchemas:\n    ACCOUNT\\_USAGE , READER\\_ACCOUNT\\_USAGE\n\n# METERING\\_HISTORY view \u00b6\n\nThe METERING\\_HISTORY view in the ACCOUNT\\_USAGE schema can be used to return the hourly credit usage for an account within the last 365 days (1 year).\n\n## Columns \u00b6\n\n|Column Name |Data Type |Description |\n| --- | --- | --- |\n|SERVICE\\_TYPE |VARCHAR |Type of service that is consuming credits. The following list includes many, **but not all** , of the possible service types:\n\n* `AI_SERVICES` : See Snowflake Cortex AI Functions (including LLM functions) , Cortex Analyst , and Document AI .\n* `ARCHIVE_STORAGE_RETRIEVAL_FILE_PROCESSING` : See Billing for storage lifecycle policies .\n* `ARCHIVE_STORAGE_WRITE` : See Billing for storage lifecycle policies .\n* `AUTO_CLUSTERING` : See Automatic Clustering .\n* `BACKUP` : See Backups for disaster recovery and immutable storage .\n* `COPY_FILES` : See COPY FILES .\n* `DATA_QUALITY_MONITORING` : See Introduction to data quality checks .\n* `FAILSAFE_RECOVERY` : See Understanding and viewing Fail-safe .\n* `HYBRID_TABLE_REQUESTS` : See Hybrid tables .\n* `MATERIALIZED_VIEW` : See Working with Materialized Views .\n* `OPENFLOW_COMPUTE_BYOC` : See Openflow BYOC cost and scaling considerations .\n* `OPENFLOW_COMPUTE_SNOWFLAKE` : See Openflow Snowflake Deployment cost and scaling considerations .\n* `PIPE` : See Snowpipe .\n* `POSTGRES_COMPUTE` : See Snowflake Postgres .\n* `POSTGRES_COMPUTE_HA` : See Snowflake Postgres .\n* `QUERY_ACCELERATION` : See Using the Query Acceleration Service (QAS) .\n* `REPLICATION` : See Introduction to replication and failover across multiple accounts .\n* `SEARCH_OPTIMIZATION` : See Search optimization service .\n* `SENSITIVE_DATA_CLASSIFICATION` : See Introduction to sensitive data classification .\n* `SERVERLESS_ALERTS` : See Setting up alerts based on data in Snowflake .\n* `SERVERLESS_TASK` : See Introduction to tasks .\n* `SNOWPARK_CONTAINER_SERVICES` : See Snowpark Container Services .\n* `SNOWPIPE_STREAMING` : See Snowpipe Streaming .\n* `STORAGE_LIFECYCLE_POLICY_EXECUTION` : Compute cost to apply a policy on a target table and expire or archive rows (policy execution). See Storage lifecycle policies .\n* `TELEMETRY_DATA_INGEST` : See Event table overview .\n* `TRUST_CENTER` : See Trust Center .\n* `WAREHOUSE_METERING` : See Overview of warehouses .\n* `WAREHOUSE_METERING_READER` : See Manage reader accounts . |\n|START\\_TIME |TIMESTAMP\\_LTZ |The date and beginning of the hour (in the local time zone) in which the usage took place. |\n|END\\_TIME |TIMESTAMP\\_LTZ |The date and end of the hour (in the local time zone) in which the usage took place. |\n|ENTITY\\_ID |NUMBER |A system-generated identifier for the entity associated with the service.\n\nIn most cases, this is the internal ID of the monitored entity; for example, a pipe, task, or replication group.\n\nWhen the SERVICE\\_TYPE is COPY\\_FILES, this column shows the ID of the database, schema, or stage from which files are copied.\n\nIf the SERVICE\\_TYPE is an Openflow type, the value is NULL.\n\nIf the SERVICE\\_TYPE is Snowpipe Streaming, this shows the ID of the relevant pipe; which is the default pipe ID for the default pipe. |\n|ENTITY\\_TYPE |VARCHAR |Type of Snowflake resource that consumed credits, such as WAREHOUSE, TASK, or TABLE. Note that TABLE is used for all table-like objects. |\n|NAME |VARCHAR |The name of the service or object associated with the cost entry, which varies significantly based on the SERVICE\\_TYPE.\n\nStandard (General): This column shows the name of the service type itself; for example, REPLICATION, TASK.\n\nSNOWPIPE\\_STREAMING: This service type generates two distinct cost entries, and the NAME column varies for each:\n\n* Cost entry 1 (table name): The value is the name of the Snowflake target table. For the high-performance default pipe, the name is derived from the target table name and appended with -STREAMING; for example, MY\\_TABLE-STREAMING.\n* Cost entry 2 (client string): The value is a colon-separated string in the format: SNOWPIPE\\_STREAMING:CLIENT\\_NAME:SNOWFLAKE\\_PROVIDED\\_ID. This is used for tracking client-side costs.\n\nCOPY\\_FILES: The value is the name of the database from which the files are copied.\n\nOpenflow Types: The value is NULL. |\n|DATABASE\\_ID |NUMBER |Internal/system-generated identifier of the database associated with the resource of type `ENTITY_TYPE` . Contains a NULL value when the resource isn\u2019t associated with a specific database; for example, a warehouse or compute pool. |\n|DATABASE\\_NAME |VARCHAR |Name of the database associated with the resource of type `ENTITY_TYPE` . Contains a NULL value when the resource isn\u2019t associated with a specific database. |\n|SCHEMA\\_ID |NUMBER |Internal or system-generated identifier of the schema associated with the resource of type `ENTITY_TYPE` . Contains a NULL value when the resource isn\u2019t associated with a specific schema. |\n|SCHEMA\\_NAME |VARCHAR |Name of the schema associated with the resource of type `ENTITY_TYPE` . Contains a NULL value when the resource isn\u2019t associated with a specific schema. |\n|CREDITS\\_USED\\_COMPUTE |NUMBER |Number of credits used by warehouses, serverless compute, and Openflow resources in the hour. |\n|CREDITS\\_USED\\_CLOUD\\_\nSERVICES |NUMBER |Number of credits used for cloud services in the hour. Always `0` when the SERVICE\\_TYPE is one of the Openflow types. |\n|CREDITS\\_USED |NUMBER |Total number of credits used for the account in the hour. This is a sum of CREDITS\\_USED\\_COMPUTE and CREDITS\\_USED\\_CLOUD\\_SERVICES. This value does not take into account the adjustment for cloud services, and may therefore be greater than your actual credit consumption. |\n|BYTES |NUMBER |When the service type is `auto_clustering` , indicates the number of bytes reclustered during the START\\_TIME and END\\_TIME window. When the service type is `pipe` , indicates the number of bytes inserted during the START\\_TIME and END\\_TIME window. When the service type is `SNOWPIPE_STREAMING` , indicates the number of bytes migrated during the START\\_TIME and END\\_TIME window. When the service type is `COPY_FILES` , columns are aggregated at the database level. |\n|ROWS |NUMBER |When the service type is `auto_clustering` , indicates number of rows reclustered during the START\\_TIME and END\\_TIME window. When the service type is `SNOWPIPE_STREAMING` , indicates the number of rows migrated during the START\\_TIME and END\\_TIME window. |\n|FILES |NUMBER |When the service type is `pipe` , indicates number of files loaded during the START\\_TIME and END\\_TIME window. When the service type is `SNOWPIPE_STREAMING` , this is NULL. When the service type is `COPY_FILES` , columns are aggregated at the database level. |\n\n## Usage notes \u00b6\n\n* Latency for the view may be up to 180 minutes (3 hours), except for the CREDITS\\_USED\\_CLOUD\\_SERVICES column. Latency for\n  CREDITS\\_USED\\_CLOUD\\_SERVICES may be up to 6 hours.\n* Latency for showing the credit consumption of `SNOWPIPE_STREAMING` may be up to 12 hours.\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\nShare your feedback\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\nOn this page\n\n1. Columns\n2. Usage notes\n\n## Snowflake's Use of Cookies\n\n## Privacy Preference Center\n\nYour Opt Out Preference Signal is Honored\n\n* ### Your Privacy\n* ### Strictly Necessary Cookies\n* ### Performance Cookies\n* ### Functional Cookies\n* ### Targeting Cookies\n\n#### Your Privacy\n\nWhen you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.  \n[More information](https://cookiepedia.co.uk/giving-consent-to-cookies)\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\n\nCookies Details\u200e\n\n#### Performance Cookies\n\nPerformance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site.    All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.\n\nCookies Details\u200e\n\n#### Functional Cookies\n\nFunctional Cookies\n\nThese cookies enable the website to provide enhanced functionality and personalisation. They may be set by us or by third party providers whose services we have added to our pages.    If you do not allow these cookies then some or all of these services may not function properly.\n\nCookies Details\u200e\n\n#### Targeting Cookies\n\nTargeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly identifiable personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.\n\nCookies Details\u200e\n\n### Cookie List\n\nConsent Leg.Interest\n\ncheckbox label label\n\ncheckbox label label\n\ncheckbox label label\n\nClear\n\ncheckbox label label\n\nApply Cancel\n\nConfirm My Choices\n\nAllow All\n\n[](https://www.onetrust.com/products/cookie-consent/)"
      ]
    },
    {
      "url": "https://docs.snowflake.com/en/sql-reference/organization-usage/warehouse_metering_history",
      "title": "WAREHOUSE_METERING_HISTORY view | Snowflake Documentation",
      "excerpts": [
        "Reference General reference SNOWFLAKE database Organization Usage WAREHOUSE\\_METERING\\_HISTORY\n\nSchema:\n    ORGANIZATION\\_USAGE\n\n# WAREHOUSE\\_METERING\\_HISTORY view \u00b6\n\nThis Organization Usage view can be used to return the hourly credit usage for one or more warehouses across all the accounts in your organization\nwithin the last 365 days (1 year).\n\n## Columns \u00b6\n\n|Column Name |Data Type |Description |\n| --- | --- | --- |\n|ORGANIZATION\\_NAME |VARCHAR |Name of the organization where the usage took place. |\n|ACCOUNT\\_NAME |VARCHAR |Name of the account where the usage took place. |\n|REGION |VARCHAR |Name of the region where the account is located. |\n|SERVICE\\_TYPE |VARCHAR |The type of service, which identifies whether the usage is for a standard or reader account. Valid values: WAREHOUSE\\_METERING or WAREHOUSE\\_METERING\\_READER. |\n|START\\_TIME |TIMESTAMP\\_LTZ |The date and beginning of the hour (in the local time zone) in which the warehouse usage took place. |\n|END\\_TIME |TIMESTAMP\\_LTZ |The date and end of the hour (in the local time zone) in which the warehouse usage took place. |\n|WAREHOUSE\\_ID |NUMBER |Internal/system-generated identifier for the warehouse. |\n|WAREHOUSE\\_NAME |VARCHAR |Name of the warehouse. |\n|CREDITS\\_USED |NUMBER |Total number of credits used by the warehouse in the hour. This is the sum of CREDITS\\_USED\\_COMPUTE and CREDITS\\_USED\\_CLOUD\\_SERVICES. This value does not take into account the adjustment for cloud services , and may therefore be greater than the credits that are billed. To determine how many credits were actually billed, run queries against the METERING\\_DAILY\\_HISTORY view . |\n|CREDITS\\_USED\\_COMPUTE |NUMBER |Number of credits used for the warehouse in the hour. |\n|CREDITS\\_USED\\_CLOUD\\_SERVICES |NUMBER |Number of credits used for cloud services in the hour. |\n|ACCOUNT\\_LOCATOR |VARCHAR |Locator for the account where the usage took place. |\n\n## Usage notes \u00b6\n\n* Latency for the view may be up to 1440 minutes (24 hours).\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\nShare your feedback\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\nOn this page\n\n1. Columns\n2. Usage notes\n\nLanguage: **English**\n\n* English\n* Fran\u00e7ais\n* Deutsch\n* \u65e5\u672c\u8a9e\n* \ud55c\uad6d\uc5b4\n* Portugu\u00eas"
      ]
    },
    {
      "url": "https://community.snowflake.com/s/article/Inconsistency-in-credit-usage-of-WAREHOUSE-METERING-HISTORY-and-USAGE-IN-CURRENCY-DAILY-view",
      "title": "Inconsistency in credit usage of WAREHOUSE METERING ...",
      "excerpts": [
        "Loading\n\n\u00d7 Sorry to interrupt\n\nCSS Error\n\nRefresh"
      ]
    },
    {
      "url": "https://stellans.io/snowflake-credit-usage-dashboard/",
      "title": "Snowflake Credit Usage Dashboard - Stellans",
      "publish_date": "2025-11-02",
      "excerpts": [
        "# How to Build a Snowflake Credit Usage Dashboard (SQL)\n\n16 minutes to read\n\nOctober 31, 2025\n\nGet free consultation\n\nAre you finding it difficult to monitor rising Snowflake costs, or to attribute credit usage to specific teams, projects, or business units? This step-by-step guide delivers hands-on SQL recipes designed for BI developers and FinOps analysts to build a transparent, actionable Snowflake credit usage dashboard. With these tools, you can evolve from manual reporting to streamlined, automated financial control\u2014while laying a foundation for effective FinOps practice.\n\nAs data architects, these are the same foundational queries we use at Stellans to help our clients manage millions in annual Snowflake spend and build effective FinOps practices.\n\nLooking for next-level warehouse automation? See our [Automate Snowflake Warehouse Scaling with Resource Monitors](https://stellans.io/automate-snowflake-warehouse-scaling-with-resource-monitors/) guide for proven automation techniques.\n\n## Why Manually Monitoring Snowflake Spend is a Good First Step\n\nBefore investing in complex Snowflake FinOps tools, setting up a manual Snowflake credit usage dashboard gives both technical and financial teams much-needed visibility and accountability.\n\n* Immediate transparency: Manual dashboards let you visualize daily and monthly Snowflake spend using simple SQL, giving fast feedback before budgets spiral.\n* No new software required: Anyone with access can start tracking costs without added vendors. This is especially practical for organizations in the early stages of their FinOps journey.\n* Empowers better decision-making: Identifying high-spend warehouses, inefficient queries, and misuse helps teams address issues quickly with data-backed evidence.\n* Facilitates showback/chargeback: Granular, traceable tracking lays the groundwork for mapping Snowflake spend to business units or projects, paving the way for reliable showback models.\n* Hands-on FinOps learning: Writing SQL to explore METERING\\_HISTORY and WAREHOUSE\\_METERING\\_HISTORY teaches essential cost management skills before moving to automated tools like the Stellans FinOps Dashboard.\n\nManual dashboards provide actionable insights\u2014helping you control spend before scaling up.\n\n## The Foundation: Querying ACCOUNT\\_USAGE for Granular Cost Data\n\nThe [Snowflake ACCOUNT\\_USAGE schema](https://docs.snowflake.com/en/sql-reference/account-usage) is the definitive source for detailed cost data. Starting with ACCOUNT\\_USAGE ensures a unified, audit-friendly view of your organization\u2019s spend.\n\n* Extensive visibility: ACCOUNT\\_USAGE includes compute, storage, and cloud services usage, encompassing data at every level\u2014from account-wide rollups to individual users or query tags.\n* Granularity for cost attribution: Unique fields make it possible to drill into usage by warehouse, user, role, or even query tag.\n* Multi-account support: For organizations with multiple Snowflake accounts, combining ACCOUNT\\_USAGE with ORGANIZATION\\_USAGE facilitates aggregated oversight across your cloud estate.\n* Integration-ready: Queries in ACCOUNT\\_USAGE can be used directly within BI tools, such as Tableau, Power BI, and Looker, with no vendor lock-in. This enables flexible dashboarding, a key competitive advantage over native or single-tool options.\n\nSolid cost attribution from these tables enables showback and chargeback practices aligned to the [FinOps Foundation framework](https://www.finops.org/framework/) . Supporting regulatory or audit requirements is also easier via retained historical usage detail.\n\n# **Key Views for Cost Monitoring: METERING\\_HISTORY & WAREHOUSE\\_METERING\\_HISTORY**\n\nThe backbone of Snowflake credit usage monitoring relies on two key views:\n\n* METERING\\_HISTORY: Summarizes credits consumed at the account or organization level, ideal for trending and policy checks.\n* WAREHOUSE\\_METERING\\_HISTORY: Reports credit usage by each compute warehouse, with detailed time breakdowns for active and suspended periods. This enables cost mapping to projects or teams.\n\nFor organizations using multiple Snowflake accounts, you can aggregate data for broad oversight using ORGANIZATION\\_USAGE . Consult [ACCOUNT\\_USAGE documentation](https://docs.snowflake.com/en/sql-reference/account-usage) for field details and schema updates.\n\n## Actionable SQL Recipes for Your Snowflake Credit Usage Dashboard\n\nProduction-ready SQL is all you need to power a credible Snowflake cost monitoring dashboard\u2014no extra software or plugins required. Here are three essential queries any monitoring dashboard should include:\n\n# **Recipe 1: Track Daily & Monthly Credit Usage by Compute Warehouse**\n\nMonitoring usage by warehouse helps identify high-spend teams or workloads and pinpoints spend spikes before they become major issues. This recipe leverages WAREHOUSE\\_METERING\\_HISTORY , which now provides retention of up to 1 year of data for Snowflake Standard Edition customers or longer for Enterprise.\n\nSample SQL:\n\n```\nSELECT\n  warehouse_name,\n  DATE(start_time) AS usage_date,\n  SUM(credits_used) AS daily_credits\nFROM\n  SNOWFLAKE.ACCOUNT_USAGE.WAREHOUSE_METERING_HISTORY\nWHERE\n  start_time >= DATEADD(month, -3, CURRENT_DATE)\nGROUP BY\n  warehouse_name, DATE(start_time)\nORDER BY\n  warehouse_name, usage_date DESC;\n```\n\nHow this helps:\n\n* Highlights which warehouses or workloads are driving overall spend.\n* Flags irregular spikes or increases in credit use, supporting set baseline budgets.\n* Simplifies the creation of team- or project-level dashboards through warehouse-to-business mapping.\n\n_Monthly reporting can be achieved by swapping_ _usage\\_date_ _for_ _MONTH(start\\_time)_ _or via your BI tool\u2019s date groupings._\n\n# **Recipe 2: Identify and Attribute High-Cost Queries to Users or Roles**\n\nWith modern ELT and analytics workloads, a handful of queries can account for a large part of your spend. Finding and attributing these is key to technical tuning and fair cost governance. By joining QUERY\\_HISTORY with user and role metadata, you unlock deep insights for FinOps.\n\nSample SQL:\n\n```\nSELECT\n  user_name,\n  role_name,\n  query_text,\n  credits_used_compute + credits_used_cloud_services AS total_credits,\n  execution_status,\n  start_time\nFROM\n  SNOWFLAKE.ACCOUNT_USAGE.QUERY_HISTORY\nWHERE\n  start_time >= DATEADD(day, -14, CURRENT_DATE)\n  AND total_credits > 0\nORDER BY\n  total_credits DESC\nLIMIT 50;\n```\n\nHow this helps:\n\n* Surfaces costly queries, ranked by actual credit consumption\u2014not just runtime.\n* Enables targeted refactoring or scheduling changes for expensive workloads.\n* With consistent use of query tagging, enables attribution to projects or departments for showback/chargeback.\n\nThis approach not only flags issues but ties cost back to business units for accountability.\n\n# **Recipe 3: Analyze Storage Costs Over Time**\n\nWhile compute drives variable spend, storage costs can accumulate quietly. With the STORAGE\\_USAGE view, you can investigate storage trends and support retention policy decisions.\n\nSample SQL:\n\n```\nSELECT\n  TO_DATE(usage_date) AS storage_date,\n  SUM(stage_bytes + failsafe_bytes + table_bytes) / 1e9 AS total_storage_GB\nFROM\n  SNOWFLAKE.ACCOUNT_USAGE.STORAGE_USAGE\nWHERE\n  usage_date >= DATEADD(month, -6, CURRENT_DATE)\nGROUP BY\n  TO_DATE(usage_date)\nORDER BY\n  storage_date DESC;\n```\n\nHow this helps:\n\n* Tracks storage use as a trend, identifying costly jumps (such as when failsafe or transient tables aren\u2019t purged)\n* Informs archiving or cleanup policies\u2014one of the fastest wins for [Snowflake cost optimization](https://docs.snowflake.com/en/user-guide/resource-monitors)\n* Demonstrates compliance with retention or audit requirements\n\n## Visualizing Your Data: From Queries to Dashboards\n\nRunning these SQL queries is only the first step\u2014integrating their results into dashboards provides continuous, actionable insight.\n\n* Flexible charting: Visualize daily, weekly, and monthly credits by warehouse, user, or project using BI tools such as Tableau, Power BI, or Looker.\n* Highlight problem areas: Use charts like stacked bars or heatmaps to isolate large spikes or identify where cost drivers are concentrated.\n* Encourage data-driven collaboration: Share dashboards with technical teams, budget owners, and leadership for proactive conversations rather than reactive investigations.\n\nSnowflake natively supports direct connections for these BI platforms. For concrete dashboard examples and best practices, see [ACCOUNT\\_USAGE schema docs](https://docs.snowflake.com/en/sql-reference/account-usage) or our quick [Snowflake cost alerts guide](https://stellans.io/set-up-snowflake-cost-alerts-in-10-minutes-step-by-step/) .\n\n## The Limits of Manual SQL-Based Monitoring\n\nManual SQL dashboards are invaluable early on, but you\u2019ll eventually encounter real-world limitations:\n\n* Ongoing maintenance: As users, warehouses, and business units grow, updating queries and wrangling data mappings becomes both complex and error-prone.\n* Delayed visibility: Manual reporting often leads to budget overruns being detected after thresholds are crossed, rather than in real time.\n* Scaling challenges: Attribution and split-by-team reporting is harder to maintain as your organization or Snowflake usage grows, especially in multi-account environments.\n* No policy enforcement: Manual solutions don\u2019t automate governance or compliance (for example, disabling warehouses at budget limits); this requires built-in enforcement like Snowflake Resource Monitors.\n* Fragmented reporting: Without a unified source of truth, conflicting numbers can lead to spend disputes between IT, finance, and engineering.\n\nWhen these issues arise, it\u2019s time to shift from spreadsheets and static dashboards to automated FinOps solutions.\n\n## Next Step: From Manual Reports to Automated FinOps Governance with Stellans\n\nFor organizations that have outgrown manual dashboards, an automated, unified Snowflake FinOps solution offers game-changing benefits:\n\n# **Benefits of Automated Snowflake FinOps with Stellans**\n\n* Real-time credit usage alerts: Get notified instantly\u2014across all accounts\u2014of emerging overruns, costly trends, or unusual activity, before budgets are exceeded.\n* Automated showback and chargeback: Link Snowflake credit use to business units, product lines, or cost centers, with mappings updated automatically and supported by audit trails.\n* Built-in governance and enforcement: Use policy-driven rules to suspend or restrict usage automatically when thresholds are reached (leveraging the latest [Resource Monitor](https://docs.snowflake.com/en/user-guide/resource-monitors) and Budget features).\n* Comprehensive analytics: Drill down by user, warehouse, query tag, or account\u2014even across multiple Snowflake environments.\n* Unified, collaborative workspace: Give FinOps, engineering, and business leaders shared dashboards, facilitating informed decisions and reducing time spent on manual reconciliation.\n* Continual innovation: Stellans supports seamless integration as Snowflake releases improvements (like enhanced ORGANIZATION\\_USAGE for cross-account rollups and new compliance guardrails).\n\nReady to automate Snowflake credit usage monitoring? [Request a Stellans demo](https://stellans.io/) and put your FinOps on autopilot.\n\nManual dashboards are a strong starting point, but unlocking true governance, scalability, and audit compliance calls for dedicated automation. Stellans bridges the gap\u2014giving your technical and financial teams the confidence to control spend as you grow.\n\n## Frequently Asked Questions (FAQ)\n\n### **How do you set up credit usage alerts in Snowflake?**\n\nTo stay ahead of budget overruns, use [Resource Monitors](https://docs.snowflake.com/en/user-guide/resource-monitors) to define credit usage thresholds by account or warehouse. You can configure actions like notifications or automatic suspension when predefined limits (such as 80% and 95%) are reached. Best practice is to attach Resource Monitors to all production warehouses and set multiple thresholds to avoid disruption and enable proactive cost management.\n\nFor an illustrated walkthrough, see our [step-by-step cost alert guide](https://stellans.io/set-up-snowflake-cost-alerts-in-10-minutes-step-by-step/) .\n\n### **What is the difference between Snowflake Resource Monitors and Budgets?**\n\nResource Monitors are technical control tools that can act directly\u2014such as suspending a warehouse or notifying when a credit threshold is reached. [Budgets](https://docs.snowflake.com/en/user-guide/resource-monitors) , currently in preview, focus on monitoring and notifying without direct enforcement. Budgets are best for tracking and alerting across Snowflake objects (warehouses, databases, etc.) to support financial oversight and compliance.\n\n* Resource Monitors: Enforce spend limits with technical actions; ideal for automated governance.\n* Budgets: Enable broader monitoring and alerts, supporting financial planning, but do not suspend workloads.\n\nBoth are essential: Resource Monitors help control risk, while Budgets provide cross-account financial visibility.\n\n## Article By:\n\n##### David Ashirov\n\nCo-founder and CTO of Stellans\n\nGet free consultation\n\n## Related Posts\n\n[David Ashirov](https://stellans.io/control-snowflake-time-travel-cost-a-practical-guide-to-retention-policies/)\n\n15 minutes to read\n\nControl Snowflake Time-Travel Cost\n\nSeptember 30, 2025\n\n[explore](https://stellans.io/control-snowflake-time-travel-cost-a-practical-guide-to-retention-policies/)\n\n[Roman Sterjanov](https://stellans.io/snowflake-clustering-keys/)\n\n14 minutes to read\n\nSnowflake Clustering Keys\n\nOctober 30, 2025\n\n[explore](https://stellans.io/snowflake-clustering-keys/)\n\n[David Ashirov](https://stellans.io/snowflake-data-loading-best-practices-a-guide-to-copy-stages-and-snowpipe/)\n\n9 minutes to read\n\nSnowflake Data Loading Guide\n\nOctober 9, 2025\n\n[explore](https://stellans.io/snowflake-data-loading-best-practices-a-guide-to-copy-stages-and-snowpipe/)\n\n## Let\u2019s  \nTalk\n\n#### Get a Free Data Audit\n\n\\* You can attach up to 3 files, each up to 3MB, in doc, docx, pdf, ppt, or pptx format.\n\n### Subscribe\n\nJoin our mailing list for updates.\n\nBy subscribing, you agree to our Privacy Policy and consent to receive updates.\n\n#### Connect with us:\n\n[](https://www.linkedin.com/company/stellans/) [](https://clutch.co/profile/stellans)\n\nStellans, LLC\n\n\\+ 1 917-363-4259\n\ninfo@stellans.io\n\n30 N Gould St, Ste R Sheridan, Wyoming, US\n\n* [Privacy Policy](https://stellans.io/privacy-policy/)\n\n### Get a Free Consultation\n\n#### Let's talk about\n\nyour project\n\n\\* You can attach up to 3 files, each up to 3MB, in doc, docx, pdf, ppt, or pptx format.\n\n#### Select an available slot to\n\nget in touch with Stellans\n\nso that one of our representatives can contact you and start a discussion.\n\n#### David Ashirov\n\n##### Co-founder, CTO\n\n###### 30 minutes\n\nHello,\n\nThank you for your interest in Stellan\u2019s Data Services. After you fill out this form, one of our team members will get in touch with you at the requested time to discuss your tech initiative.\n\nWe can\u2019t wait to deliver the best results to you!\n\n#### Contact us\n\n\\+ 1 917-363-4259\n\ndavid@stellans.io\n\n#### Select an available slot to\n\nget in touch with Stellans\n\nso that one of our representatives can contact you and start a discussion.\n\n#### Anton Malyshev\n\n##### Co-founder, COO\n\n###### 30 minutes\n\nHello,\n\nThank you for your interest in Stellan\u2019s Data Services. After you fill out this form, one of our team members will get in touch with you at the requested time to discuss your tech initiative.\n\nWe can\u2019t wait to deliver the best results to you!\n\n#### Contact us\n\n\\+ 1 917-363-4259\n\nanton@stellans.io\n\n#### Select an available slot to\n\nget in touch with Stellans\n\nso that one of our representatives can contact you and start a discussion.\n\n#### Vitaly Lilich\n\n##### Co-founder, CEO\n\n###### 30 minutes\n\nHello,\n\nThank you for your interest in Stellan\u2019s Data Services. After you fill out this form, one of our team members will get in touch with you at the requested time to discuss your tech initiative.\n\nWe can\u2019t wait to deliver the best results to you!\n\n#### Contact us\n\n\\+ 1 917-363-4259\n\nvitaly@stellans.io\n\n# Thank  \nYou\n\nFor contacting us!  \nWe'll contact you as soon as  \npossible.\n\n[Read our blog](https://stellans.io/blog) Back\n\n# Thank  \nYou\n\nThe report is on its way and should arrive at the email address you provided shortly.\n\n[Read our blog](https://stellans.io/blog) Back\n\n# Thank  \nYou\n\nYou\u2019re all set! Stay tuned for the latest updates and insights delivered right to your inbox.\n\n[Read our blog](https://stellans.io/blog) Back"
      ]
    },
    {
      "url": "https://docs.snowflake.cn/en/release-notes/2025/other/2025-12-15-catalog-linked-db-usage-history",
      "title": "Dec 15, 2025: Account Usage - Snowflake Documentation",
      "excerpts": [
        "15 Dec 2025 \u00b7 It includes compute and cloud services credit usage for each entity during an operation. For more information, see\u00a0..."
      ]
    }
  ],
  "usage": [
    {
      "name": "sku_search",
      "count": 1
    }
  ]
}
