{"extract_id":"extract_2e00a737e07d4e22b2bf42d4883d44df","results":[{"url":"https://docs.snowflake.com/en/user-guide/cost-attributing","title":"Attributing cost | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Visibility Attributing cost\n\n# Attributing cost [¶]( \"Link to this heading\")\n\nAn organization can apportion the cost of using Snowflake to logical units within the organization (for example, to different\ndepartments, environments, or projects). This chargeback or showback model is useful for accounting purposes and pinpoints\nareas of the organization that could benefit from controls and optimizations that can reduce costs.\n\nTo attribute costs to different groups like departments or projects, use the following recommended approach:\n\n* Use [object tags](object-tagging/introduction) to associate resources and users with departments or projects.\n* Use [query tags](../sql-reference/parameters.html) to associate individual queries with departments or projects when the queries are\n  made by the same application on behalf of users belonging to multiple departments.\n\n## Types of cost attribution scenarios [¶]( \"Link to this heading\")\n\nThe following cost attribution scenarios are the most commonly encountered. In these scenarios, warehouses are used as an\nexample of a resource that incurs costs.\n\n* **Resources used exclusively by a single cost center or department:** An example of this is using object tags to associate\n  warehouses with a department. You can use these object tags to attribute the costs incurred by those warehouses to that\n  department entirely.\n  \n  [](../_images/cost-attribute-non-shared.png)\n* **Resources that are shared by users from multiple departments:** An example of this is a warehouse shared by users from\n  different departments. In this case, you use object tags to associate each user with a department. The costs of queries are\n  attributed to the users. Using the object tags assigned to users, you can break down the costs by department.\n  \n  [](../_images/cost-attribute-user-level-share.png)\n* **Applications or workflows shared by users from different departments:** An example of this is an application that issues\n  queries on behalf of its users. In this case, each query executed by the application is assigned a query tag that identifies\n  the team or cost center of the user on whose behalf the query is being made.\n  \n  [](../_images/cost-attribute-app-level-share.png)\n\nThe next sections explain how to set up object tags in your accounts and provide the details for each of these cost attribution\nscenarios.\n\n## Setting up object tags for cost attribution [¶]( \"Link to this heading\")\n\nWhen you set up tags to represent the groupings that you want to use for cost attribution, you should determine if the\ngroupings apply to a single account or multiple accounts. This determines how you set up your tags.\n\nFor example, suppose that you want to attribute costs based on department.\n\n* If the resources used by the department are located in a single account, you create the tags in a database in that account.\n* If the resources used by the department span multiple accounts, you [create the tags]() in a key account in your organization (for example, in your [organization account](organization-accounts) ),\n  and you make those tags available in other accounts through [replication]() .\n\nThe next sections explain how to create the tags, replicate the tags, and apply the tags to resources.\n\n* [Creating the tags]()\n* [Replicating the tag database]()\n* [Tagging the resources and users]()\n\nNote\n\nThe examples in these sections use the custom role `tag_admin` , which is assumed to have been granted the privileges to\ncreate and manage tags. Within your organization, you can use more granular [privileges for object tagging](object-tagging/work.html) to develop a secure tagging strategy.\n\n### Creating the tags [¶]( \"Link to this heading\")\n\nAs part of designing the strategy, decide on the database and schema where you plan to create the tags.\n\n* You can create a dedicated database and schema for the tags.\n* If you want to tag resources in different accounts across your organization, you can create the tags in a key account in your\n  organization (for example, in your [organization account](organization-accounts) ).\n\nThe following example creates a database named `cost_management` and a schema named `tags` for the tags that you plan to use:\n\n```\nUSE ROLE tag_admin ; \n\n CREATE DATABASE cost_management ; \n CREATE SCHEMA tags ;\n```\n\nCopy\n\nWith `cost_management` and `tags` selected as the current database and schema, create a tag named `cost_center` and set\nthe values allowed for the tag to the names of cost centers:\n\n```\nCREATE TAG cost_center \n  ALLOWED_VALUES 'finance' , 'marketing' , 'engineering' , 'product' ;\n```\n\nCopy\n\n### Replicating the tag database [¶]( \"Link to this heading\")\n\nIf you have an organization with multiple accounts and you want to make the tags available in these other accounts, [set up your accounts for replication](account-replication-config) , and [create a replication group](../sql-reference/sql/create-replication-group) in a main account (for example, in the [organization account](organization-accounts) ). Set up this replication group to replicate the database\ncontaining the tags.\n\n[](../_images/cost-attribute-replication.png)\n\nFor example, to replicate the tags to the accounts named `my_org.my_account` and `my_org.my_account_2` , execute this\nstatement in your organization account:\n\n```\nCREATE REPLICATION GROUP cost_management_repl_group \n  OBJECT_TYPES = DATABASES \n  ALLOWED_DATABASES = cost_management \n  ALLOWED_ACCOUNTS = my_org . my_account_1 , my_org . my_account_2 \n  REPLICATION_SCHEDULE = '10 MINUTE' ;\n```\n\nCopy\n\nThen, in each account in which you want to make the tags available, create a secondary replication group, and refresh this\ngroup from the primary group:\n\n```\nCREATE REPLICATION GROUP cost_management_repl_group \n  AS REPLICA OF my_org . my_org_account . cost_management_repl_group ; \n\n ALTER REPLICATION GROUP cost_management_repl_group REFRESH ;\n```\n\nCopy\n\n### Tagging the resources and users [¶]( \"Link to this heading\")\n\nAfter creating and replicating the tags, you can use these tags to identify the warehouses and users belonging to each\ndepartment. For example, because the sales department uses both `warehouse1` and `warehouse2` , you can set the `cost_center` tag to `'SALES'` for both warehouses.\n\nTip\n\nIdeally, you should have workflows that automate the process of applying these tags when you create resources and users.\n\n```\nUSE ROLE tag_admin ; \n\n ALTER WAREHOUSE warehouse1 SET TAG cost_management . tags . cost_center = 'SALES' ; \n ALTER WAREHOUSE warehouse2 SET TAG cost_management . tags . cost_center = 'SALES' ; \n ALTER WAREHOUSE warehouse3 SET TAG cost_management . tags . cost_center = 'FINANCE' ; \n\n ALTER USER finance_user SET TAG cost_management . tags . cost_center = 'FINANCE' ; \n ALTER USER sales_user SET TAG cost_management . tags . cost_center = 'SALES' ;\n```\n\nCopy\n\n## Viewing cost by tag in SQL [¶]( \"Link to this heading\")\n\nYou can attribute costs within an account or across accounts in an organization:\n\n* **Attributing costs within an account**\n  \n  You can attribute costs within an account by querying the following views in the [ACCOUNT\\_USAGE](../sql-reference/account-usage) schema:\n  \n    + [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) : Identifies objects (for example, warehouses and users) that have tags.\n    + [WAREHOUSE\\_METERING\\_HISTORY view](../sql-reference/account-usage/warehouse_metering_history) : Provides credit usage for warehouses.\n    + [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) : Provides the compute costs for queries. The cost per query is\n        the warehouse credit usage for executing the query.\n        \n        For more information on using this view, see [About the QUERY\\_ATTRIBUTION\\_HISTORY view]() .\n* **Attributing costs across accounts in an organization**\n  \n  Within an organization, you can also attribute costs for resources that are used **exclusively by a single department** by\n  querying views in the [ORGANIZATION\\_USAGE](../sql-reference/organization-usage) schema from the [organization account](organization-accounts) .\n  \n  Note\n  \n    + In the ORGANIZATION\\_USAGE schema, the TAG\\_REFERENCES view is only available in the organization account.\n    + The QUERY\\_ATTRIBUTION\\_HISTORY view is only available in the ACCOUNT\\_USAGE schema for an account. There is no\n        organization-wide equivalent of the view.\n\nThe next sections explain how to attribute costs for some of the [common cost-attribution scenarios]() :\n\n* [Resources not shared by departments]()\n* [Resources shared by users from different departments]()\n* [Resources used by applications that need to attribute costs to different departments]()\n\n### Resources not shared by departments [¶]( \"Link to this heading\")\n\nSuppose that you want to attribute costs by department and that each department uses a set of dedicated warehouses.\n\nIf you tag warehouses with a `cost_center` tag to identify the department that owns the warehouse, you can join the\nACCOUNT\\_USAGE [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) with the [WAREHOUSE\\_METERING\\_HISTORY view](../sql-reference/account-usage/warehouse_metering_history) on the `object_id` and `warehouse_id` columns to get usage\ninformation by warehouse, and you can use the `tag_value` column to identify the departments that own those warehouses.\n\nThe following SQL statement performs this join:\n\n```\nSELECT \n    TAG_REFERENCES . tag_name , \n    COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) AS tag_value , \n    SUM ( WAREHOUSE_METERING_HISTORY . credits_used_compute ) AS total_credits \n  FROM \n    SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      LEFT JOIN SNOWFLAKE . ACCOUNT_USAGE . TAG_REFERENCES \n        ON WAREHOUSE_METERING_HISTORY . warehouse_id = TAG_REFERENCES . object_id \n          AND TAG_REFERENCES . domain = 'WAREHOUSE' \n  WHERE \n    WAREHOUSE_METERING_HISTORY . start_time >= DATE_TRUNC ( 'MONTH' , DATEADD ( MONTH , - 1 , CURRENT_DATE )) \n      AND WAREHOUSE_METERING_HISTORY . start_time < DATE_TRUNC ( 'MONTH' ,  CURRENT_DATE ) \n  GROUP BY TAG_REFERENCES . tag_name , COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n```\n+-------------+-------------+-----------------+ \n | TAG_NAME    | TAG_VALUE   |   TOTAL_CREDITS | \n |-------------+-------------+-----------------| \n | NULL        | untagged    |    20.360277159 | \n | COST_CENTER | Sales       |    17.173333333 | \n | COST_CENTER | Finance     |      8.14444444 | \n +-------------+-------------+-----------------+\n```\n\nYou can run a similar query to perform the same attribution for all the accounts in your organization using views in the\nORGANIZATION\\_USAGE schema from the [organization account](organization-accounts) . The rest of the query\ndoes not change.\n\n```\nSELECT \n    TAG_REFERENCES . tag_name , \n    COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) AS tag_value , \n    SUM ( WAREHOUSE_METERING_HISTORY . credits_used_compute ) AS total_credits \n  FROM \n    SNOWFLAKE . ORGANIZATION_USAGE . WAREHOUSE_METERING_HISTORY \n      LEFT JOIN SNOWFLAKE . ORGANIZATION_USAGE . TAG_REFERENCES \n        ON WAREHOUSE_METERING_HISTORY . warehouse_id = TAG_REFERENCES . object_id \n          AND TAG_REFERENCES . domain = 'WAREHOUSE' \n          AND tag_database = 'COST_MANAGEMENT' AND tag_schema = 'TAGS' \n  WHERE \n    WAREHOUSE_METERING_HISTORY . start_time >= DATE_TRUNC ( 'MONTH' , DATEADD ( MONTH , - 1 , CURRENT_DATE )) \n      AND WAREHOUSE_METERING_HISTORY . start_time < DATE_TRUNC ( 'MONTH' ,  CURRENT_DATE ) \n  GROUP BY TAG_REFERENCES . tag_name , COALESCE ( TAG_REFERENCES . tag_value , 'untagged' ) \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n### Resources shared by users from different departments [¶]( \"Link to this heading\")\n\nSuppose that users in different departments share the same warehouses and you want to break down the credits used by each\ndepartment. You can tag the users with a `cost_center` tag to identify the department that they belong to, and you can join\nthe [TAG\\_REFERENCES view](../sql-reference/account-usage/tag_references) with the [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) .\n\nNote\n\nYou can only get this data for a single account at a time. You cannot execute a query that retrieves this data across\naccounts in an organization.\n\nThe next sections provide examples of SQL statements for attributing costs for shared resources.\n\n* [Calculating the cost of user queries for the last month]()\n* [Calculating the cost of user queries by department without idle time]()\n* [Calculating the cost of queries by users without idle time]()\n* [Calculating the cost of queries by users without tags]()\n\n#### Calculating the cost of user queries for the last month [¶]( \"Link to this heading\")\n\nThis following SQL statement calculates the costs for the last month.\n\nIn this example, idle time is distributed among the users in proportion to their usage.\n\n```\nWITH \n  wh_bill AS ( \n    SELECT SUM ( credits_used_compute ) AS compute_credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n        AND start_time < CURRENT_DATE \n  ), \n  user_credits AS ( \n    SELECT user_name , SUM ( credits_attributed_compute ) AS credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n        AND start_time < CURRENT_DATE \n      GROUP BY user_name \n  ), \n  total_credit AS ( \n    SELECT SUM ( credits ) AS sum_all_credits \n    FROM user_credits \n  ) \n SELECT \n    u . user_name , \n    u . credits / t . sum_all_credits * w . compute_credits AS attributed_credits \n  FROM user_credits u , total_credit t , wh_bill w \n  ORDER BY attributed_credits DESC ;\n```\n\nCopy\n\n```\n+-----------+--------------------+ \n | USER_NAME | ATTRIBUTED_CREDITS | \n |-----------+--------------------+ \n | FINUSER   | 6.603575468        | \n | SALESUSER | 4.321378049        | \n | ENGUSER   | 0.6217131392       | \n |-----------+--------------------+\n```\n\n#### Calculating the cost of user queries by department without idle time [¶]( \"Link to this heading\")\n\nThe following example attributes the compute cost to each department through the queries executed by users in that department.\nThis query depends on the user objects having a tag that identifies their department.\n\n```\nWITH joined_data AS ( \n  SELECT \n      tr . tag_name , \n      tr . tag_value , \n      qah . credits_attributed_compute , \n      qah . start_time \n    FROM SNOWFLAKE . ACCOUNT_USAGE . TAG_REFERENCES tr \n      JOIN SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY qah \n        ON tr . domain = 'USER' AND tr . object_name = qah . user_name \n ) \n SELECT \n    tag_name , \n    tag_value , \n    SUM ( credits_attributed_compute ) AS total_credits \n  FROM joined_data \n  WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY tag_name , tag_value \n  ORDER BY tag_name , tag_value ;\n```\n\nCopy\n\n```\n+-------------+-------------+-----------------+ \n | TAG_NAME    | TAG_VALUE   |   TOTAL_CREDITS | \n |-------------+-------------+-----------------| \n | COST_CENTER | engineering |   0.02493688426 | \n | COST_CENTER | finance     |    0.2281084988 | \n | COST_CENTER | marketing   |    0.3686840545 | \n |-------------+-------------+-----------------|\n```\n\n#### Calculating the cost of queries by users without idle time [¶]( \"Link to this heading\")\n\nThis following SQL statement calculates the costs per user for the past month (excluding idle time).\n\n```\nSELECT user_name , SUM ( credits_attributed_compute ) AS credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE \n    start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY user_name ;\n```\n\nCopy\n\n```\n+-----------+--------------------+ \n | USER_NAME | ATTRIBUTED_CREDITS | \n |-----------+--------------------| \n | JSMITH    |       17.173333333 | \n | MJONES    |         8.14444444 | \n | SYSTEM    |         5.33985393 | \n +-----------+--------------------+\n```\n\n#### Calculating the cost of queries by users without tags [¶]( \"Link to this heading\")\n\nThe following example calculates the cost of queries by users who are not tagged. You can use this to verify that tags are\nbeing applied consistently to users.\n\n```\nSELECT qah . user_name , SUM ( qah . credits_attributed_compute ) as total_credits \n  FROM \n    SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY qah \n    LEFT JOIN snowflake . account_usage . tag_references tr \n    ON qah . user_name = tr . object_name AND tr . DOMAIN = 'USER' \n  WHERE \n    start_time >= dateadd ( month , - 1 , current_date ) \n    AND qah . user_name IS NULL OR tr . object_name IS NULL \n  GROUP BY qah . user_name \n  ORDER BY total_credits DESC ;\n```\n\nCopy\n\n```\n+------------+---------------+ \n | USER_NAME  | TOTAL_CREDITS | \n |------------+---------------| \n | RSMITH     |  0.1830555556 | \n +------------+---------------+\n```\n\n### Resources used by applications that need to attribute costs to different departments [¶]( \"Link to this heading\")\n\nThe examples in this section calculate the costs for one or more applications that are powered by Snowflake.\n\nThe examples assume that these applications set query tags that identify the application for all queries executed. To set the\nquery tag for queries in a session, execute the [ALTER SESSION](../sql-reference/sql/alter-session) command. For example:\n\n```\nALTER SESSION SET QUERY_TAG = 'COST_CENTER=finance' ;\n```\n\nCopy\n\nThis associates the `COST_CENTER=finance` tag with all subsequent queries executed during the session.\n\nYou can then use the query tag to trace back the cost incurred by these queries to the appropriate departments.\n\nThe next sections provide examples of using this approach.\n\n* [Calculating the cost of queries by department]()\n* [Calculating the cost of queries (excluding idle time) by query tag]()\n* [Calculating the cost of queries (including idle time) by query tag]()\n\n#### Calculating the cost of queries by department [¶]( \"Link to this heading\")\n\nThe following example calculates the compute credits and the credits used for the [query acceleration service](query-acceleration-service) for the finance department. This depends on the `COST_CENTER=finance` query tag being applied to the original queries that were executed.\n\nNote that the costs exclude idle time.\n\n```\nSELECT \n    query_tag , \n    SUM ( credits_attributed_compute ) AS compute_credits , \n    SUM ( credits_used_query_acceleration ) AS qas \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE query_tag = 'COST_CENTER=finance' \n  GROUP BY query_tag ;\n```\n\nCopy\n\n```\n+---------------------+-----------------+------+ \n | QUERY_TAG           | COMPUTE_CREDITS | QAS  | \n |---------------------+-----------------|------| \n | COST_CENTER=finance |      0.00576115 | null | \n +---------------------+-----------------+------+\n```\n\n#### Calculating the cost of queries (excluding idle time) by query tag [¶]( \"Link to this heading\")\n\nThe following example calculates the cost of queries by query tag and includes queries without tags (identified as “untagged”).\n\n```\nSELECT \n    COALESCE ( NULLIF ( query_tag , '' ), 'untagged' ) AS tag , \n    SUM ( credits_attributed_compute ) AS compute_credits , \n    SUM ( credits_used_query_acceleration ) AS qas \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n  GROUP BY tag \n  ORDER BY compute_credits DESC ;\n```\n\nCopy\n\n```\n+-------------------------+-----------------+------+ \n | TAG                     | COMPUTE_CREDITS | QAS  | \n |-------------------------+-----------------+------+ \n | untagged                | 3.623173449     | null | \n | COST_CENTER=engineering | 0.531431948     | null | \n |-------------------------+-----------------+------+\n```\n\n#### Calculating the cost of queries (including idle time) by query tag [¶]( \"Link to this heading\")\n\nThe following example distributes the idle time that is not captured in the per-query cost across departments in proportion\nto their usage of the warehouse.\n\n```\nWITH \n  wh_bill AS ( \n    SELECT SUM ( credits_used_compute ) AS compute_credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . WAREHOUSE_METERING_HISTORY \n      WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n      AND start_time < CURRENT_DATE \n  ), \n  tag_credits AS ( \n    SELECT \n        COALESCE ( NULLIF ( query_tag , '' ), 'untagged' ) AS tag , \n        SUM ( credits_attributed_compute ) AS credits \n      FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n      WHERE start_time >= DATEADD ( MONTH , - 1 , CURRENT_DATE ) \n      GROUP BY tag \n  ), \n  total_credit AS ( \n    SELECT SUM ( credits ) AS sum_all_credits \n      FROM tag_credits \n  ) \n SELECT \n    tc . tag , \n    tc . credits / t . sum_all_credits * w . compute_credits AS attributed_credits \n  FROM tag_credits tc , total_credit t , wh_bill w \n  ORDER BY attributed_credits DESC ;\n```\n\nCopy\n\n```\n+-------------------------+--------------------+ \n | TAG                     | ATTRIBUTED_CREDITS | \n +-------------------------+--------------------| \n | untagged                |        9.020031304 | \n | COST_CENTER=finance     |        1.027742521 | \n | COST_CENTER=engineering |        1.018755812 | \n | COST_CENTER=marketing   |       0.4801370376 | \n +-------------------------+--------------------+\n```\n\n## Viewing cost by tag in Snowsight [¶]( \"Link to this heading\")\n\nYou can attribute costs by reporting on the use of resources that have the `cost_center` tag. You can access this data in [Snowsight](ui-snowsight-gs.html) .\n\n1. Switch to a role that has [access to the ACCOUNT\\_USAGE schema](../sql-reference/account-usage.html) .\n2. In the navigation menu, select Admin » Cost management .\n3. Select Consumption .\n4. From the Tags drop-down, select the `cost_center` tag.\n5. To focus on a specific cost center, select a value from the list of the tag’s values.\n6. Select Apply .\n\nFor more details about filtering in Snowsight, see [Filter by tag](cost-exploring-compute.html) .\n\n## About the QUERY\\_ ATTRIBUTION\\_ HISTORY view [¶]( \"Link to this heading\")\n\nYou can use the [QUERY\\_ATTRIBUTION\\_HISTORY view](../sql-reference/account-usage/query_attribution_history) to attribute cost based on queries. The cost per\nquery is the warehouse credit usage for executing the query. This cost does not include any other credit usage that is incurred\nas a result of query execution. For example, the following are not included in the query cost:\n\n* Data transfer costs\n* Storage costs\n* Cloud services costs\n* Costs for serverless features\n* Costs for tokens processed by AI services\n\nFor queries that are executed concurrently, the cost of the warehouse is attributed to individual queries based on the weighted\naverage of their resource consumption during a given time interval.\n\nThe cost per query does not include warehouse _idle time_ . Idle time is a period of time in which no queries are running in the\nwarehouse and can be measured at the warehouse level.\n\n## Additional examples of queries [¶]( \"Link to this heading\")\n\nThe next sections provide additional queries that you can use for cost attribution:\n\n* [Grouping similar queries]()\n* [Attributing costs of hierarchical queries]()\n\n### Grouping similar queries [¶]( \"Link to this heading\")\n\nFor recurrent or similar queries, use the `query_hash` or `query_parameterized_hash` to group costs\nby query.\n\nTo find the most expensive recurrent queries for the current month, execute the following statement:\n\n```\nSELECT query_parameterized_hash , \n       COUNT (*) AS query_count , \n       SUM ( credits_attributed_compute ) AS total_credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n  AND start_time < CURRENT_DATE \n  GROUP BY query_parameterized_hash \n  ORDER BY total_credits DESC \n  LIMIT 20 ;\n```\n\nCopy\n\nFor an additional query based on query ID, see [Examples](../sql-reference/account-usage/query_attribution_history.html) .\n\n### Attributing costs of hierarchical queries [¶]( \"Link to this heading\")\n\nFor stored procedures that issue multiple hierarchical queries, you can compute the attributed query costs for the\nprocedure by using the root query ID for the procedure.\n\n1. To find the root query ID for a stored procedure, use the [ACCESS\\_HISTORY view](../sql-reference/account-usage/access_history) . For example,\n   to find the root query ID for a stored procedure, set the `query_id` and execute the following statements:\n   \n   ```\n   SET query_id = '<query_id>' ; \n   \n    SELECT query_id , \n          parent_query_id , \n          root_query_id , \n          direct_objects_accessed \n     FROM SNOWFLAKE . ACCOUNT_USAGE . ACCESS_HISTORY \n     WHERE query_id = $ query_id ;\n   ```\n   \n   Copy\n   \n   For more information, see [Example: Ancestor queries with stored procedures](access-history.html) .\n2. To sum the query cost for the entire procedure, replace `<root_query_id>` and execute the following statements:\n   \n   ```\n   SET query_id = '<root_query_id>' ; \n   \n    SELECT SUM ( credits_attributed_compute ) AS total_attributed_credits \n     FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n     WHERE ( root_query_id = $ query_id OR query_id = $ query_id );\n   ```\n   \n   Copy\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nLanguage: **English**\n\n* [English](/en/user-guide/cost-attributing)\n* [Français](/fr/user-guide/cost-attributing)\n* [Deutsch](/de/user-guide/cost-attributing)\n* [日本語](/ja/user-guide/cost-attributing)\n* [한국어](/ko/user-guide/cost-attributing)\n* [Português](/pt/user-guide/cost-attributing)\n"],"full_content":null},{"url":"https://docs.snowflake.com/en/release-notes/2024/other/2024-08-30-per-query-cost-attribution","title":"August 30, 2024 — Query attribution costs | Snowflake Documentation","publish_date":"2026-01-29","excerpts":["\nAugust 30, 2024 — Query attribution costs | Snowflake Documentation\n\n[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n1. [Overview](/en/release-notes/overview \"Overview\")\n3. Release notes\n4. [All release notes](/en/release-notes/all-release-notes \"All release notes\")\n5. [Snowflake server release notes and feature updates](/en/release-notes/new-features \"Snowflake server release notes and feature updates\")\n\n   * Upcoming (or in progress) server release notes\n   * [Preview - 10.3](/en/release-notes/2026/10_3 \"Preview - 10.3\")\n   * Recent server release notes\n   * [Jan 26-30, 2026 - 10.2](/en/release-notes/2026/10_2 \"Jan 26-30, 2026 - 10.2\")\n   * [Jan 19-23, 2026 - 10.1 (with behavior changes)](/en/release-notes/2026/10_1 \"Jan 19-23, 2026 - 10.1 (with behavior changes)\")\n   * [Jan 12-15, 2026 - 10.0](/en/release-notes/2026/10_0 \"Jan 12-15, 2026 - 10.0\")\n   * [Dec 15, 2025-Jan 09, 2026 - 9.40](/en/release-notes/2025/9_40 \"Dec 15, 2025-Jan 09, 2026 - 9.40\")\n   * [Dec 08-12, 2025 - 9.39](/en/release-notes/2025/9_39 \"Dec 08-12, 2025 - 9.39\")\n   * Recent feature updates\n   * [Jan 30, 2026 - New regions](/en/release-notes/2026/other/2026-01-30-new-regions \"Jan 30, 2026 - New regions\")\n   * [Jan 30, 2026 - Support for bi-directional data access with Microsoft Fabric (General availability)](/en/release-notes/2026/other/2026-01-30-iceberg-microsoft-fabric-bidirectional-data-access-ga \"Jan 30, 2026 - Support for bi-directional data access with Microsoft Fabric (General availability)\")\n   * [Jan 29, 2026 - Apache DataSketches functions (General availability)](/en/release-notes/2026/other/2026-01-29-datasketches-functions-ga \"Jan 29, 2026 - Apache DataSketches functions (General availability)\")\n   * [Jan 29, 2026 - Snowflake Data Clean Rooms updates](/en/release-notes/2026/other/2026-01-29-dcr \"Jan 29, 2026 - Snowflake Data Clean Rooms updates\")\n   * [Jan 28, 2026 - Fine-tuning arctic-extract models (Preview)](/en/release-notes/2026/other/2026-01-28-fine-tuning-arctic-extract-models \"Jan 28, 2026 - Fine-tuning arctic-extract models (Preview)\")\n   * [Jan 28, 2026 - Private connectivity for TSS on Google Cloud (General availability)](/en/release-notes/2026/other/2026-01-28-tss-private-connectivity-gcp \"Jan 28, 2026 - Private connectivity for TSS on Google Cloud (General availability)\")\n   * [Jan 27, 2026 - Estimate token usage with AI\\_COUNT\\_TOKENS (General availability)](/en/release-notes/2026/other/2026-01-27-ai-count-tokens-function-ga \"Jan 27, 2026 - Estimate token usage with AI_COUNT_TOKENS (General availability)\")\n   * [Jan 27, 2026 - Enforce data protection policies when querying Apache Iceberg™ tables from Apache Spark](/en/release-notes/2026/other/2026-01-27-iceberg-enforce-access-policies-on-tables-queried-from-apache-spark \"Jan 27, 2026 - Enforce data protection policies when querying Apache Iceberg™ tables from Apache Spark\")\n   * [Jan 26, 2026 - Extract images with AI\\_PARSE\\_DOCUMENT (Preview)](/en/release-notes/2026/other/2026-01-26-ai-parse-document-images-preview \"Jan 26, 2026 - Extract images with AI_PARSE_DOCUMENT (Preview)\")\n   * [Jan 26, 2026 - Dynamic task configuration with EXECUTE TASK](/en/release-notes/2026/other/2026-01-26-dynamic-task-config \"Jan 26, 2026 - Dynamic task configuration with EXECUTE TASK\")\n   * [Jan 23, 2026 - Organization users (General availability)](/en/release-notes/2026/other/2026-01-23-org-users-ga \"Jan 23, 2026 - Organization users (General availability)\")\n   * [Jan 23, 2026 - Expanded support for storage lifecycle policies](/en/release-notes/2026/other/2026-01-23-storage-lifecycle-policies-azure \"Jan 23, 2026 - Expanded support for storage lifecycle policies\")\n   * [Jan 23, 2026 - Network policies for External OAuth](/en/release-notes/2026/other/2026-01-23-network-policies-external-oauth \"Jan 23, 2026 - Network policies for External OAuth\")\n   * [Jan 23, 2026 - Malicious IP Protection updates](/en/release-notes/2026/other/2026-01-23-malicious-ip-protection \"Jan 23, 2026 - Malicious IP Protection updates\")\n   * [Jan 23, 2026 - Consumer-controlled maintenance policies for Snowflake Native Apps (Preview)](/en/release-notes/2026/other/2026-01-23-native-apps-consumer-maintenance-policies \"Jan 23, 2026 - Consumer-controlled maintenance policies for Snowflake Native Apps (Preview)\")\n   * [Jan 22, 2026 - AI\\_FILTER (General availability)](/en/release-notes/2026/other/2026-01-22-ai-filter-ga \"Jan 22, 2026 - AI_FILTER (General availability)\")\n   * [Jan 22, 2026 - AI\\_AGG and AI\\_SUMMARIZE\\_AGG (General availability)](/en/release-notes/2026/other/2026-01-22-ai-agg-ai-summarize-agg-ga \"Jan 22, 2026 - AI_AGG and AI_SUMMARIZE_AGG (General availability)\")\n   * [Jan 22, 2026 - European Union categories for sensitive data classification](/en/release-notes/2026/other/2026-01-22-sensitive-data-classification-eu-india \"Jan 22, 2026 - European Union categories for sensitive data classification\")\n   * [Jan 22, 2026 - Document Processing Playground (General availability)](/en/release-notes/2026/other/2026-01-22-document-processing-playground \"Jan 22, 2026 - Document Processing Playground (General availability)\")\n   * [Jan 21, 2026 - Snowflake OAuth for local applications](/en/release-notes/2026/other/2026-01-21-snowflake-oauth-local-applications \"Jan 21, 2026 - Snowflake OAuth for local applications\")\n   * [Jan 20, 2026 - Shared Workspaces (General availability)](/en/release-notes/2026/other/2026-01-20-shared-workspaces \"Jan 20, 2026 - Shared Workspaces (General availability)\")\n   * [Jan 16, 2026 - Sensitive data classification in the Trust Center (Preview)](/en/release-notes/2026/other/2026-01-16-trust-center-sensitive-data-classification \"Jan 16, 2026 - Sensitive data classification in the Trust Center (Preview)\")\n   * [Jan 16, 2026 - External lineage (Preview)](/en/release-notes/2026/other/2026-01-16-external-lineage \"Jan 16, 2026 - External lineage (Preview)\")\n   * [Jan 15, 2026 - Snowflake Data Clean Rooms updates](/en/release-notes/2026/other/2026-01-15-dcr \"Jan 15, 2026 - Snowflake Data Clean Rooms updates\")\n   * [Jan 14, 2026 - Workspace replication (Preview)](/en/release-notes/2026/other/2026-01-14-workspace-replication \"Jan 14, 2026 - Workspace replication (Preview)\")\n   * [Jan 12, 2026 - Specifying custom instructions in semantic views](/en/release-notes/2026/other/2026-01-12-semantic-views-custom-instructions \"Jan 12, 2026 - Specifying custom instructions in semantic views\")\n   * [Jan 08, 2026 - Tri-Secret Secure in China (General availability)](/en/release-notes/2026/other/2026-01-08-tss-available-china \"Jan 08, 2026 - Tri-Secret Secure in China (General availability)\")\n   * [Jan 07, 2026 - Reorganized UI for listings](/en/release-notes/2026/other/2026-01-07-listings-ui-reorganization \"Jan 07, 2026 - Reorganized UI for listings\")\n   * [Dec 18, 2025 - Network rules and policies support Google Cloud Private Service Connect IDs (General availability)](/en/release-notes/2025/other/2025-12-18-gcp-pscid-network-rules-and-policies \"Dec 18, 2025 - Network rules and policies support Google Cloud Private Service Connect IDs (General availability)\")\n   * [Dec 17, 2025 - Schema evolution support for Snowpipe Streaming with high-performance architecture](/en/release-notes/2025/other/2025-12-17-schema-evolution-snowpipe-streaming \"Dec 17, 2025 - Schema evolution support for Snowpipe Streaming with high-performance architecture\")\n   * [Dec 17, 2025 - Snowflake Kafka High Performance connector (Preview)](/en/release-notes/2025/other/2025-12-17-kafkahp-pupr \"Dec 17, 2025 - Snowflake Kafka High Performance connector (Preview)\")\n   * [Dec 17, 2025 - Snowflake Postgres (Preview)](/en/release-notes/2025/other/2025-12-17-snowflake-postgres \"Dec 17, 2025 - Snowflake Postgres (Preview)\")\n   * [Dec 16, 2025 - Cortex Search multi-indexing and custom vector embedding (Preview)](/en/release-notes/2025/other/2025-12-16-cortex-search-multi-index-preview \"Dec 16, 2025 - Cortex Search multi-indexing and custom vector embedding (Preview)\")\n   * [Dec 16, 2025 - Notebooks in Workspaces (Preview)](/en/release-notes/2025/other/2025-12-16-notebooks-in-workspaces \"Dec 16, 2025 - Notebooks in Workspaces (Preview)\")\n   * [Dec 15, 2025: Account Usage: New CATALOG\\_LINKED\\_DATABASE\\_USAGE\\_HISTORY view](/en/release-notes/2025/other/2025-12-15-catalog-linked-db-usage-history \"Dec 15, 2025: Account Usage: New CATALOG_LINKED_DATABASE_USAGE_HISTORY view\")\n   * [Dec 15, 2025 - Vector aggregate functions](/en/release-notes/2025/other/2025-12-15-vector-aggregate-functions \"Dec 15, 2025 - Vector aggregate functions\")\n   * [Dec 12, 2025 - Private connectivity for internal stages on Google Cloud (General availability)](/en/release-notes/2025/other/2025-12-12-gcp-pl-internal-stages \"Dec 12, 2025 - Private connectivity for internal stages on Google Cloud (General availability)\")\n   * [Dec 11, 2025 - Default pipe for Snowpipe Streaming with high-performance architecture](/en/release-notes/2025/other/2025-12-11-default-pipe \"Dec 11, 2025 - Default pipe for Snowpipe Streaming with high-performance architecture\")\n   * [Dec 11, 2025 - Interactive tables and interactive warehouses (General availability)](/en/release-notes/2025/other/2025-12-11-interactive-tables-ga \"Dec 11, 2025 - Interactive tables and interactive warehouses (General availability)\")\n   * [Dec 11, 2025 - Snowflake Data Clean Rooms updates](/en/release-notes/2025/other/2025-12-11-dcr \"Dec 11, 2025 - Snowflake Data Clean Rooms updates\")\n   * [Dec 10, 2025 - WORM backups (General availability)](/en/release-notes/2025/other/2025-12-10-worm-backups \"Dec 10, 2025 - WORM backups (General availability)\")\n   * [Dec 10, 2025 - Cost anomalies (General availability)](/en/release-notes/2025/other/2025-12-02-cost-anomalies-ga \"Dec 10, 2025 - Cost anomalies (General availability)\")\n   * [Dec 08, 2025 - Dynamic tables: dual warehouses](/en/release-notes/2025/other/2025-12-08-dynamic-tables-dual-warehouses \"Dec 08, 2025 - Dynamic tables: dual warehouses\")\n   * [Dec 08, 2025 - AI\\_REDACT (General availability)](/en/release-notes/2025/other/2025-12-08-ai-redact-ga \"Dec 08, 2025 - AI_REDACT (General availability)\")\n   * [Dec 08, 2025 - Snowpipe simplified pricing](/en/release-notes/2025/other/2025-12-08-snowpipe-simplified-pricing \"Dec 08, 2025 - Snowpipe simplified pricing\")\n   * Earlier server release notes and feature updates\n   * [Earlier 2025 server release notes and feature updates](/en/release-notes/new-features-2025 \"Earlier 2025 server release notes and feature updates\")\n   * [2024 server release notes and feature updates](/en/release-notes/new-features-2024 \"2024 server release notes and feature updates\")\n\n     + [Server release notes](/en/release-notes/weekly-releases-2024 \"Server release notes\")\n     + [Feature updates](/en/release-notes/feature-releases-2024 \"Feature updates\")\n\n       - [Dec 19, 2024 - Notebooks warehouse runtime: AWS PrivateLink and Azure Private Link support - Preview](/en/release-notes/2024/other/2024-12-19-notebooks-wh-aws-azure-pl \"Dec 19, 2024 - Notebooks warehouse runtime: AWS PrivateLink and Azure Private Link support - Preview\")\n       - [Dec 19, 2024 - New Snowsight homepage](/en/release-notes/2024/other/2024-12-19-snowsight-homepage-ga \"Dec 19, 2024 - New Snowsight homepage\")\n       - [Dec 19, 2024 - Snowflake Native Apps with Azure Private Link support](/en/release-notes/2024/other/2024-12-19-na-az-gov-ga \"Dec 19, 2024 - Snowflake Native Apps with Azure Private Link support\")\n       - [Dec 18, 2024 - Inbound private connectivity to Snowpark Container Services](/en/release-notes/2024/other/2024-12-18-spcs-aws-inbound-private-connectivity \"Dec 18, 2024 - Inbound private connectivity to Snowpark Container Services\")\n       - [Dec 12, 2024 - Document AI](/en/release-notes/2024/other/2024-12-12-document-ai \"Dec 12, 2024 - Document AI\")\n       - [Dec 09, 2024 - Organizational listings: Discovery and access](/en/release-notes/2024/other/2024-12-09-dbna \"Dec 09, 2024 - Organizational listings: Discovery and access\")\n       - [Dec 09, 2024 - Using block storage with Snowpark Container Services job services](/en/release-notes/2024/other/2024-12-09-spcs-block-storage-for-jobs-in-preview \"Dec 09, 2024 - Using block storage with Snowpark Container Services job services\")\n       - [Dec 09, 2024 - Snowflake Native Apps with Azure Private Link support](/en/release-notes/2024/other/2024-12-09-na-az-privatelink \"Dec 09, 2024 - Snowflake Native Apps with Azure Private Link support\")\n       - [Dec 05, 2024 - Private Notebooks in a personal database](/en/release-notes/2024/other/2024-12-05-personal-db-private-nb \"Dec 05, 2024 - Private Notebooks in a personal database\")\n       - [Dec 05, 2024 - Cortex Powered Descriptions GA](/en/release-notes/2024/other/2024-12-05-cortex-descriptions \"Dec 05, 2024 - Cortex Powered Descriptions GA\")\n       - [Dec 03, 2024 - Snowflake Native Apps in Azure Government regions-preview](/en/release-notes/2024/other/2024-12-03-na-ga-gov-azure \"Dec 03, 2024 - Snowflake Native Apps in Azure Government regions-preview\")\n       - [Nov 27, 2024 - Snowflake Native Apps Multi app installs](/en/release-notes/2024/other/2024-11-27-na-mult-install \"Nov 27, 2024 - Snowflake Native Apps Multi app installs\")\n       - [Nov 25, 2024 - Data governance](/en/release-notes/2024/other/2024-11-26-data-governance \"Nov 25, 2024 - Data governance\")\n       - [Nov 25, 2024 - Cortex TRANSLATE update](/en/release-notes/2024/other/2024-11-25-cortex-translate-update \"Nov 25, 2024 - Cortex TRANSLATE update\")\n       - [Nov 21, 2024 - Logical replication of clones](/en/release-notes/2024/other/2024-11-21-logical-repl-clones \"Nov 21, 2024 - Logical replication of clones\")\n       - [Nov 21, 2024 - Data Clean Rooms](/en/release-notes/2024/other/2024-11-21-dcr \"Nov 21, 2024 - Data Clean Rooms\")\n       - [Nov 20, 2024 - Snowsight rate limits](/en/release-notes/2024/other/2024-11-20-snowsight-rate-limits \"Nov 20, 2024 - Snowsight rate limits\")\n       - [Nov 18, 2024 - S3-compatible storage for Apache Iceberg™ tables GA](/en/release-notes/2024/other/2024-11-18-s3-compatible-externally-managed-iceberg-ga \"Nov 18, 2024 - S3-compatible storage for Apache Iceberg™ tables GA\")\n       - [Nov 18, 2024 - Sensitive Data Classification](/en/release-notes/2024/other/2024-11-18-sensitive-data-classification \"Nov 18, 2024 - Sensitive Data Classification\")\n       - [Nov 15, 2024 - Apache Iceberg™ tables: Efficient bulk loading, continuous ingestion, and data streaming — GA](/en/release-notes/2024/other/2024-11-15-iceberg-tables-loading \"Nov 15, 2024 - Apache Iceberg™ tables: Efficient bulk loading, continuous ingestion, and data streaming — GA\")\n       - [Nov 14, 2024 - Manage account preview features](/en/release-notes/2024/other/2024-11-14-manage-preview \"Nov 14, 2024 - Manage account preview features\")\n       - [Nov 14, 2024 - Cortex Analyst](/en/release-notes/2024/other/2024-11-14-cortex-analyst \"Nov 14, 2024 - Cortex Analyst\")\n       - [Nov 13, 2024 - Hybrid tables support extended to additional AWS regions](/en/release-notes/2024/other/2024-11-13-hybrid-tables-ga-regions \"Nov 13, 2024 - Hybrid tables support extended to additional AWS regions\")\n       - [Nov 12, 2024 - Distributed Hyperparameter Optimization on SPCS](/en/release-notes/2024/other/2024-11-12-snowflake-ml-hpo-spcs \"Nov 12, 2024 - Distributed Hyperparameter Optimization on SPCS\")\n       - [Nov 12, 2024 - Organizational listings and the Internal Marketplace GA](/en/release-notes/2024/other/2024-11-12-organizational-listings \"Nov 12, 2024 - Organizational listings and the Internal Marketplace GA\")\n       - [Nov 12, 2024 - Dynamic tables: Support for reading from Iceberg tables and creating dynamic Apache Iceberg™ tables GA](/en/release-notes/2024/other/2024-11-12-dynamic-iceberg-tables \"Nov 12, 2024 - Dynamic tables: Support for reading from Iceberg tables and creating dynamic Apache Iceberg™ tables GA\")\n       - [Nov 12, 2024 - Budgets: Support for cloud provider queue and webhook notifications](/en/release-notes/2024/other/2024-11-12-budget-notification-queue-webhook \"Nov 12, 2024 - Budgets: Support for cloud provider queue and webhook notifications\")\n       - [Nov 12, 2024 - CREATE OR ALTER command preview](/en/release-notes/2024/other/2024-11-12-create-or-alter-pupr \"Nov 12, 2024 - CREATE OR ALTER command preview\")\n       - [Nov 12, 2024 - ML Functions - Classification GA](/en/release-notes/2024/other/2024-11-12-ml-functions-classification-ga \"Nov 12, 2024 - ML Functions - Classification GA\")\n       - [Nov 11, 2024 - Notebooks](/en/release-notes/2024/other/2024-11-11-notebooks-wh-ga \"Nov 11, 2024 - Notebooks\")\n       - [Nov 11, 2024 - Native App Framework releases](/en/release-notes/2024/other/2024-11-11-native-apps \"Nov 11, 2024 - Native App Framework releases\")\n       - [Nov 11, 2024 - Data Clean Rooms](/en/release-notes/2024/other/2024-11-11-dcr \"Nov 11, 2024 - Data Clean Rooms\")\n       - [Nov 08, 2024 - Grouped Query History](/en/release-notes/2024/other/2024-11-08-grouped-query-history \"Nov 08, 2024 - Grouped Query History\")\n       - [Nov 08, 2024 - Snowflake connector for Sharepoint](/en/release-notes/2024/other/2024-11-08 \"Nov 08, 2024 - Snowflake connector for Sharepoint\")\n       - [Nov 06, 2024 - SPLIT\\_TEXT\\_RECURSIVE\\_CHARACTER Cortex function](/en/release-notes/2024/other/2024-11-06-split-text-recursive-character \"Nov 06, 2024 - SPLIT_TEXT_RECURSIVE_CHARACTER Cortex function\")\n       - [Nov 04, 2024 - Replication error notifications GA](/en/release-notes/2024/other/2024-11-04-error-notifications \"Nov 04, 2024 - Replication error notifications GA\")\n       - [Nov 04, 2024 - Data Lineage preview](/en/release-notes/2024/other/2024-11-04-data-lineage \"Nov 04, 2024 - Data Lineage preview\")\n       - [Nov 04, 2024 - Native App support for AWS Private Link GA](/en/release-notes/2024/other/2024-11-04-na-aws-pl-ga \"Nov 04, 2024 - Native App support for AWS Private Link GA\")\n       - [Nov 04, 2024 - Classify Text GA](/en/release-notes/2024/other/2024-11-04-classify-text-ga \"Nov 04, 2024 - Classify Text GA\")\n       - [Nov 04, 2024 - Top Insights GA](/en/release-notes/2024/other/2024-11-04-top-insights-ga \"Nov 04, 2024 - Top Insights GA\")\n       - [Oct 30, 2024 - Hybrid tables GA](/en/release-notes/2024/other/2024-10-30-hybrid-tables-ga \"Oct 30, 2024 - Hybrid tables GA\")\n       - [Oct 29, 2024 - Universal Search on VPS](/en/release-notes/2024/other/2024-10-29-snowsight-vps \"Oct 29, 2024 - Universal Search on VPS\")\n       - [Oct 21, 2024 - Document AI GA](/en/release-notes/2024/other/2024-10-21-document-ai \"Oct 21, 2024 - Document AI GA\")\n       - [Oct 18, 2024 - Snowflake Open Catalog GA](/en/release-notes/2024/other/2024-10-18-snowflake-open-catalog-ga \"Oct 18, 2024 - Snowflake Open Catalog GA\")\n       - [Oct 14, 2024 - New regions for Cortex Analyst](/en/release-notes/2024/other/2024-10-14-new-regions-cortex-analyst \"Oct 14, 2024 - New regions for Cortex Analyst\")\n       - [Oct 14, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-10-14-snowflake-data-clean-rooms \"Oct 14, 2024 - Snowflake Data Clean Rooms\")\n       - [Oct 10, 2024 - CORTEX\\_FINE\\_TUNING\\_USAGE\\_HISTORY view](/en/release-notes/2024/other/2024-10-10-cortex-finetuning-usage-history \"Oct 10, 2024 - CORTEX_FINE_TUNING_USAGE_HISTORY view\")\n       - [Oct 10, 2024 - CORTEX\\_SEARCH\\_SERVING\\_USAGE\\_HISTORY view](/en/release-notes/2024/other/2024-10-10-cortex-search-serving-usage-history \"Oct 10, 2024 - CORTEX_SEARCH_SERVING_USAGE_HISTORY view\")\n       - [Oct 08, 2024 - Native App support for AWS PrivateLink](/en/release-notes/2024/other/2024-10-08-na-aws-pl \"Oct 08, 2024 - Native App support for AWS PrivateLink\")\n       - [Oct 07, 2024 - Native App event sharing](/en/release-notes/2024/other/2024-10-07-na-event-sharing \"Oct 07, 2024 - Native App event sharing\")\n       - [Oct 04, 2024 - Cortex Analyst Suggested Questions](/en/release-notes/2024/other/2024-10-04-cortex-analyst-suggested-questions \"Oct 04, 2024 - Cortex Analyst Suggested Questions\")\n       - [Oct 04, 2024 - Cortex Analyst and Cortex Search integration](/en/release-notes/2024/other/2024-10-04-cortex-analyst-search-integration \"Oct 04, 2024 - Cortex Analyst and Cortex Search integration\")\n       - [Oct 04, 2024 - Differential Privacy](/en/release-notes/2024/other/2024-10-04-differential-privacy \"Oct 04, 2024 - Differential Privacy\")\n       - [Oct 04, 2024 - Cortex search GA](/en/release-notes/2024/other/2024-10-04-cortex-search-ga \"Oct 04, 2024 - Cortex search GA\")\n       - [Oct 03, 2024 - PARSE\\_DOCUMENT function](/en/release-notes/2024/other/2024-10-03-parse-document \"Oct 03, 2024 - PARSE_DOCUMENT function\")\n       - [Oct 02, 2024 - Snowflake Notebooks on Container Runtime](/en/release-notes/2024/other/2024-10-02-notebooks-on-spcs \"Oct 02, 2024 - Snowflake Notebooks on Container Runtime\")\n       - [Oct 02, 2024 - Organization accounts](/en/release-notes/2024/other/2024-10-01-organization-account \"Oct 02, 2024 - Organization accounts\")\n       - [Oct 01, 2024 - Sharing Cortex Fine-tuning models](/en/release-notes/2024/other/2024-10-01-cortex-finetuning-sharing \"Oct 01, 2024 - Sharing Cortex Fine-tuning models\")\n       - [Sep 26, 2024 - Snowpark-optimized warehouse resource constraints](/en/release-notes/2024/other/2024-09-26-sow-resource-constraints \"Sep 26, 2024 - Snowpark-optimized warehouse resource constraints\")\n       - [Sep 26, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-09-26-dcr \"Sep 26, 2024 - Snowflake Data Clean Rooms\")\n       - [Sep 25, 2024 - Snowflake Feature Store GA](/en/release-notes/2024/other/2024-09-25-feature-store-ga \"Sep 25, 2024 - Snowflake Feature Store GA\")\n       - [Sep 25, 2024 - New Cortex AI models](/en/release-notes/2024/other/2024-09-25-new-cortex-models \"Sep 25, 2024 - New Cortex AI models\")\n       - [Sep 24, 2024 - DOCUMENT\\_AI\\_USAGE\\_HISTORY view](/en/release-notes/2024/other/2024-09-24-document-ai \"Sep 24, 2024 - DOCUMENT_AI_USAGE_HISTORY view\")\n       - [Sep 12, 2024 - Multilingual embedding model](/en/release-notes/2024/other/2024-09-12-voyage-embed-model \"Sep 12, 2024 - Multilingual embedding model\")\n       - [Sep 12, 2024 - CLASSIFY\\_TEXT function](/en/release-notes/2024/other/2024-09-12-classify-text-function \"Sep 12, 2024 - CLASSIFY_TEXT function \")\n       - [Sep 12, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-09-12-dcr \"Sep 12, 2024 - Snowflake Data Clean Rooms\")\n       - [Sep 09, 2024 - AI21 model available in Cortex AI](/en/release-notes/2024/other/2024-09-09-jamba-mini-model \"Sep 09, 2024 - AI21 model available in Cortex AI\")\n       - [Sep 04, 2024 - Easier training of Anomaly Detection models from real-world data](/en/release-notes/2024/other/2024-09-04-anomaly-detection-preprocessing \"Sep 04, 2024 - Easier training of Anomaly Detection models from real-world data\")\n       - [Sep 04, 2024 - Call stored procedures in the FROM clause](/en/release-notes/2024/other/2024-09-04-call-stored-procedure-in-from-clause \"Sep 04, 2024 - Call stored procedures in the FROM clause\")\n       - [Sep 01, 2024 - New Snowflake region](/en/release-notes/2024/other/2024-09-01-new-region \"Sep 01, 2024 - New Snowflake region\")\n       - [Aug 30, 2024 - Query cost attribution](/en/release-notes/2024/other/2024-08-30-per-query-cost-attribution \"Aug 30, 2024 - Query cost attribution\")\n       - [Aug 29, 2024 - Multilingual embedding models](/en/release-notes/2024/other/2024-08-29-multilingual-embed-models \"Aug 29, 2024 - Multilingual embedding models\")\n       - [Aug 29, 2024 - New regions for Cortex Analyst](/en/release-notes/2024/other/2024-08-29-cortex-analyst-new-regions \"Aug 29, 2024 - New regions for Cortex Analyst\")\n       - [Aug 29, 2024 - Mistral Large 2 LLM](/en/release-notes/2024/other/2024-08-29-mistral-large2 \"Aug 29, 2024 - Mistral Large 2 LLM\")\n       - [Aug 29, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-08-29-dcr \"Aug 29, 2024 - Snowflake Data Clean Rooms\")\n       - [Aug 28, 2024 - ML Functions: Top Insights preview update](/en/release-notes/2024/other/2024-08-28-top-insights-preview-refresh \"Aug 28, 2024 - ML Functions: Top Insights preview update\")\n       - [Aug 26, 2024 - Easier training of Forecasting models from real-world data](/en/release-notes/2024/other/2024-08-26-forecasting-preprocessing \"Aug 26, 2024 - Easier training of Forecasting models from real-world data\")\n       - [Aug 26, 2024 - Time Series ML Functions Error Message Improvements](/en/release-notes/2024/other/2024-08-26-time-series-error-message \"Aug 26, 2024 - Time Series ML Functions Error Message Improvements\")\n       - [Aug 20, 2024 - Cortex LLM Functions region update](/en/release-notes/2024/other/2024-08-20-new-region-llama-405b \"Aug 20, 2024 - Cortex LLM Functions region update\")\n       - [Aug 20, 2024 - Differential Privacy](/en/release-notes/2024/other/2024-08-16-diff-privacy \"Aug 20, 2024 - Differential Privacy\")\n       - [Aug 16, 2024 - Snowflake Native App Framework: Support for GovCloud on AWS](/en/release-notes/2024/other/2024-08-16-na-gov-cloud \"Aug 16, 2024 - Snowflake Native App Framework: Support for GovCloud on AWS\")\n       - [Aug 14, 2024 - Cortex Analyst Preview](/en/release-notes/2024/other/2024-08-14-cortex-analyst \"Aug 14, 2024 - Cortex Analyst Preview\")\n       - [Aug 09, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-08-09-sis \"Aug 09, 2024 - Streamlit in Snowflake\")\n       - [Aug 08, 2024 - RANGE BETWEEN window frames with explicit offsets](/en/release-notes/2024/other/2024-08-08-range-between-ga \"Aug 08, 2024 - RANGE BETWEEN window frames with explicit offsets\")\n       - [Aug 08, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-08-08-dcr \"Aug 08, 2024 - Snowflake Data Clean Rooms\")\n       - [Aug 08, 2024 - Cross-region inference for LLM functions](/en/release-notes/2024/other/2024-08-08-cross-region-llm \"Aug 08, 2024 - Cross-region inference for LLM functions\")\n       - [Aug 06, 2024 - Snowflake Native App Framework: Support for Virtual Private Snowflake (VPS) on AWS](/en/release-notes/2024/other/2024-08-06-na-vps-aws \"Aug 06, 2024 - Snowflake Native App Framework: Support for Virtual Private Snowflake (VPS) on AWS\")\n       - [Aug 06, 2024 - Document AI](/en/release-notes/2024/other/2024-08-06-document-ai \"Aug 06, 2024 - Document AI\")\n       - [Aug 05, 2024 - Data Dictionary Data Preview](/en/release-notes/2024/ui/2024-08-05 \"Aug 05, 2024 - Data Dictionary Data Preview\")\n       - [Aug 02, 2024 - Custom UI in Streamlit in Snowflake](/en/release-notes/2024/other/2024-08-02-sis \"Aug 02, 2024 - Custom UI in Streamlit in Snowflake\")\n       - [Aug 02, 2024 - Cortex Search in Snowsight](/en/release-notes/2024/ui/2024-08-02 \"Aug 02, 2024 - Cortex Search in Snowsight\")\n       - [Aug 02, 2024 - Classification function error message improvements](/en/release-notes/2024/other/2024-08-02-classification-errors \"Aug 02, 2024 - Classification function error message improvements\")\n       - [Aug 02, 2024 - Snowflake Native App Framework](/en/release-notes/2024/other/2024-08-02-na-spcs-laf \"Aug 02, 2024 - Snowflake Native App Framework\")\n       - [Aug 01, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-08-01-sis \"Aug 01, 2024 - Streamlit in Snowflake\")\n       - [Aug 01, 2024 - Snowpark Container Services](/en/release-notes/2024/other/2024-08-01-spcs \"Aug 01, 2024 - Snowpark Container Services\")\n       - [Aug 01, 2024 -- Snowsight](/en/release-notes/2024/ui/2024-08-01 \"Aug 01, 2024 -- Snowsight\")\n       - [Jul 31, 2024 - VS Code extension](/en/release-notes/2024/other/2024-07-31 \"Jul 31, 2024 - VS Code extension\")\n       - [Jul 31, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-07-31-sis \"Jul 31, 2024 - Streamlit in Snowflake\")\n       - [Jul 30, 2024 - Cortex Fine-tuning function in Snowsight Preview](/en/release-notes/2024/ui/2024-07-30 \"Jul 30, 2024 - Cortex Fine-tuning function in Snowsight Preview\")\n       - [Jul 29, 2024 - Snowsight Notebooks default warehouse](/en/release-notes/2024/ui/2024-07-29-wh \"Jul 29, 2024 - Snowsight Notebooks default warehouse\")\n       - [Jul 25, 2024 - AI21 model available in Cortex AI](/en/release-notes/2024/other/2024-07-25-new-llm-model-jamba \"Jul 25, 2024 - AI21 model available in Cortex AI \")\n       - [Jul 25, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-07-25-dcr \"Jul 25, 2024 - Snowflake Data Clean Rooms\")\n       - [Jul 25, 2024 - Cortex Search preview](/en/release-notes/2024/other/2024-07-25-cortex-search-preview \"Jul 25, 2024 - Cortex Search preview\")\n       - [Jul 24, 2024 - Document AI](/en/release-notes/2024/other/2024-07-24-document-ai \"Jul 24, 2024 - Document AI\")\n       - [Jul 24, 2024 - Cortex LLM functions update](/en/release-notes/2024/other/2024-07-24-cortex-llm-updates \"Jul 24, 2024 - Cortex LLM functions update\")\n       - [Jul 23, 2024 - Managing Listings using SQL GA](/en/release-notes/2024/other/2024-07-23-pl \"Jul 23, 2024 - Managing Listings using SQL GA\")\n       - [Jul 23, 2024 - New Meta AI model available in CORTEX AI](/en/release-notes/2024/other/2024-07-23-new-llm-models \"Jul 23, 2024 - New Meta AI model available in CORTEX AI\")\n       - [Jul 19, 2024 - CORTEX\\_FUNCTIONS\\_USAGE\\_HISTORY view](/en/release-notes/2024/other/2024-07-19-cortex-functions-usage-history \"Jul 19, 2024 - CORTEX_FUNCTIONS_USAGE_HISTORY view\")\n       - [Jul 18, 2024 - Support for shared external table and Apache Iceberg™ tables](/en/release-notes/2024/other/2024-07-18-native-app-external-table \"Jul 18, 2024 - Support for shared external table and Apache Iceberg™ tables\")\n       - [Jul 17, 2024 - Network rules and policies in Snowsight GA](/en/release-notes/2024/ui/2024-07-17 \"Jul 17, 2024 - Network rules and policies in Snowsight GA\")\n       - [Jul 15, 2024 - Snowflake Copilot GA](/en/release-notes/2024/other/2024-07-15-snowflake-copilot-ga \"Jul 15, 2024 - Snowflake Copilot GA\")\n       - [Jul 11, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-07-11-dcr \"Jul 11, 2024 - Snowflake Data Clean Rooms\")\n       - [Jul 11, 2024 - Snowflake connectors for MySQL and PostgreSQL](/en/release-notes/2024/other/2024-07-11 \"Jul 11, 2024 - Snowflake connectors for MySQL and PostgreSQL\")\n       - [Jul 03, 2024 - External network access in Streamlit in Snowflake](/en/release-notes/2024/other/2024-07-03-sis \"Jul 03, 2024 - External network access in Streamlit in Snowflake\")\n       - [Jul 03, 2024 - Data pipelines: Support for Apache Iceberg™ tables with dynamic tables and streams - Preview](/en/release-notes/2024/other/2024-07-03-dynamic-iceberg-tables \"Jul 03, 2024 - Data pipelines: Support for Apache Iceberg™ tables with dynamic tables and streams - Preview\")\n       - [Jul 02, 2024 - Snowflake Notebooks](/en/release-notes/2024/ui/2024-07-02 \"Jul 02, 2024 - Snowflake Notebooks\")\n       - [Jul 01, 2024 - Snowsight home page](/en/release-notes/2024/ui/2024-07-01 \"Jul 01, 2024 - Snowsight home page\")\n       - [Jun 28, 2024 - Snowsight MFA reminder](/en/release-notes/2024/ui/2024-06-28 \"Jun 28, 2024 - Snowsight MFA reminder\")\n       - [Jun 28, 2024 - New geospatial H3 functions GA](/en/release-notes/2024/other/2024-06-28-geospatial-h3-functions-ga \"Jun 28, 2024 - New geospatial H3 functions GA\")\n       - [Jun 28, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-06-28-sis \"Jun 28, 2024 - Streamlit in Snowflake\")\n       - [Jun 27, 2024 - Document AI](/en/release-notes/2024/other/2024-06-27-document-ai \"Jun 27, 2024 - Document AI\")\n       - [Jun 26, 2024 - Cost Management](/en/release-notes/2024/other/2024-06-26-cost \"Jun 26, 2024 - Cost Management\")\n       - [Jun 25, 2024 - TO\\_QUERY table function](/en/release-notes/2024/other/2024-06-25-to-query-function \"Jun 25, 2024 - TO_QUERY table function\")\n       - [Jun 25, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-06-25-dcr \"Jun 25, 2024 - Snowflake Data Clean Rooms\")\n       - [Jun 24, 2024 - Time Travel for hybrid tables](/en/release-notes/2024/other/2024-06-24-time-travel-hybrid-tables \"Jun 24, 2024 - Time Travel for hybrid tables\")\n       - [Jun 21, 2024 - Document AI](/en/release-notes/2024/other/2024-06-21-document-ai \"Jun 21, 2024 - Document AI\")\n       - [Jun 17, 2024 - New LLM functions](/en/release-notes/2024/other/2024-06-17-new-llm-functions \"Jun 17, 2024 - New LLM functions\")\n       - [Jun 15, 2024 - Anomaly Detection](/en/release-notes/2024/other/2024-06-15-anomaly-detection \"Jun 15, 2024 - Anomaly Detection\")\n       - [Jun 11, 2024 - Data sharing in non-secure views](/en/release-notes/2024/other/2024-06-11-sharing-non-secure-views \"Jun 11, 2024 - Data sharing in non-secure views\")\n       - [Jun 11, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-06-11-dcr \"Jun 11, 2024 - Snowflake Data Clean Rooms\")\n       - [Jun 10, 2024 - Apache Iceberg™ tables GA](/en/release-notes/2024/other/2024-06-10-iceberg-tables \"Jun 10, 2024 - Apache Iceberg™ tables GA\")\n       - [Jun 05, 2024 - New geospatial functions in preview](/en/release-notes/2024/other/2024-06-05 \"Jun 05, 2024 - New geospatial functions in preview\")\n       - [Jun 03-06, 2024 - Summit](/en/release-notes/2024/june-summit \"Jun 03-06, 2024 - Summit\")\n       - [Jun 03, 2024 - New 1024 dimensional vector embedding function](/en/release-notes/2024/other/2024-06-03-embed-text-1024 \"Jun 03, 2024 - New 1024 dimensional vector embedding function\")\n       - [Jun 03, 2024 - Entity-Level Privacy](/en/release-notes/2024/other/2024-06-03-entity-level \"Jun 03, 2024 - Entity-Level Privacy\")\n       - [May 31, 2024 - Structured Data Types GA](/en/release-notes/2024/other/2024-05-31-structured-types-ga \"May 31, 2024 - Structured Data Types GA\")\n       - [May 31, 2024 - Classification Update](/en/release-notes/2024/other/2024-05-31-classification-update \"May 31, 2024 - Classification Update\")\n       - [May 28, 2024 - ML Functions](/en/release-notes/2024/other/2024-05-28-call-method-in-from-clause \"May 28, 2024 - ML Functions\")\n       - [May 28, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-05-28-dcr \"May 28, 2024 - Snowflake Data Clean Rooms\")\n       - [May 22, 2024 - SQL](/en/release-notes/2024/other/2024-05-22-table-references \"May 22, 2024 - SQL\")\n       - [May 20, 2024 - Cost Management](/en/release-notes/2024/other/2024-05-20-cost \"May 20, 2024 - Cost Management\")\n       - [May 17, 2024 - Document AI](/en/release-notes/2024/other/2024-05-17-document-ai \"May 17, 2024 - Document AI\")\n       - [May 16, 2024 - Vector data type and Vector similarity functions](/en/release-notes/2024/other/2024-05-16-vector-data-type-ga \"May 16, 2024 - Vector data type and Vector similarity functions\")\n       - [May 14, 2024 - Snowsight](/en/release-notes/2024/ui/2024-05-14 \"May 14, 2024 - Snowsight\")\n       - [May 14, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-05-14-sis \"May 14, 2024 - Streamlit in Snowflake\")\n       - [May 14, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-05-14-dcr \"May 14, 2024 - Snowflake Data Clean Rooms\")\n       - [May 13, 2024 - ASOF JOIN](/en/release-notes/2024/other/2024-05-13-asof-join \"May 13, 2024 - ASOF JOIN\")\n       - [May 10, 2024 - Snowsight](/en/release-notes/2024/ui/2024-05-10 \"May 10, 2024 - Snowsight\")\n       - [May 08, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-05-08-sis \"May 08, 2024 - Streamlit in Snowflake\")\n       - [May 08, 2024 - Snowflake Notifications](/en/release-notes/2024/other/2024-05-08 \"May 08, 2024 - Snowflake Notifications\")\n       - [May 08, 2024 - New model for vector embedding](/en/release-notes/2024/other/2024-05-08-embed-text-model \"May 08, 2024 - New model for vector embedding\")\n       - [May 07, 2024 - Cortex LLM Functions GA](/en/release-notes/2024/other/2024-05-07-llm-functions-ga \"May 07, 2024 - Cortex LLM Functions GA\")\n       - [May 06, 2024 - Vector data type and Vector similarity functions](/en/release-notes/2024/other/2024-05-06-vector-data-type \"May 06, 2024 - Vector data type and Vector similarity functions\")\n       - [May 03, 2024 - Snowflake Model Registry](/en/release-notes/2024/other/2024-05-03-snowflake-model-registry \"May 03, 2024 - Snowflake Model Registry\")\n       - [May 03, 2024 - Aggregation & projection policies](/en/release-notes/2024/other/2024-05-03-policies \"May 03, 2024 - Aggregation & projection policies\")\n       - [May 02, 2024 - Data dictionary preview with masking](/en/release-notes/2024/other/2024-05-02-snowsight-dd-preview \"May 02, 2024 - Data dictionary preview with masking\")\n       - [May 02, 2024 - Cost Management](/en/release-notes/2024/other/2024-05-02-cost \"May 02, 2024 - Cost Management\")\n       - [May 01, 2024 - Snowsight Tasks Improvements](/en/release-notes/2024/ui/2024-05-01 \"May 01, 2024 - Snowsight Tasks Improvements\")\n       - [Apr 30, 2024 - Google Analytics Raw and Aggregate Data](/en/release-notes/2024/other/2024-04-30-gaad-gard-ga \"Apr 30, 2024 - Google Analytics Raw and Aggregate Data\")\n       - [Apr 30, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-04-30-dcr \"Apr 30, 2024 - Snowflake Data Clean Rooms\")\n       - [Apr 29, 2024 - Provider Studio Preview](/en/release-notes/2024/ui/2024-04-29 \"Apr 29, 2024 - Provider Studio Preview\")\n       - [Apr 29, 2024 - Dynamic Tables](/en/release-notes/2024/other/2024-04-29-dynamic-tables \"Apr 29, 2024 - Dynamic Tables\")\n       - [Apr 24, 2024 - Managing Listings using SQL](/en/release-notes/2024/other/2024-04-24-pl \"Apr 24, 2024 - Managing Listings using SQL\")\n       - [Apr 24, 2024 - New FAILOVER privilege](/en/release-notes/2024/other/2024-04-24-failover-privilege \"Apr 24, 2024 - New FAILOVER privilege\")\n       - [Apr 23, 2024 - Snowflake Connector for ServiceNow® V2](/en/release-notes/2024/other/2024-04-23-svnc \"Apr 23, 2024 - Snowflake Connector for ServiceNow® V2\")\n       - [Apr 22, 2024 - Snowpark Container Services](/en/release-notes/2024/other/2024-04-22 \"Apr 22, 2024 - Snowpark Container Services\")\n       - [Apr 17, 2024 - Snowpark Container Services](/en/release-notes/2024/other/2024-04-17 \"Apr 17, 2024 - Snowpark Container Services\")\n       - [Apr 12, 2024 - Snowflake Cortex LLM Update](/en/release-notes/2024/other/2024-04-12-snowflake-cortex-llm-update \"Apr 12, 2024 - Snowflake Cortex LLM Update\")\n       - [Apr 12, 2024 - Cost Management](/en/release-notes/2024/other/2024-04-12-cost \"Apr 12, 2024 - Cost Management\")\n       - [Apr 11, 2024 - Budgets](/en/release-notes/2024/other/2024-04-11-budgets \"Apr 11, 2024 - Budgets\")\n       - [Apr 11-25, 2024 - Snowflake Copilot](/en/release-notes/2024/other/2024-04-11-snowflake-copilot-in-snowsight \"Apr 11-25, 2024 - Snowflake Copilot\")\n       - [Apr 09, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-04-09-dcr \"Apr 09, 2024 - Snowflake Data Clean Rooms\")\n       - [Apr 01-03,2024 - Snowsight worksheet results](/en/release-notes/2024/ui/2024-04-01 \"Apr 01-03,2024 - Snowsight worksheet results\")\n       - [Mar 29, 2024 - Data Quality Monitoring](/en/release-notes/2024/other/2024-03-29-dmf \"Mar 29, 2024 - Data Quality Monitoring\")\n       - [Mar 28, 2024 - Snowflake Data Clean Rooms](/en/release-notes/2024/other/2024-03-28-snowflake-data-clean-rooms \"Mar 28, 2024 - Snowflake Data Clean Rooms\")\n       - [Mar 18-20, 2024 - Snowflake Native App Framework](/en/release-notes/2024/other/2024-03-18-limit-app-functionality \"Mar 18-20, 2024 - Snowflake Native App Framework\")\n       - [Mar 15, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-03-15 \"Mar 15, 2024 - Streamlit in Snowflake\")\n       - [Mar 13, 2024 - Hybrid Tables](/en/release-notes/2024/other/2024-03-13-hybrid-tables \"Mar 13, 2024 - Hybrid Tables\")\n       - [Mar 12, 2024 - Snowflake Cortex Classification](/en/release-notes/2024/other/2024-03-12-snowflake-cortex-classification \"Mar 12, 2024 - Snowflake Cortex Classification\")\n       - [Mar 08, 2024 - New Geospatial Functions](/en/release-notes/2024/other/2024-03-08 \"Mar 08, 2024 - New Geospatial Functions\")\n       - [Mar 05, 2024 - Snowflake Cortex LLM Functions](/en/release-notes/2024/other/2024-03-05-snowflake-cortex-llm-functions \"Mar 05, 2024 - Snowflake Cortex LLM Functions\")\n       - [Mar 05, 2024 - Hybrid Tables](/en/release-notes/2024/other/2024-03-05-hybrid-tables \"Mar 05, 2024 - Hybrid Tables\")\n       - [Feb 28-29, 2024 - Snowsight](/en/release-notes/2024/ui/2024-02-21 \"Feb 28-29, 2024 - Snowsight\")\n       - [Feb 28, 2024 - ASOF JOIN](/en/release-notes/2024/other/2024-02-28 \"Feb 28, 2024 - ASOF JOIN\")\n       - [Feb 26, 2024 - Snowpark Container Services](/en/release-notes/2024/other/2024-02-26 \"Feb 26, 2024 - Snowpark Container Services\")\n       - [Feb 22, 2024 - Snowflake Extension for Visual Studio Code](/en/release-notes/2024/other/2024-02-22 \"Feb 22, 2024 - Snowflake Extension for Visual Studio Code\")\n       - [Feb 21, 2024 - Data sharing in U.S. government regions](/en/release-notes/2024/other/2024-02-21 \"Feb 21, 2024 - Data sharing in U.S. government regions\")\n       - [Feb 20 - Mar 5, 2024 - Universal Search](/en/release-notes/2024/other/2024-02-20 \"Feb 20 - Mar 5, 2024 - Universal Search\")\n       - [Feb 20, 2024 - Hybrid Tables](/en/release-notes/2024/other/2024-02-20-hybrid-tables \"Feb 20, 2024 - Hybrid Tables\")\n       - [Feb 15, 2024 - Aggregation & Projection Policies](/en/release-notes/2024/other/2024-02-15-policies \"Feb 15, 2024 - Aggregation & Projection Policies\")\n       - [Feb 15, 2024 - Snowsight](/en/release-notes/2024/ui/2024-02-14 \"Feb 15, 2024 - Snowsight\")\n       - [Feb 15, 2024 - Geospatial Functions](/en/release-notes/2024/other/2024-02-15 \"Feb 15, 2024 - Geospatial Functions\")\n       - [Feb 12-14, 2024 - Snowsight navigation menu](/en/release-notes/2024/other/2024-02-12 \"Feb 12-14, 2024 - Snowsight navigation menu\")\n       - [Feb 07-08, 2024 - Snowsight](/en/release-notes/2024/ui/2024-02-07 \"Feb 07-08, 2024 - Snowsight\")\n       - [Jan 31, 2024 - Snowflake Native App Framework](/en/release-notes/2024/other/2024-01-31 \"Jan 31, 2024 - Snowflake Native App Framework\")\n       - [Jan 30-Feb 01, 2024 - Snowsight](/en/release-notes/2024/ui/2024-01-30 \"Jan 30-Feb 01, 2024 - Snowsight\")\n       - [Jan 29, 2024 - Snowflake connectors for Google](/en/release-notes/2024/other/2024-01-29 \"Jan 29, 2024 - Snowflake connectors for Google\")\n       - [Jan 25, 2024 - Streamlit in Snowflake](/en/release-notes/2024/other/2024-01-25 \"Jan 25, 2024 - Streamlit in Snowflake\")\n       - [Jan 18, 2024 - Snowflake Native App Framework](/en/release-notes/2024/other/2024-01-18 \"Jan 18, 2024 - Snowflake Native App Framework\")\n   * [2023 server release notes and feature updates](/en/release-notes/new-features-2023 \"2023 server release notes and feature updates\")\n   * [Release notes from 2015 - 2022](/en/release-notes/about \"Release notes from 2015 - 2022\")\n6. [Streamlit in Snowflake release notes](/en/release-notes/streamlit-in-snowflake \"Streamlit in Snowflake release notes\")\n7. Client, driver, and library release notes\n\n   - [Monthly release notes](/en/release-notes/clients-drivers/monthly-releases \"Monthly release notes\")\n   - [Client versions & support policy](/en/release-notes/requirements \"Client versions & support policy\")\n8. Snowflake Connector release notes\n\n   - [Snowflake Connector for Google Analytics Raw Data](/en/release-notes/connectors/gard \"Snowflake Connector for Google Analytics Raw Data\")\n   - [Snowflake Connector for Google Analytics Aggregate Data](/en/release-notes/connectors/gaad \"Snowflake Connector for Google Analytics Aggregate Data\")\n   - [Snowflake Connector for ServiceNow V2](/en/release-notes/connectors/servicenow-v2 \"Snowflake Connector for ServiceNow V2\")\n   - [Snowflake Connector for MySQL](/en/release-notes/connectors/mysql6 \"Snowflake Connector for MySQL\")\n   - [Snowflake Connector for PostgreSQL](/en/release-notes/connectors/postgres6 \"Snowflake Connector for PostgreSQL\")\n   - [Snowflake Connector for Sharepoint](/en/release-notes/connectors/sharepoint \"Snowflake Connector for Sharepoint\")\n   - Native SDK for Connectors\n\n     - [Native SDK for Connectors Java library](/en/release-notes/native-sdk-for-connectors/native_sdk_for_connectors_java \"Native SDK for Connectors Java library\")\n     - [Native SDK for Connectors Java Test library](/en/release-notes/native-sdk-for-connectors/native_sdk_for_connectors_java_test \"Native SDK for Connectors Java Test library\")\n     - [Native SDK for Connectors Java Template](/en/release-notes/native-sdk-for-connectors/native_sdk_for_connectors_template \"Native SDK for Connectors Java Template\")\n     - [Native SDK Example Java GitHub Connector](/en/release-notes/native-sdk-for-connectors/native_sdk_example_java_github_connector \"Native SDK Example Java GitHub Connector\")\n10. Behavior changes\n11. [Behavior change announcements](/en/release-notes/behavior-changes \"Behavior change announcements\")\n13. Recent improvements\n14. [Performance improvements](/en/release-notes/performance-improvements \"Performance improvements\")\n15. [SQL improvements](/en/release-notes/sql-improvements \"SQL improvements\")\n17. Feature information\n18. [Preview features](/en/release-notes/preview-features \"Preview features\")\n\n[Release notes](/en/release-notes/overview)[Snowflake server release notes and feature updates](/en/release-notes/new-features)[2024 server release notes and feature updates](/en/release-notes/new-features-2024)[Feature updates](/en/release-notes/feature-releases-2024)Aug 30, 2024 - Query cost attribution\n\nAugust 30, 2024 — Query attribution costs[¶]( \"Link to this heading\")\n============================================================================================================\n\nAccount Usage: New QUERY\\_ATTRIBUTION\\_HISTORY view[¶]( \"Link to this heading\")\n--------------------------------------------------------------------------------------------------------------------------------\n\nThe new QUERY\\_ATTRIBUTION\\_HISTORY view in the ACCOUNT\\_USAGE schema provides information about the warehouse cost for queries and\nenables the attribution of query costs by tag, user, or query hash.\n\nFor more information, see [Viewing cost by tag in SQL](../../../user-guide/cost-attributing.html) and\n[QUERY\\_ATTRIBUTION\\_HISTORY](../../../sql-reference/account-usage/query_attribution_history) view.\n\nWas this page helpful?\n\nYesNo\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/)[Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/)Cookies Settings© 2026 Snowflake, Inc. All Rights Reserved.\n\nOn this page\n\n1. [Account Usage: New QUERY\\_ATTRIBUTION\\_HISTORY view]()\n\nLanguage: **English**\n\n* [English](/en/release-notes/2024/other/2024-08-30-per-query-cost-attribution)\n* [Français](/fr/release-notes/2024/other/2024-08-30-per-query-cost-attribution)\n* [Deutsch](/de/release-notes/2024/other/2024-08-30-per-query-cost-attribution)\n* [日本語](/ja/release-notes/2024/other/2024-08-30-per-query-cost-attribution)\n* [한국어](/ko/release-notes/2024/other/2024-08-30-per-query-cost-attribution)\n* [Português](/pt/release-notes/2024/other/2024-08-30-per-query-cost-attribution)"],"full_content":null},{"url":"https://docs.snowflake.com/en/user-guide/cost-exploring-compute","title":"Exploring compute cost | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Guides](/en/guides) [Cost & Billing](/en/guides-overview-cost) Visibility [Exploring cost](/en/user-guide/cost-exploring-overall) Exploring compute cost\n\n# Exploring compute cost [¶]( \"Link to this heading\")\n\nTotal compute cost consists of the overall use of:\n\n* Virtual warehouses (user-managed compute resources)\n* Serverless features such as Automatic Clustering and Snowpipe that use Snowflake-managed compute resources\n* Cloud services layer of the Snowflake architecture\n* vCPU usage for [Openflow BYOC cost and scaling considerations](data-integration/openflow/cost-byoc) and [Openflow Snowflake Deployment cost and scaling considerations](data-integration/openflow/cost-spcs) .\n  See [Openflow components](data-integration/openflow/about.html) for more information about Openflow components including runtimes.\n\nThis topic describes how to gain insight into historical compute costs using [Snowsight](ui-snowsight-gs.html) , or by writing queries against views in\nthe [ACCOUNT\\_USAGE](../sql-reference/account-usage) and [ORGANIZATION\\_USAGE](../sql-reference/organization-usage) schemas.\nSnowsight allows you to quickly and easily obtain information about cost from a visual dashboard. Queries against the usage views\nallow you to drill down into cost data and can help generate custom reports and dashboards.\n\nIf you need more information about how compute costs are incurred, refer to [Understanding compute cost](cost-understanding-compute) .\n\nNote\n\nThe cloud services layer consumes credits, but not all of those credits are actually billed. Usage for cloud services is charged only if\nthe daily consumption of cloud services exceeds 10% of the daily usage of virtual warehouses. Snowsight and a majority of views\nshow the total number of credits consumed by warehouses, serverless features, and cloud services without accounting for this daily\nadjustment to cloud services.\n\nTo determine how many credits were actually billed for compute costs, run queries against the [METERING\\_DAILY\\_HISTORY view](../sql-reference/account-usage/metering_daily_history) .\n\n## Viewing credit usage [¶]( \"Link to this heading\")\n\nAll compute resources (virtual warehouses, serverless, cloud services) consume Snowflake credits. Users can use Snowsight to\nview the overall cost of compute usage for any given day, week, or month.\n\nTo explore compute cost:\n\n1. Sign in to [Snowsight](ui-snowsight-gs.html) .\n2. Switch to a role with [access to cost and usage data](cost-access-control) .\n3. In the navigation menu, select Admin » Cost management .\n4. Select a warehouse to use to view the usage data. Snowflake recommends using an XS warehouse for this purpose.\n5. Select Consumption .\n6. Select Compute from the Usage Type drop-down.\n\nFor usage notes related to the Consumption page, see [Usage notes](cost-exploring-overall.html) .\n\n### Filter by tag [¶]( \"Link to this heading\")\n\nYou can use tags to [attribute the cost](cost-attributing) of using resources to a logical\nunit within your organization. A tag is a Snowflake object that can have one or more values associated with it. A user with the\nappropriate privileges applies a tag/value pair to each resource that is used by a cost center or other logical unit (e.g. the Development\nenvironment, a business unit, or business line). Once resources have been tagged, you can isolate costs based on a\nspecific tag/value pair, allowing you to attribute this cost to a specific logical unit.\n\nTo filter the Consumption dashboard to show costs associated with a specific tag/value combination:\n\n1. Sign in to [Snowsight](ui-snowsight-gs.html) .\n2. Switch to a role with [access to cost and usage data](cost-access-control) .\n3. In the navigation menu, select Admin » Cost management .\n4. Select a warehouse to use to view the usage data. Snowflake recommends using an XS warehouse for this purpose.\n5. Select Consumption .\n6. Select Compute from the Usage Type drop-down.\n7. From the Tags drop-down, select the tag.\n8. Select the value from the list of the tag’s values.\n9. Select Apply .\n\nFor example, you can use the drop-down to select the `COST_CENTER` tag and the `SALES` value to show usage associated with resources\ntagged with `COST_CENTER = SALES` while excluding all other usage from the dashboard.\n\nYou can also display all resources with a tag regardless of their tag value. Use the drop down to select a\ntag, then choose All instead of a specific value.\n\n### View consumption by type, service, or resource [¶]( \"Link to this heading\")\n\nWhen viewing the bar graph that displays compute history, you can filter the data By Type , By Service or By Resource .\n\n> By Type :\n>     Separates resource consumption into compute (virtual warehouses and serverless resources) and cloud services. For the purpose\n> of this filter, cloud services is separated out from the other types of compute resources.\n> By Service :\n>     Separates resource consumption into warehouse consumption and consumption by each serverless feature. For example,\n> WAREHOUSE\\_METERING represents credits consumed by warehouses while PIPE represents credits consumed by the serverless Snowpipe feature.\n> Cloud services compute is included in warehouse consumption.\n> By Resource :\n>     Separates resource consumption by the Snowflake object that consumed credits. For example, each warehouse is represented,\n> as is every table that incurred serverless costs.\n> \n>\n\n## Querying data for compute cost [¶]( \"Link to this heading\")\n\nSnowflake provides two schemas, [ORGANIZATION\\_USAGE](../sql-reference/organization-usage) and [ACCOUNT\\_USAGE](../sql-reference/account-usage) , that contain data related to usage and cost. The ORGANIZATION\\_USAGE schema provides\ncost information for all of the accounts in the organization while the ACCOUNT\\_USAGE schema provides similar information for a single\naccount. Views in these schemas provide granular, analytics-ready usage data to build custom reports or dashboards.\n\nMost views in the ORGANIZATION\\_USAGE and ACCOUNT\\_USAGE schemas contain the cost of compute resources in terms of [credits](cost-understanding-compute.html) consumed. To explore compute cost in currency, rather than credits, write queries against the [USAGE\\_IN\\_CURRENCY\\_DAILY view](../sql-reference/organization-usage/usage_in_currency_daily) . This view converts credits consumed into cost in currency using the daily\nprice of a credit.\n\n### General cost views [¶]( \"Link to this heading\")\n\nThe following views contain information related to the compute costs of all Snowflake features. You can focus on a particular feature by filtering on the `service_type` column.\n\nFor additional views that focus on the cost of a specific feature, see [Feature-specific cost views]() .\n\n|View |Compute resource |Description |Schema |\n| --- | --- | --- | --- |\n|METERING\\_DAILY\\_HISTORY |Warehouses\n\nServerless\n\nCloud Services\n\nOpenflow runtimes |Credits consumed by all compute resources (warehouses, serverless, cloud services and Openflow) in a given day.\n\nCan be used to determine whether cloud services compute costs were actually billed for a specific day (that is, cloud services credit\nconsumption exceeded 10% of warehouse consumption). |[ORGANIZATION\\_USAGE](../sql-reference/organization-usage/metering_daily_history) [ACCOUNT\\_USAGE](../sql-reference/account-usage/metering_daily_history) |\n|METERING\\_HISTORY |Warehouses\n\nServerless\n\nCloud Services\n\nOpenflow runtimes |Credits consumed by warehouses, cloud services, serverless, and Openflow features on an hourly basis. To see how many credits an individual\nwarehouse is consuming, query the WAREHOUSE\\_METERING\\_HISTORY view. |[ACCOUNT\\_USAGE](../sql-reference/account-usage/metering_history) |\n|[USAGE\\_IN\\_CURRENCY\\_DAILY](../sql-reference/organization-usage/usage_in_currency_daily) |Warehouses\n\nServerless\n\nCloud Services |Daily credit consumption by all compute resources along with the cost of that usage in the organization’s currency. |[ORGANIZATION\\_USAGE](../sql-reference/organization-usage/usage_in_currency_daily) |\n\n### Feature-specific cost views [¶]( \"Link to this heading\")\n\nThe following views that are dedicated to the usage and cost information for a specific feature.\n\n|View |Compute resource |Description |\n| --- | --- | --- |\n|APPLICATION\\_DAILY\\_USAGE\\_HISTORY |Warehouses\n\nServerless\n\nCloud Services |Daily credit usage for Snowflake Native Apps in an account within the last 365 days. |\n|ARCHIVE\\_STORAGE\\_DATA\\_\nRETRIEVAL\\_USAGE\\_HISTORY |Serverless |Bytes retrieved from archive storage for storage lifecycle policies.\nSee [Billing for storage lifecycle policies](storage-management/storage-lifecycle-policies-billing) for more information. |\n|AUTOMATIC\\_CLUSTERING\\_HISTORY |Serverless |Credits consumed by automatic clustering. |\n|CATALOG\\_LINKED\\_DATABASE\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed by catalog-linked databases. |\n|CORTEX\\_ANALYST\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed by Cortex Analyst. |\n|CORTEX\\_FINE\\_TUNING\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed for Cortex Fine-tuning. |\n|CORTEX\\_FUNCTIONS\\_\nQUERY\\_USAGE\\_HISTORY |Serverless |Credits consumed to run queries that use Cortex LLM functions. |\n|CORTEX\\_FUNCTIONS\\_\nDOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY |Serverless |Credits consumed to process documents with Document AI. |\n|CORTEX\\_FUNCTIONS\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed to call Cortex LLM functions. |\n|CORTEX\\_REST\\_API\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed by Cortex REST API calls. |\n|CORTEX\\_SEARCH\\_DAILY\\_\nUSAGE\\_HISTORY |Serverless |Daily credits consumed for Cortex Search for serving and text embeddings |\n|CORTEX\\_SEARCH\\_SERVING\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed for Cortex Search serving |\n|DATA\\_QUALITY\\_MONITORING\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed to call scheduled DMFs and ingest results into an event table. |\n|DATABASE\\_REPLICATION\\_USAGE\\_\nHISTORY |Serverless |Credits consumed for database replication. |\n|DOCUMENT\\_AI\\_\nUSAGE\\_HISTORY |Serverless |Credits consumed by Document AI. |\n|HYBRID\\_TABLE\\_USAGE\\_HISTORY |Serverless |Credits consumed for Hybrid Table Requests resources. |\n|LISTING\\_AUTO\\_FULFILLMENT\\_\nREFRESH\\_DAILY |Warehouses |Credits used to refresh data fulfilled to other regions by Cross-Cloud Auto-Fulfillment. |\n|LISTING\\_AUTO\\_FULFILLMENT\\_\nUSAGE\\_HISTORY |Warehouses |Estimated usage associated with fulfilling data products to other regions by using Cross-Cloud Auto-Fulfillment.\nRefer to the SERVICE\\_TYPE of REPLICATION. |\n|MATERIALIZED\\_VIEW\\_REFRESH\\_\nHISTORY |Serverless |Credits consumed the refreshing of materialized views. |\n|OPENFLOW\\_USAGE\\_HISTORY |Openflow |Credits consumed by Openflow runtimes.\nThis view is available in the ACCOUNT\\_USAGE schema only. |\n|PIPE\\_USAGE\\_HISTORY |Serverless |Credits consumed by Snowpipe. |\n|QUERY\\_ACCELERATION\\_HISTORY |Serverless |Credits consumed by the query acceleration service. |\n|QUERY\\_ATTRIBUTION\\_HISTORY |Warehouses |Credits consumed [per query](cost-attributing.html) for warehouse usage. |\n|REPLICATION\\_USAGE\\_HISTORY |Serverless |Credits consumed and number of bytes transferred during database replication. If possible, use the [DATABASE\\_REPLICATION\\_USAGE\\_HISTORY view](../sql-reference/account-usage/database_replication_usage_history) instead. |\n|REPLICATION\\_GROUP\\_USAGE\\_\nHISTORY |Serverless |Credits consumed and number of bytes transferred during replication for a specific replication group. |\n|SEARCH\\_OPTIMIZATION\\_HISTORY |Serverless |Credits consumed by the search optimization service. |\n|SERVERLESS\\_ALERT\\_HISTORY |Serverless |Credits consumed by serverless alerts. |\n|SERVERLESS\\_TASK\\_HISTORY |Serverless |Credits consumed by serverless tasks. |\n|SNOWPIPE\\_STREAMING\\_FILE\\_\nMIGRATION\\_HISTORY |Serverless |Credits consumed by Snowpipe Streaming compute (does not include client costs). |\n|WAREHOUSE\\_METERING\\_HISTORY |Warehouses\n\nCloud Services |Hourly credit usage of each warehouse, including the cloud services cost associated with using the warehouse. |\n\n\nNote\n\nThe views and table functions of the [Snowflake Information Schema](../sql-reference/info-schema) also provide usage data related to cost. Though\nthe ACCOUNT\\_USAGE schema is preferred, the Information Schema can be faster in some circumstances.\n\n### Example queries [¶]( \"Link to this heading\")\n\nThe following queries drill-down into data in ACCOUNT\\_USAGE views to gain insight into compute costs.\n\nNote\n\nQueries executed against views in the Account Usage schema can be modified to gain insight into cost for the entire organization by\nusing the corresponding view in the Organization Usage schema. For example, both schemas include a WAREHOUSE\\_METERING\\_HISTORY view.\n\nClick the name of a query below to see the full SQL example.\n\nCompute for Warehouses :\n    * [Query: Average hour-by-hour Snowflake spend (across all warehouses) over the past m days]()\n* [Query: Credit consumption by warehouse over specific time period]()\n* [Query: Warehouse usage over m-day average]()\n* [Query: Warehouse cost attribution by query tag](cost-attributing.html) .\n* [Query: Warehouse cost attribution by user](cost-attributing.html) .\n\nCompute for Cloud Services :\n    * [Query: Billed cloud services]()\n* [Query: Total cloud services cost by type of query]()\n* [Query: Cloud services cost for queries of a given type]()\n* [Query: Warehouses with high cloud services usage]()\n* [Query: Cloud services cost sorted by portion of query time]()\n\nCompute for Automatic Clustering :\n    * [Query: Automatic Clustering cost history (by day, by object)]()\n* [Query: Automatic Clustering History & m-day average]()\n\nCompute for Search Optimization :\n    * [Query: Search Optimization cost history (by day, by object)]()\n* [Query: Search Optimization History & m-day average]()\n\nCompute for Materialized Views :\n    * [Query: Materialized Views cost history (by day, by object)]()\n* [Query: Materialized Views History & m-day average]()\n\nCompute for Query Acceleration Service :\n    * [Query: Query Acceleration Service cost by warehouse]()\n\nCompute for Snowpipe :\n    * [Query: Cumulative usage of data ingest (Snowpipe and “Copy”)]()\n* [Query: Snowpipe cost history (by day, by object)]()\n* [Query: Snowpipe History & m-day average]()\n\nCompute and client costs for Snowpipe Streaming :\n    * [Query: Snowpipe Streaming cost]()\n\nCompute for Serverless Alerts :\n    * [Query: Total serverless alert cost]()\n\nCompute for Serverless Tasks :\n    * [Query: Total serverless task cost]()\n\nCompute for Replication :\n    * [Query: Account replication cost]()\n* [Query: Database replication cost history (by day, by object)]()\n* [Query: Database replication History & m-day average]()\n\nCompute for Partner Tools :\n    * [Query: Credit consumption by partner tools]()\n\nCompute for Hybrid Tables :\n    * [Query: Credit consumption by hybrid tables]()\n\nCompute for Cortex Analyst :\n    * [Query: Credit consumption by Cortex Analyst]()\n\nCompute for Cortex Fine-tuning :\n    * [Query: Credit consumption by Cortex Fine-tuning]()\n\nCompute for Cortex functions :\n    * [Query: Credit consumption by Cortex functions]()\n* [Query: Credit consumption by Cortex functions query]()\n\nCompute for Cortex Search :\n    * [Query: Daily credit consumption by Cortex Search]()\n* [Query: Credit consumption by Cortex Search serving]()\n\nCompute for Document AI :\n    * [Query: Credit consumption by Document AI]()\n\nCompute for Snowflake Notebooks :\n    * [Query: Hourly credit consumption by notebooks]()\n* [Query: Cost to run a specific notebook]()\n* [Query: Total compute pool cost per notebook]()\n* [Query: Identify users who ran a specific notebook]()\n\n#### Compute for warehouses [¶]( \"Link to this heading\")\n\nQuery: Average hour-by-hour Snowflake spend (across all warehouses) over the past m days\n    This query shows the total credit consumption on an hourly basis to help understand consumption trends (peaks, valleys) over the past m\ndays. This helps identify times of day when there are spikes in consumption.\n\n```\nSELECT start_time , \n  warehouse_name , \n  credits_used_compute \n FROM snowflake . account_usage . warehouse_metering_history \n WHERE start_time >= DATEADD ( day , - m , CURRENT_TIMESTAMP ()) \n  AND warehouse_id > 0  -- Skip pseudo-VWs such as \"CLOUD_SERVICES_ONLY\" \n ORDER BY 1 DESC , 2 ; \n\n -- by hour \n SELECT DATE_PART ( 'HOUR' , start_time ) AS start_hour , \n  warehouse_name , \n  AVG ( credits_used_compute ) AS credits_used_compute_avg \n FROM snowflake . account_usage . warehouse_metering_history \n WHERE start_time >= DATEADD ( day , - m , CURRENT_TIMESTAMP ()) \n  AND warehouse_id > 0  -- Skip pseudo-VWs such as \"CLOUD_SERVICES_ONLY\" \n GROUP BY 1 , 2 \n ORDER BY 1 , 2 ;\n```\n\nCopy\n\nQuery: Credit consumption by warehouse over specific time period\n    This query shows the total credit consumption for each warehouse over a specific time period. This helps identify warehouses that are\nconsuming more credits than others and specific warehouses that are consuming more credits than anticipated.\n\n```\n-- Credits used (all time = past year) \n SELECT warehouse_name , \n  SUM ( credits_used_compute ) AS credits_used_compute_sum \n FROM snowflake . account_usage . warehouse_metering_history \n GROUP BY 1 \n ORDER BY 2 DESC ; \n\n -- Credits used (past N days/weeks/months) \n SELECT warehouse_name , \n  SUM ( credits_used_compute ) AS credits_used_compute_sum \n FROM snowflake . account_usage . warehouse_metering_history \n WHERE start_time >= DATEADD ( day , - m , CURRENT_TIMESTAMP ()) \n GROUP BY 1 \n ORDER BY 2 DESC ;\n```\n\nCopy\n\nQuery: Warehouse usage over m-day average\n    This query returns the daily average credit consumption grouped by week and warehouse. It can be used to identify anomalies in credit\nconsumption for warehouses across weeks from the past year.\n\n```\nWITH cte_date_wh AS ( \n  SELECT TO_DATE ( start_time ) AS start_date , \n    warehouse_name , \n    SUM ( credits_used ) AS credits_used_date_wh \n  FROM snowflake . account_usage . warehouse_metering_history \n  GROUP BY start_date , warehouse_name \n ) \n\n SELECT start_date , \n  warehouse_name , \n  credits_used_date_wh , \n  AVG ( credits_used_date_wh ) OVER ( PARTITION BY warehouse_name ORDER BY start_date ROWS m PRECEDING ) AS credits_used_m_day_avg , \n  100 . 0 *(( credits_used_date_wh / credits_used_m_day_avg ) - 1 ) AS pct_over_to_m_day_average \n FROM cte_date_wh \n  QUALIFY credits_used_date_wh > 100  -- Minimum N=100 credits \n    AND pct_over_to_m_day_average >= 0 . 5  -- Minimum 50% increase over past m day average \n ORDER BY pct_over_to_m_day_average DESC ;\n```\n\nCopy\n\n#### Compute for cloud services [¶]( \"Link to this heading\")\n\nQuery: Billed cloud services\n    [Usage for cloud services](cost-understanding-compute.html) is billed only if the daily consumption of cloud\nservices exceeds 10% of the daily usage of virtual warehouses. This query returns how much of cloud services consumption was actually\nbilled for a particular day, ordered by the highest billed amount.\n\n```\nSELECT \n    usage_date , \n    credits_used_cloud_services , \n    credits_adjustment_cloud_services , \n    credits_used_cloud_services + credits_adjustment_cloud_services AS billed_cloud_services \n FROM snowflake . account_usage . metering_daily_history \n WHERE usage_date >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n    AND credits_used_cloud_services > 0 \n ORDER BY 4 DESC ;\n```\n\nCopy\n\nQuery: Total cloud services cost by type of query\n    This query returns the total credits consumed for cloud services by a particular type of query.\n\n```\nSELECT query_type , \n  SUM ( credits_used_cloud_services ) AS cs_credits , \n  COUNT ( 1 ) num_queries \n FROM snowflake . account_usage . query_history \n WHERE true \n  AND start_time >= TIMESTAMPADD ( day , - 1 , CURRENT_TIMESTAMP ) \n GROUP BY 1 \n ORDER BY 2 DESC \n LIMIT 10 ;\n```\n\nCopy\n\nQuery: Cloud services cost for queries of a given type\n    This query returns the total credits consumed for cloud services by all queries of a specific type. Replace `'COPY'` if you want to focus on a different type of query and `day` if you want to explore a longer or shorter period of time.\n\n```\nSELECT * \n FROM snowflake . account_usage . query_history \n WHERE true \n  AND start_time >= TIMESTAMPADD ( day , - 1 , CURRENT_TIMESTAMP ) \n  AND query_type = 'COPY' \n ORDER BY credits_used_cloud_services DESC \n LIMIT 10 ;\n```\n\nCopy\n\nQuery: Warehouses with high cloud services usage\n    This query shows the warehouses that are not using enough warehouse time to cover the cloud services portion of compute. This provides a\nlaunching point for additional investigation by isolating warehouses with a high ratio of cloud service use (>10% of overall credits).\nInvestigation candidates include issues around cloning, listing files in S3, partner tools, setting session parameters, etc.\n\n```\nSELECT \n  warehouse_name , \n  SUM ( credits_used ) AS credits_used , \n  SUM ( credits_used_cloud_services ) AS credits_used_cloud_services , \n  SUM ( credits_used_cloud_services )/ SUM ( credits_used ) AS percent_cloud_services \n FROM snowflake . account_usage . warehouse_metering_history \n WHERE TO_DATE ( start_time ) >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n    AND credits_used_cloud_services > 0 \n GROUP BY 1 \n ORDER BY 4 DESC ;\n```\n\nCopy\n\nQuery: Cloud services usage sorted by portion of query time\n    This query returns all queries run within the last minute and sorts them by parts of total query execution time (e.g. compilation time vs. queue time).\n\n```\nSELECT * \n FROM snowflake . account_usage . query_history \n WHERE true \n  AND start_time >= TIMESTAMPADD ( minute , - 60 , CURRENT_TIMESTAMP ) \n ORDER BY compilation_time DESC , \n  execution_time DESC , \n  list_external_files_time DESC , \n  queued_overload_time DESC , \n  credits_used_cloud_services DESC \n LIMIT 10 ;\n```\n\nCopy\n\n#### Compute for Automatic Clustering [¶]( \"Link to this heading\")\n\nQuery: Automatic Clustering cost history (by day, by object)\n    This query provides a list of tables with Automatic Clustering and the volume of credits consumed via the service over the last 30 days,\nbroken out by day. Any irregularities in the credit consumption or consistently high consumption are flags for additional investigation.\n\n```\nSELECT TO_DATE ( start_time ) AS date , \n  database_name , \n  schema_name , \n  table_name , \n  SUM ( credits_used ) AS credits_used \n FROM snowflake . account_usage . automatic_clustering_history \n WHERE start_time >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 , 2 , 3 , 4 \n ORDER BY 5 DESC ;\n```\n\nCopy\n\nQuery: Automatic Clustering History & m-day average\n    This query shows the average daily credits consumed by Automatic Clustering grouped by week over the last year. It can help identify\nanomalies in daily averages over the year so you can investigate spikes or unexpected changes in consumption.\n\n```\nWITH credits_by_day AS ( \n  SELECT TO_DATE ( start_time ) AS date , \n    SUM ( credits_used ) AS credits_used \n  FROM snowflake . account_usage . automatic_clustering_history \n  WHERE start_time >= DATEADD ( year ,- 1 , CURRENT_TIMESTAMP ()) \n  GROUP BY 1 \n  ORDER BY 2 DESC \n ) \n\n SELECT DATE_TRUNC ( 'week' , date ), \n      AVG ( credits_used ) AS avg_daily_credits \n FROM credits_by_day \n GROUP BY 1 \n ORDER BY 1 ;\n```\n\nCopy\n\n#### Compute for Search Optimization [¶]( \"Link to this heading\")\n\nQuery: Search Optimization cost history (by day, by object)\n    This query provides a full list of tables with Search Optimization and the volume of credits consumed via the service over the last 30\ndays, broken out by day. Any irregularities in the credit consumption or consistently high consumption are flags for additional\ninvestigation.\n\n```\nSELECT TO_DATE ( start_time ) AS date , \n  database_name , \n  schema_name , \n  table_name , \n  SUM ( credits_used ) AS credits_used \n FROM snowflake . account_usage . search_optimization_history \n WHERE start_time >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 , 2 , 3 , 4 \n ORDER BY 5 DESC ;\n```\n\nCopy\n\nQuery: Search Optimization History & m-day average\n    This query shows the average daily credits consumed by Search Optimization grouped by week over the last year. It can help identify\nanomalies in daily averages over the year so you can investigate spikes or unexpected changes in\nconsumption.\n\n```\nWITH credits_by_day AS ( \n  SELECT TO_DATE ( start_time ) AS date , \n    SUM ( credits_used ) AS credits_used \n  FROM snowflake . account_usage . search_optimization_history \n  WHERE start_time >= DATEADD ( year ,- 1 , CURRENT_TIMESTAMP ()) \n  GROUP BY 1 \n  ORDER BY 2 DESC \n ) \n\n SELECT DATE_TRUNC ( 'week' , date ), \n  AVG ( credits_used ) as avg_daily_credits \n FROM credits_by_day \n GROUP BY 1 \n ORDER BY 1 ;\n```\n\nCopy\n\n#### Compute for Materialized Views [¶]( \"Link to this heading\")\n\nQuery: Materialized Views cost history (by day, by object)\n    This query provides a full list of materialized views and the volume of credits consumed via the service over the last 30 days, broken\nout by day. Any irregularities in the credit consumption or consistently high consumption are flags for additional investigation.\n\n```\nSELECT TO_DATE ( start_time ) AS date , \n  database_name , \n  schema_name , \n  table_name , \n  SUM ( credits_used ) AS credits_used \n FROM snowflake . account_usage . materialized_view_refresh_history \n WHERE start_time >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 , 2 , 3 , 4 \n ORDER BY 5 DESC ;\n```\n\nCopy\n\nQuery: Materialized Views History & m-day average\n    This query shows the average daily credits consumed by materialized views grouped by week over the last year. It can help identify\nanomalies in daily averages over the year so you can investigate spikes or unexpected changes in\nconsumption.\n\n```\nWITH credits_by_day AS ( \n  SELECT TO_DATE ( start_time ) AS date , \n    SUM ( credits_used ) AS credits_used \n  FROM snowflake . account_usage . materialized_view_refresh_history \n  WHERE start_time >= DATEADD ( year ,- 1 , CURRENT_TIMESTAMP ()) \n  GROUP BY 1 \n  ORDER BY 2 DESC \n ) \n\n SELECT DATE_TRUNC ( 'week' , date ), \n  AVG ( credits_used ) AS avg_daily_credits \n FROM credits_by_day \n GROUP BY 1 \n ORDER BY 1 ;\n```\n\nCopy\n\n#### Compute for Query Acceleration Service [¶]( \"Link to this heading\")\n\nQuery: Query Acceleration Service cost by warehouse\n    This query returns the total number of credits used by each warehouse in your account for the query acceleration service\n(month-to-date):\n\n```\nSELECT warehouse_name , \n       SUM ( credits_used ) AS total_credits_used \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ACCELERATION_HISTORY \n  WHERE start_time >= DATE_TRUNC ( month , CURRENT_DATE ) \n  GROUP BY 1 \n  ORDER BY 2 DESC ;\n```\n\nCopy\n\n#### Compute for Snowpipe and Snowpipe Streaming [¶]( \"Link to this heading\")\n\nQuery: Cumulative usage of data ingest (Snowpipe and “Copy”)\n    This query returns an aggregated daily summary of all loads for each table in Snowflake showing average file size, total rows, total\nvolume and the ingest method (copy or Snowpipe). If file sizes are too small or big for optimal ingest, additional\ninvestigation/optimization may be required. By mapping the volume to credit consumption, it is possible to determine which tables are\nconsuming more credits per TB loaded.\n\n```\nSELECT TO_DATE ( last_load_time ) AS load_date , \n  status , \n  table_catalog_name AS database_name , \n  table_schema_name AS schema_name , \n  table_name , \n  CASE \n    WHEN pipe_name IS NULL THEN 'COPY' \n    ELSE 'SNOWPIPE' \n  END AS ingest_method , \n  SUM ( row_count ) AS row_count , \n  SUM ( row_parsed ) AS rows_parsed , \n  AVG ( file_size ) AS avg_file_size_bytes , \n  SUM ( file_size ) AS total_file_size_bytes , \n  SUM ( file_size )/ POWER ( 1024 , 1 ) AS total_file_size_kb , \n  SUM ( file_size )/ POWER ( 1024 , 2 ) AS total_file_size_mb , \n  SUM ( file_size )/ POWER ( 1024 , 3 ) AS total_file_size_gb , \n  SUM ( file_size )/ POWER ( 1024 , 4 ) AS total_file_size_tb \n FROM snowflake . account_usage . copy_history \n GROUP BY 1 , 2 , 3 , 4 , 5 , 6 \n ORDER BY 3 , 4 , 5 , 1 , 2 ;\n```\n\nCopy\n\nQuery: Snowpipe cost history (by day, by object)\n    This query provides a full list of pipes and the volume of credits consumed via the service over the last 30 days, broken out by day.\nAny irregularities in the credit consumption or consistently high consumption are flags for additional investigation.\n\n```\nSELECT TO_DATE ( start_time ) AS date , \n  pipe_name , \n  SUM ( credits_used ) AS credits_used \n FROM snowflake . account_usage . pipe_usage_history \n WHERE start_time >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 , 2 \n ORDER BY 3 DESC ;\n```\n\nCopy\n\nQuery: Snowpipe History & m-day average\n    This query shows the average daily credits consumed by Snowpipe grouped by week over the last year. It can help identify anomalies in\ndaily averages over the year so you can investigate spikes or unexpected changes in consumption.\n\n```\nWITH credits_by_day AS ( \n  SELECT TO_DATE ( start_time ) AS date , \n    SUM ( credits_used ) AS credits_used \n  FROM snowflake . account_usage . pipe_usage_history \n  WHERE start_time >= DATEADD ( year ,- 1 , CURRENT_TIMESTAMP ()) \n  GROUP BY 1 \n  ORDER BY 2 DESC \n ) \n\n SELECT DATE_TRUNC ( 'week' , date ), \n  AVG ( credits_used ) AS avg_daily_credits \n FROM credits_by_day \n GROUP BY 1 \n ORDER BY 1 ;\n```\n\nCopy\n\nQuery: Total Snowpipe Streaming cost\n    This query lists the current credit usage for Snowpipe Streaming, including both Snowpipe Streaming compute and client costs.\n\n```\nSELECT start_time , \n  end_time , \n  SUM ( credits_used ) AS total_credits , \n  name , \n  IFF ( CONTAINS ( name , ':' ), 'streaming client cost' , 'streaming compute cost' ) AS streaming_cost_type \n FROM SNOWFLAKE . ACCOUNT_USAGE . METERING_HISTORY \n WHERE service_type = 'SNOWPIPE_STREAMING' \n GROUP BY ALL ;\n```\n\nCopy\n\n#### Compute for serverless alerts [¶]( \"Link to this heading\")\n\nQuery: Total serverless alert cost\n    This query lists the current credit usage for all serverless alerts:\n\n```\nSELECT \n    start_time , \n    end_time , \n    alert_id , \n    alert_name , \n    credits_used , \n    schema_id , \n    schema_name , \n    database_id , \n    database_name \n  FROM SNOWFLAKE . ACCOUNT_USAGE . serverless_alert_history \n  ORDER BY start_time , alert_id ;\n```\n\nCopy\n\n#### Compute for serverless tasks [¶]( \"Link to this heading\")\n\nQuery: Total serverless task cost\n    This query lists the current credit usage for all serverless tasks:\n\n```\nSELECT start_time , \n  end_time , \n  task_id , \n  task_name , \n  credits_used , \n  schema_id , \n  schema_name , \n  database_id , \n  database_name \n FROM snowflake . account_usage . serverless_task_history \n ORDER BY start_time , task_id ;\n```\n\nCopy\n\n#### Compute for replication [¶]( \"Link to this heading\")\n\nQuery: Account replication cost\n    This query lists the credits used by a replication or failover group for account replication in the current month:\n\n```\nSELECT start_time , \n  end_time , \n  replication_group_name , \n  credits_used , \n  bytes_transferred \n FROM snowflake . account_usage . replication_group_usage_history \n WHERE start_time >= DATE_TRUNC ( 'month' , CURRENT_DATE ());\n```\n\nCopy\n\nQuery: Database replication cost history (by day, by object)\n    This query provides a full list of replicated databases and the volume of credits consumed via the replication service over the last 30\ndays, broken out by day. Any irregularities in the credit consumption or consistently high consumption are flags for additional\ninvestigation.\n\n```\nSELECT TO_DATE ( start_time ) AS date , \n  database_name , \n  SUM ( credits_used ) AS credits_used \n FROM snowflake . account_usage . database_replication_usage_history \n WHERE start_time >= DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 , 2 \n ORDER BY 3 DESC ;\n```\n\nCopy\n\nQuery: Database replication History & m-day average\n    This query shows the average daily credits consumed by Replication grouped by week over the last year. This helps identify any\nanomalies in the daily average so you can investigate any spikes or changes in consumption.\n\n```\nWITH credits_by_day AS ( \n  SELECT TO_DATE ( start_time ) AS date , \n    SUM ( credits_used ) AS credits_used \n  FROM snowflake . account_usage . database_replication_usage_history \n  WHERE start_time >= DATEADD ( year ,- 1 , CURRENT_TIMESTAMP ()) \n  GROUP BY 1 \n  ORDER BY 2 DESC \n ) \n\n SELECT DATE_TRUNC ( 'week' , date ), \n  AVG ( credits_used ) AS avg_daily_credits \n FROM credits_by_day \n GROUP BY 1 \n ORDER BY 1 ;\n```\n\nCopy\n\n#### Compute for partner tools [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by partner tools\n    This query identifies which of Snowflake’s partner tools/solutions (e.g. BI, ETL, etc.) are consuming the most credits. This can help\nidentify partner solutions that are consuming more credits than anticipated, which can be a starting point for additional investigation.\n\n```\n-- This Is Approximate Credit Consumption By Client Application \n WITH \n  client_hour_execution_cte AS ( \n    SELECT \n      CASE \n        WHEN client_application_id LIKE 'Go %' THEN 'Go' \n        WHEN client_application_id LIKE 'Snowflake UI %' THEN 'Snowflake UI' \n        WHEN client_application_id LIKE 'Snowflake CLI %' THEN 'Snowflake CLI' \n        WHEN client_application_id LIKE 'SnowSQL %' THEN 'SnowSQL' \n        WHEN client_application_id LIKE 'JDBC %' THEN 'JDBC' \n        WHEN client_application_id LIKE 'PythonConnector %' THEN 'Python' \n        WHEN client_application_id LIKE 'ODBC %' THEN 'ODBC' \n        ELSE 'NOT YET MAPPED: ' || CLIENT_APPLICATION_ID \n      END AS client_application_name , \n      warehouse_name , \n      DATE_TRUNC ( 'hour' , start_time ) AS start_time_hour , \n      SUM ( execution_time )  AS client_hour_execution_time \n    FROM snowflake . account_usage . query_history qh \n      JOIN snowflake . account_usage . sessions se \n        ON se . session_id = qh . session_id \n    WHERE warehouse_name IS NOT NULL \n      AND execution_time > 0 \n      AND start_time > DATEADD ( month ,- 1 , CURRENT_TIMESTAMP ()) \n    GROUP BY 1 , 2 , 3 \n  ), \n  hour_execution_cte AS ( \n    SELECT start_time_hour , \n      warehouse_name , \n      SUM ( client_hour_execution_time ) AS hour_execution_time \n    FROM client_hour_execution_cte \n    GROUP BY 1 , 2 \n  ), \n  approximate_credits AS ( \n    SELECT A . client_application_name , \n      C . warehouse_name , \n      ( A . client_hour_execution_time / B . hour_execution_time )* C . credits_used AS approximate_credits_used \n    FROM client_hour_execution_cte A \n      JOIN hour_execution_cte B \n        ON A . start_time_hour = B . start_time_hour and B . warehouse_name = A . warehouse_name \n      JOIN snowflake . account_usage . warehouse_metering_history C \n        ON C . warehouse_name = A . warehouse_name AND C . start_time = A . start_time_hour \n  ) \n\n SELECT client_application_name , \n  warehouse_name , \n  SUM ( approximate_credits_used ) AS approximate_credits_used \n FROM approximate_credits \n GROUP BY 1 , 2 \n ORDER BY 3 DESC ;\n```\n\nCopy\n\n#### Compute for hybrid tables [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by hybrid table over a specific period of time\n    This query shows the total credit consumption for each hybrid table over a\nspecific period of time. This helps identify hybrid tables that are\nconsuming more credits than others and specific hybrid tables that are\nconsuming more credits than anticipated.\n\n```\n-- Credits used (all time = past year) \n\n SELECT object_type , \n  SUM ( credits_used ) AS total_credits \n FROM SNOWFLAKE . ACCOUNT_USAGE . HYBRID_TABLE_USAGE_HISTORY \n GROUP BY 1 ; \n\n -- Credits used (past N days/weeks/months) \n\n SELECT object_type , \n  SUM ( credits_used ) AS total_credits \n FROM SNOWFLAKE . ACCOUNT_USAGE . HYBRID_TABLE_USAGE_HISTORY \n WHERE start_time >= DATEADD ( day , - 5 , CURRENT_TIMESTAMP ()) \n GROUP BY 1 ;\n```\n\nCopy\n\n#### Compute for Cortex Analyst [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by Cortex Analyst.\n    This query shows the credit consumption for Cortex Analyst.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_ANALYST_USAGE_HISTORY ;\n```\n\nCopy\n\n#### Compute for Cortex Fine-tuning [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by Cortex Fine-tuning.\n    This query shows the training credit consumption for each Cortex Fine-tuning,\naggregated in one hour increments.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_FINE_TUNING_USAGE_HISTORY ;\n```\n\nCopy\n\n#### Compute for Cortex functions [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by Cortex functions.\n    This query shows the credit consumption for each Cortex function call, aggregated in one hour increments based on\nfunction and model.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_FUNCTIONS_USAGE_HISTORY ;\n```\n\nCopy\nQuery: Credit consumption by Cortex function called with the `mistral-large` model.\n    This query shows the credit consumption for each Cortex function called with the `mistral-large` model, aggregated in one\nhour increments based on function and model.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_FUNCTIONS_USAGE_HISTORY \n  WHERE model_name = 'mistral-large' ;\n```\n\nCopy\n\nQuery: Credit consumption by Cortex functions query.\n    This query shows the credit consumption for each Cortex functions query, aggregated in one hour increments based on\nfunction and model.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_FUNCTIONS_QUERY_USAGE_HISTORY \n  WHERE query_id = 'query-id' ;\n```\n\nCopy\n\n#### Compute for Cortex REST API [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by Cortex REST API.\n    This query shows the credit consumption for Cortex REST API calls, including the number of tokens processed\nand the model used for each request.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_REST_API_USAGE_HISTORY ;\n```\n\nCopy\n\n#### Compute for Cortex Search [¶]( \"Link to this heading\")\n\nQuery: Daily credit consumption by Cortex Search.\n    This query shows the credit consumption for each Cortex Search Service,\naggregated daily, including both serving and embed text token consumption.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_SEARCH_DAILY_USAGE_HISTORY ;\n```\n\nCopy\n\nQuery: Credit consumption by Cortex Search serving.\n    This query shows the serving credit consumption for each Cortex Search Service,\naggregated in one hour increments.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_SEARCH_SERVING_USAGE_HISTORY ;\n```\n\nCopy\n\n#### Compute for Document AI [¶]( \"Link to this heading\")\n\nQuery: Credit consumption by Document AI.\n    This query shows the credit consumption for Document AI.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . DOCUMENT_AI_USAGE_HISTORY ;\n```\n\nCopy\n\nQuery: Credit consumption per Document AI query.\n    This query retrieves records from the CORTEX\\_DOCUMENT\\_PROCESSING\\_USAGE\\_HISTORY view where the CREDITS\\_USED is greater than 0.072.\n\n```\nSELECT * \n  FROM SNOWFLAKE . ACCOUNT_USAGE . CORTEX_DOCUMENT_PROCESSING_USAGE_HISTORY \n  WHERE CREDITS_USED > 0 . 072\n```\n\nCopy\n\n#### Compute for Snowflake Notebooks [¶]( \"Link to this heading\")\n\nQuery: Hourly credit consumption by notebook\n    This query retrieves runtime history for a specific notebook, including credit usage and execution timestamps. Use this data to understand how\noften and how long a notebook runs, and to identify patterns or spikes in credit consumption by hour.\n\n```\nSELECT * FROM snowflake . account_usage . notebooks_container_runtime_history \n WHERE notebook_name = '<example_nb_name>' ;\n```\n\nCopy\n\nQuery: Cost to run a specific notebook\n    This query shows the total credits consumed by a specific notebook. Use this to estimate a notebook’s cost and identify high-cost notebooks.\n\n```\nSELECT \n  notebook_name , \n  SUM ( credits ) AS total_credits \n FROM snowflake . account_usage . notebooks_container_runtime_history \n WHERE notebook_name = '<example_nb_name>' \n GROUP BY notebook_name ;\n```\n\nCopy\n\nQuery: Total compute pool cost per notebook\n    This query shows the total credits consumed by each notebook running on a specific compute pool. Use this to break down compute usage by\nnotebook, which can help identify which notebooks contribute most to the compute pool’s overall cost.\n\n```\nSELECT \n  notebook_name , \n  SUM ( credits ) AS total_credits \n FROM snowflake . account_usage . notebooks_container_runtime_history \n WHERE compute_pool_name = '<example_cp_name>' \n GROUP BY notebook_name ;\n```\n\nCopy\n\nQuery: Identify users who ran a specific notebook\n    This query returns a list of users who have executed a specific notebook. Use this to understand usage patterns, or identify collaborators\nand consumers of shared notebooks.\n\n```\nSELECT \n  DISTINCT user_name \n FROM snowflake . account_usage . notebooks_container_runtime_history \n WHERE notebook_name = '<example_nb_name>' ;\n```\n\nCopy\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nOn this page\n\n1. [Viewing credit usage]()\n2. [Querying data for compute cost]()\n\nRelated content\n\n1. [Understanding compute cost](/user-guide/cost-understanding-compute)\n2. [Exploring overall cost](/user-guide/cost-exploring-overall)\n3. [Attributing cost](/user-guide/cost-attributing)\n\nLanguage: **English**\n\n* [English](/en/user-guide/cost-exploring-compute)\n* [Français](/fr/user-guide/cost-exploring-compute)\n* [Deutsch](/de/user-guide/cost-exploring-compute)\n* [日本語](/ja/user-guide/cost-exploring-compute)\n* [한국어](/ko/user-guide/cost-exploring-compute)\n* [Português](/pt/user-guide/cost-exploring-compute)\n"],"full_content":null},{"url":"https://docs.snowflake.com/en/sql-reference/account-usage/query_attribution_history","title":"QUERY_ATTRIBUTION_HISTORY view | Snowflake Documentation","publish_date":null,"excerpts":["[DOCUMENTATION](https://docs.snowflake.com)\n\n/\n\n[Get started](/en/user-guide-getting-started)\n\n[Guides](/en/guides)\n\n[Developer](/en/developer)\n\n[Reference](/en/reference)\n\n[Release notes](/en/release-notes/overview)\n\n[Tutorials](/en/tutorials)\n\n[Status](https://status.snowflake.com)\n\n[Reference](/en/reference) [General reference](/en/sql-reference) [SNOWFLAKE database](/en/sql-reference/snowflake-db) [Account Usage](/en/sql-reference/account-usage) QUERY\\_ATTRIBUTION\\_HISTORY\n\nSchemas:\n    [ACCOUNT\\_USAGE](../account-usage.html)\n\n# QUERY\\_ ATTRIBUTION\\_ HISTORY view [¶]( \"Link to this heading\")\n\nThis Account Usage view can be used to determine the compute cost of a given query run on warehouses in your account\nin the last 365 days (1 year).\n\nFor more information, see [Viewing cost by tag in SQL](../../user-guide/cost-attributing.html) .\n\n## Columns [¶]( \"Link to this heading\")\n\n|Column name |Data type |Description |\n| --- | --- | --- |\n|`query_id` |VARCHAR |Internal/system-generated identifier for the SQL statement. |\n|`parent_query_id` |VARCHAR |Query ID of the parent query or NULL if the query does not have a parent. |\n|`root_query_id` |VARCHAR |Query ID of the topmost query in the chain or NULL if the query does not have a parent. |\n|`warehouse_id` |NUMBER |Internal/system-generated identifier for the warehouse that the query was executed on. |\n|`warehouse_name` |VARCHAR |Name of the warehouse that the query executed on. |\n|`query_hash` |VARCHAR |The [hash value](../../user-guide/query-hash.html) computed based on the canonicalized SQL text. |\n|`query_parameterized_hash` |VARCHAR |The [hash value](../../user-guide/query-hash.html) computed based on the parameterized query. |\n|`query_tag` |VARCHAR |Query tag set for this statement through the [QUERY\\_TAG](../parameters.html) session parameter. |\n|`user_name` |VARCHAR |User who issued the query. |\n|`start_time` |TIMESTAMP\\_LTZ |Time when query execution started (in the local time zone). |\n|`end_time` |TIMESTAMP\\_LTZ |Time when query execution ended (in the local time zone). |\n|`credits_attributed_compute` |NUMBER |Number of credits attributed to this query. Includes only the credit usage for the query execution and doesn’t include any warehouse idle time. |\n|`credits_used_query_acceleration` |NUMBER |Number of credits consumed by the [Query Acceleration Service](../../user-guide/query-acceleration-service) to accelerate the query. NULL if the query is not accelerated. . . The total cost for an accelerated query is the sum of this column and the `credits_attributed_compute` column. |\n\n## Usage notes [¶]( \"Link to this heading\")\n\n* Latency for this view can be up to eight hours.\n* This view displays results for any role granted the USAGE\\_VIEWER or GOVERNANCE\\_VIEWER [database role](../snowflake-db-roles) .\n\n\n* The value in the `credits_attributed_compute` column contains the warehouse credit usage for executing the query,\n  inclusive of any resizing and/or autoscaling of multi-cluster warehouse(s). This cost is attributed based on\n  the weighted average of the resource consumption.\n  \n  The value doesn’t include any credit usage for warehouse idle time. Idle time is a period\n  of time in which no queries are running in the warehouse and can be measured at the warehouse level.\n  \n  The value doesn’t include any other credit usage that is incurred as a result of query execution.\n  For example, the following are not included in the query cost:\n  \n    + Data transfer costs\n    + Storage costs\n    + Cloud services costs\n    + Costs for serverless features\n    + Costs for tokens processed by AI services\n* For queries that are executed concurrently, the cost of the warehouse is attributed to individual queries based on the\n  weighted average of their resource consumption during a given time interval.\n* Short-running queries (<= ~100ms) are currently too short for per query cost attribution and are not included in the view.\n* Data for all columns is available starting from mid-August, 2024. Some data prior to this date might be available in the view, but\n  might be incomplete.\n\n## Examples [¶]( \"Link to this heading\")\n\n### Query costs for related queries [¶]( \"Link to this heading\")\n\nTo determine the costs of a specific query and similar queries using the query parameterized hash, replace `<query_id>` and execute the following statements:\n\n```\nSET query_id = '<query_id>' ; \n\n WITH query_hash_of_query AS ( \n  SELECT query_parameterized_hash \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE query_id = $ query_id \n  LIMIT 1 \n ) \n SELECT \n  query_parameterized_hash , \n  COUNT (*) AS query_count , \n  SUM ( credits_attributed_compute ) AS recurrent_query_attributed_credits \n FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n WHERE start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n  AND start_time < CURRENT_DATE \n  AND query_parameterized_hash = ( SELECT query_parameterized_hash FROM query_hash_of_query ) \n GROUP BY ALL ;\n```\n\nCopy\n\n### Query costs for the current user [¶]( \"Link to this heading\")\n\nTo determine the costs of queries executed by the current user for the current month, execute the following statement:\n\n```\nSELECT user_name , SUM ( credits_attributed_compute ) AS credits \n  FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n  WHERE user_name = CURRENT_USER () \n    AND start_time >= DATE_TRUNC ( 'MONTH' , CURRENT_DATE ) \n    AND start_time < CURRENT_DATE \n  GROUP BY user_name ;\n```\n\nCopy\n\nFor an example of attributing warehouse costs to users, see [Resources shared by users from different departments](../../user-guide/cost-attributing.html) .\n\n### Query costs for stored procedures [¶]( \"Link to this heading\")\n\nFor stored procedures that issue multiple hierarchical queries, you can compute the attributed query costs for the\nprocedure by using the root query ID for the procedure.\n\n1. To find the root query ID for a stored procedure, use the [ACCESS\\_HISTORY view](access_history) . For example,\n   to find the root query ID for a stored procedure, set the `query_id` and execute the following statements:\n   \n   ```\n   SET query_id = '<query_id>' ; \n   \n    SELECT query_id , \n          parent_query_id , \n          root_query_id , \n          direct_objects_accessed \n     FROM SNOWFLAKE . ACCOUNT_USAGE . ACCESS_HISTORY \n     WHERE query_id = $ query_id ;\n   ```\n   \n   Copy\n   \n   For more information, see [Example: Ancestor queries with stored procedures](../../user-guide/access-history.html) .\n2. To sum the query cost for the entire procedure, replace `<root_query_id>` and execute the following statements:\n   \n   ```\n   SET query_id = '<root_query_id>' ; \n   \n    SELECT SUM ( credits_attributed_compute ) AS total_attributed_credits \n     FROM SNOWFLAKE . ACCOUNT_USAGE . QUERY_ATTRIBUTION_HISTORY \n     WHERE ( root_query_id = $ query_id OR query_id = $ query_id );\n   ```\n   \n   Copy\n\n### Additional examples [¶]( \"Link to this heading\")\n\nFor more examples, see [Resources shared by users from different departments](../../user-guide/cost-attributing.html) .\n\nWas this page helpful?\n\nYes No\n\n[Visit Snowflake](https://www.snowflake.com)\n\n[Join the conversation](https://community.snowflake.com/s/)\n\n[Develop with Snowflake](https://developers.snowflake.com)\n\n[Share your feedback](/feedback)\n\n[Read the latest on our blog](https://www.snowflake.com/blog/)\n\n[Get your own certification](https://learn.snowflake.com)\n\n[Privacy Notice](https://www.snowflake.com/privacy-policy/) [Site Terms](https://www.snowflake.com/legal/snowflake-site-terms/) Cookies Settings © 2026 Snowflake, Inc. All Rights Reserved.\n\nOn this page\n\n1. [Columns]()\n2. [Usage notes]()\n3. [Examples]()\n4. [Query costs for related queries]()\n5. [Query costs for the current user]()\n6. [Query costs for stored procedures]()\n7. [Additional examples]()\n\nRelated content\n\n1. [Overview of warehouses](/sql-reference/account-usage/../../user-guide/warehouses-overview)\n\nLanguage: **English**\n\n* [English](/en/sql-reference/account-usage/query_attribution_history)\n* [Français](/fr/sql-reference/account-usage/query_attribution_history)\n* [Deutsch](/de/sql-reference/account-usage/query_attribution_history)\n* [日本語](/ja/sql-reference/account-usage/query_attribution_history)\n* [한국어](/ko/sql-reference/account-usage/query_attribution_history)\n* [Português](/pt/sql-reference/account-usage/query_attribution_history)\n\n## Snowflake's Use of Cookies\n\nWe use cookies to enhance your experience and to analyze site traffic as described in our Cookie Statement. By accepting, you consent to our use of cookies. [Cookie Statement.](https://www.snowflake.com/privacy-policy/cookie-statement/)\n\nCookies Settings Reject All Accept All Cookies\n\n## Privacy Preference Center\n\nYour Opt Out Preference Signal is Honored\n\n* ### Your Privacy\n* ### Strictly Necessary Cookies\n* ### Performance Cookies\n* ### Functional Cookies\n* ### Targeting Cookies\n\n#### Your Privacy\n\nWhen you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Click on the different category headings to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.  \n[More information](https://cookiepedia.co.uk/giving-consent-to-cookies)\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.\n\nCookies Details‎\n\n#### Performance Cookies\n\nPerformance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site.    All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.\n\nCookies Details‎\n\n#### Functional Cookies\n\nFunctional Cookies\n\nThese cookies enable the website to provide enhanced functionality and personalisation. They may be set by us or by third party providers whose services we have added to our pages.    If you do not allow these cookies then some or all of these services may not function properly.\n\nCookies Details‎\n\n#### Targeting Cookies\n\nTargeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly identifiable personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.\n\nCookies Details‎\n\n### Cookie List\n\nConsent Leg.Interest\n\ncheckbox label label\n\ncheckbox label label\n\ncheckbox label label\n\nClear\n\ncheckbox label label\n\nApply Cancel\n\nConfirm My Choices\n\nAllow All\n\n[](https://www.onetrust.com/products/cookie-consent/)\n"],"full_content":null}],"errors":[],"warnings":[{"type":"warning","message":"Neither objective nor search_queries were provided, provide at least one to increase the relevance of excerpts.","detail":null}],"usage":[{"name":"sku_extract_excerpts","count":4}]}