# Research: FinOps - 2026-02-19
**Time:** 2026-02-19 14:02 UTC
**Topic:** Snowflake FinOps Cost Optimization & Native App Features
**Researcher:** Snow (AI Assistant)

---

## Accurate Takeaways

1. **Cost Anomaly Detection went GA in December 2025** — Snowflake now automatically detects cost anomalies based on prior consumption levels using ML, available at both account and organization levels. This shifted from Preview (May 2025) to GA (Dec 2025).

2. **Snowflake BUILD 2025 delivered major FinOps features** — Including Storage Lifecycle Policies (GA) for automatic data tiering (WARM→COOL→COLD), user/group budgets for AI workloads, and Cost Guardrail features for AI workloads (GA soon).

3. **Cortex AI cost controls are expanding** — New features include Cost-Based Anomaly Detection, Query Insights in Snowsight, and budget controls specifically for AI/ML workloads via Cortex Functions.

4. **Storage Lifecycle Policies (GA Dec 2025)** — Automatic data tiering with COOL storage at 4 credits/TB/month and COLD at 1 credit/TB/month. Serverless tasks power these policies, pay-per-use.

5. **Native Apps + Snowpark Container Services are maturing** — AWS Gov/FedRAMP support (GA Nov 2025), Azure Private Link support (GA Feb 2025), Google Cloud support (GA Jul 2025), and Shareback feature (GA Feb 2026) enabling apps to write data back to consumers.

6. **Horizon Catalog integration with Iceberg** — Full read/write support for Iceberg tables via Apache Polaris, Catalog-linked databases (GA Oct 2025), and business continuity DR replication for Iceberg tables.

## Snowflake Objects & Data Sources

| Object/View | Type | Source | Notes |
|-------------|------|--------|-------|
| COST_ANOMALIES | View | SNOWFLAKE.LOCAL | Programmatic cost anomaly detection |
| WAREHOUSE_METERING_HISTORY | View | ACCOUNT_USAGE | Hourly warehouse credit usage |
| QUERY_HISTORY | View | ACCOUNT_USAGE | Query-level cost attribution |
| TABLE_STORAGE_METRICS | View | ACCOUNT_USAGE | Storage volume tracking |
| CORTEX_FUNCTIONS_USAGE_HISTORY | View | ACCOUNT_USAGE | AI feature usage tracking |
| DATA_TRANSFER_HISTORY | View | ACCOUNT_USAGE | Egress cost monitoring |
| BUDGETS | Object | Account-level | Soft-limit budget enforcement |
| RESOURCE_MONITORS | Object | Account-level | Hard-limit credit quotas |
| TAG_REFERENCES | View | ACCOUNT_USAGE | Cost attribution via tags |
| STORAGE_LIFECYCLE_POLICIES | Object | Schema/Table | Auto-tiering policies (GA Dec 2025) |

**Legend:**
- `ACCOUNT_USAGE` = Account-level metadata
- `ORG_USAGE` = Organization-level 
- `INFO_SCHEMA` = Database-level

## MVP Features Unlocked

1. **Cost Anomaly Detection View** — Build a Native App view that surfaces anomalies from SNOWFLAKE.LOCAL and correlates with QUERY_HISTORY to show root cause drill-down.

2. **Storage Lifecycle Policy Manager** — UI for setting up COOL/COLD tiering policies with visual cost projection based on table access patterns from ACCESS_HISTORY.

3. **AI Workload Budget Tracker** — Specialized view tracking CORTEX_FUNCTIONS_USAGE_HISTORY + CORTEX_ANALYST_USAGE_HISTORY with per-team attribution via tags.

## Concrete Artifacts

### Cost Anomaly Detection Query Template
```sql
-- Query to detect cost anomalies with root cause attribution
WITH anomaly_base AS (
  SELECT 
    warehouse_name,
    DATE_TRUNC('DAY', start_time) as anomaly_date,
    SUM(credits_used) as daily_credits,
    AVG(SUM(credits_used)) OVER (
      ORDER BY DATE_TRUNC('DAY', start_time) 
      RANGE BETWEEN INTERVAL '30 DAYS' PRECEDING AND CURRENT ROW
    ) as avg_credits,
    STDDEV(SUM(credits_used)) OVER (
      ORDER BY DATE_TRUNC('DAY', start_time) 
      RANGE BETWEEN INTERVAL '30 DAYS' PRECEDING AND CURRENT ROW
    ) as stddev_credits
  FROM SNOWFLAKE.ACCOUNT_USAGE.WAREHOUSE_METERING_HISTORY
  WHERE start_time >= CURRENT_DATE - INTERVAL '60 DAYS'
  GROUP BY 1, 2
)
SELECT 
  warehouse_name,
  anomaly_date,
  daily_credits,
  -- Flag anomalies > 2 standard deviations
  CASE 
    WHEN daily_credits > avg_credits + (2 * COALESCE(stddev_credits, 0)) 
    THEN 'ANOMALY_HIGH'
    WHEN daily_credits < avg_credits - (2 * COALESCE(stddev_credits, 0))
    THEN 'ANOMALY_LOW'
    ELSE 'NORMAL'
  END as anomaly_type
FROM anomaly_base
WHERE anomaly_date >= CURRENT_DATE - INTERVAL '7 DAYS'
ORDER BY daily_credits DESC;
```

### Budget vs Actual Tracking
```sql
-- Cross-reference budgets with actual consumption
SELECT 
  b.budget_name,
  b.budget_amount,
  b.budget_currency,
  m.credits_used,
  (m.credits_used / b.budget_amount) * 100 as pct_consumed
FROM SNOWFLAKE.ACCOUNT_USAGE.BUDGETS b
LEFT JOIN SNOWFLAKE.ACCOUNT_USAGE.WAREHOUSE_METERING_HISTORY m
  ON b.account_name = CURRENT_ACCOUNT()
WHERE b.created_on >= CURRENT_DATE - INTERVAL '30 DAYS';
```

## Risks / Assumptions

| Risk/Assumption | Impact | Validation |
|-----------------|--------|------------|
| Cost Anomaly Detection requires 30 days of baseline data for ML model | Medium | Document requirement; fallback to statistical query if insufficient data |
| STORAGE_LIFECYCLE_POLICIES requires Enterprise edition features | High | Validate edition compatibility in target accounts |
| Native Apps with Snowpark Container Services have egress costs for data sharing | Medium | Test cross-cloud scenarios; implement ECO (Egress Cost Optimizer) |
| Tag-based attribution requires explicit user QUERY_TAG setting | Medium | Document best practices for query tag automation in app onboarding |
| CORTEX_AI usage charges in tokens not credits | Low | Use documented conversion rates (varies by model) |

## Links & Citations

1. [Snowflake Well-Architected Framework: Cost Optimization & FinOps](https://www.snowflake.com/en/developers/guides/well-architected-framework-cost-optimization-and-finops/) — Comprehensive FinOps guidance from Snowflake Labs, updated Nov 2025.
2. [Snowflake BUILD 2025 Recap: Flexera](https://www.flexera.com/blog/finops/snowflake-build-2025/) — Detailed feature breakdown from BUILD 2025 conference, including Storage Lifecycle Policies, Cost Guardrails, and AI workload budgets.
3. [Snowflake Release Notes: Cost Anomalies GA](https://docs.snowflake.com/en/release-notes/2025/other/2025-05-16-cost) — Official documentation on Cost Anomaly Detection feature (Preview May 2025, GA Dec 2025).
4. [Snowflake Cost Management Documentation](https://docs.snowflake.com/en/guides-overview-cost) — Central hub for budgets, resource monitors, and cost controls.
5. [Snowflake Native Apps on Google Cloud GA](https://www.snowflake.com/en/blog/platform-announcements-summit-2025/) — Platform announcements including Native App multi-cloud support.

## Next Steps / Follow-ups

- [ ] Validate STORAGE_LIFECYCLE_POLICIES API availability in target accounts
- [ ] Research Native App Shareback feature for cross-account cost data aggregation
- [ ] Investigate SNOWFLAKE.LOCAL.COST_ANOMALIES programmatic API limits
- [ ] Review Flexera's "Agentic FinOps for AI" blog for autonomous optimization patterns
